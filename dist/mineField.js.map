{"version":3,"sources":["dist/node_modules/browserify/node_modules/browser-pack/_prelude.js","src/classes/background.js","src/classes/canvas.js","src/classes/collection.js","src/classes/shape.js","src/classes/text.js","src/mineField.js","src/utils/events/createDummyEvent.js","src/utils/events/createEvent.js","src/utils/object/Queue.js","src/utils/object/extend.js","src/utils/object/instanceOf.js","src/utils/support/requestAnimationFrame.js"],"names":[],"mappings":"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","file":"dist/mineField.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// Background\n// Exposes the basic properties/methods of a controllable background\n\nimport Queue from '../utils/object/Queue';\n\n// Extract the window.background items\nlet queue = window.background = new Queue(window.background);\n\nfunction queueHandler(callback) {\n\t// Each item in the queue should be a function\n\tcallback(Background);\n}\n\nexport default class Background {\n\n\tstatic add(stage) {\n\t\t// Store the\n\t\tBackground.stages.push(stage);\n\n\t\t// Trigger ready if it has not already been set\n\t\tif (Background.stages.length === 1) {\n\t\t\t// Initiate the queue\n\t\t\tqueue.handler = queueHandler;\n\t\t}\n\t}\n\n\t// Create a new instance of a stage\n\tstatic init(target) {\n\t\t// Get the default stage which has been registered with this class\n\t\tlet stage = Background.stages[0];\n\n\t\t// Return instance\n\t\tif (stage) {\n\t\t\treturn new stage(target);\n\t\t}\n\t}\n}\n\nBackground.stages = [];\n","// Setup\n// This constructs the canvas object\n\n// Includes\nimport '../utils/support/requestAnimationFrame';\nimport createEvent from '../utils/events/createEvent';\nimport createDummyEvent from '../utils/events/createDummyEvent';\n\n// Constants\nconst BACKGROUND_HASH = 'background';\nconst UserEvents = ['click', 'mousedown', 'mouseup', 'mouseover', 'mousemove', 'mouseout', 'frame', 'resize'];\nconst TouchEvents = ['touchmove', 'touchstart', 'touchend'];\n\nconst EVENT_SEPARATOR = /[\\s\\,]+/;\n\nexport default class Canvas {\n\n\t// Construct the Canvas Element\n\t// @param canvas should be an root element container for this imagery.\n\tconstructor(canvas) {\n\n\t\tvar parent;\n\n\t\t// events\n\t\tthis.events = {};\n\n\t\t// browser check\n\t\tif (!('getContext' in document.createElement('canvas'))) {\n\t\t\t// browser doesn't support canvas\n\t\t\treturn;\n\t\t}\n\n\t\tif (!(canvas && canvas instanceof HTMLCanvasElement)) {\n\n\t\t\t// Set the parent\n\t\t\tparent = canvas;\n\n\t\t\t// Create the canvas layer\n\t\t\tcanvas = document.createElement('canvas');\n\t\t\tcanvas.style.backgroundColor = 'white';\n\n\t\t\t// Not a parent\n\t\t\tif (!parent) {\n\t\t\t\t// Append to the body\n\t\t\t\tparent = document.body;\n\t\t\t\tcanvas.style.cssText = 'position:fixed;z-index:-1;top:0;left:0;';\n\t\t\t\tcanvas.setAttribute('tabindex', 0);\n\n\t\t\t\tdocument.documentElement.style.cssText = 'min-height:100%;';\n\t\t\t\tdocument.body.style.cssText = 'min-height:100%;';\n\n\t\t\t\t// Bind window resize events\n\t\t\t\twindow.addEventListener('resize', this.resize.bind(this));\n\t\t\t}\n\n\t\t\t// Append this element\n\t\t\tparent.insertBefore(canvas, parent.firstElementChild);\n\n\t\t\tthis.target = canvas;\n\n\t\t\tthis.resize();\n\t\t}\n\t\telse {\n\t\t\tthis.target = canvas;\n\t\t\tparent = canvas.parentNode;\n\t\t}\n\n\t\tthis.ctx = canvas.getContext('2d');\n\n\t\t// Set initial save point\n\t\tthis.ctx.save();\n\n\t\t// Initiate the time\n\t\tthis._time = 0;\n\t\tthis._fps = 0;\n\n\t\t// Initiate the draw\n\t\tthis.draw();\n\n\t\t// Bind events\n\t\tUserEvents.forEach((eventname) => this.target.addEventListener(eventname, this.dispatchEvent.bind(this)));\n\n\t\t// Format Touch events\n\t\tTouchEvents.forEach((eventname) => this.target.addEventListener(eventname, this.dispatchTouchEvent.bind(this)));\n\n\t\t// In IE user-events aren't propagated to elements which have negative z-Index's\n\t\t// Listen to events on the document element and propagate those accordingly\n\t\tif (parent === document.body && canvas.style.getPropertyValue('z-index') === '-1') {\n\t\t\t// Bind events\n\t\t\tUserEvents.forEach((eventname) => document.addEventListener(eventname, this.dispatchEvent.bind(this)));\n\n\t\t\t// Format Touch events\n\t\t\tTouchEvents.forEach((eventname) => document.addEventListener(eventname, this.dispatchTouchEvent.bind(this)));\n\t\t}\n\n\t\t// Listen to hashChange events\n\t\t{\n\t\t\t// HASH CHANGE DEPTH\n\t\t\tlet style = this.target.style;\n\t\t\tlet initialZ = style.getPropertyValue('z-index');\n\t\t\t// Listen to changes to the background hash to bring the canvas element to the front\n\t\t\twindow.addEventListener('hashchange', hashchange.bind(style, initialZ));\n\n\t\t\thashchange.call(style, initialZ);\n\t\t}\n\t}\n\n\t// ensure its keeping up.\n\tget width() {\n\t\treturn this.target.width;\n\t}\n\tset width(value) {\n\t\tthis.target.width = value;\n\t\treturn value;\n\t}\n\n\tget height() {\n\t\treturn this.target.height;\n\t}\n\tset height(value) {\n\t\tthis.target.height = value;\n\t\treturn value;\n\t}\n\tget fps() {\n\t\treturn this._fps;\n\t}\n\tset fps(value) {\n\n\t\tthis._fps = value;\n\n\t\tlet now = (new Date()).getTime();\n\n\t\tif ((now - this._time) > 1000) {\n\t\t\t// console.log('fps: %d', this._fps);\n\t\t\tthis._time = now;\n\t\t\tthis._fps = 0;\n\t\t}\n\t}\n\n\n\tresize() {\n\t\tvar parent = (this.target.parentNode === document.body) ? document.documentElement : this.target.parentNode;\n\t\tvar height = parent.clientHeight;\n\t\tvar width = parent.clientWidth;\n\t\tvar changed = false;\n\n\t\tif (this.width !== width) {\n\t\t\tchanged = true;\n\t\t\tthis.width = width;\n\t\t}\n\t\tif (this.height !== height) {\n\t\t\tchanged = true;\n\t\t\tthis.height = height;\n\t\t}\n\n\t\tif (changed) {\n\t\t\tthis.target.dispatchEvent(createEvent('resize'));\n\t\t}\n\t}\n\n\tclear() {\n\t\tthis.ctx.clearRect(0, 0, this.target.width, this.target.height);\n\t}\n\n\t// Bring the content of the canvas to the front\n\tbringToFront() {\n\n\t\t// Update the window.location with the hash #background\n\t\twindow.location.hash = BACKGROUND_HASH;\n\t}\n\n\t// Trigger the draw function\n\tdraw() {\n\n\t\t// Increment the number of frames\n\t\tthis.fps++;\n\n\t\t// Call the frame function in the context of the frame to draw\n\t\tthis.target.dispatchEvent(createEvent('frame'));\n\n\t\t// Request another frame\n\t\trequestAnimationFrame(this.draw.bind(this));\n\t}\n\n\t// The user has clicked an item on the page\n\taddEventListener(eventnames, handler) {\n\n\t\teventnames.split(EVENT_SEPARATOR).forEach((eventname) => {\n\t\t\t// Add to the events list\n\t\t\tif (!(eventname in this.events)) {\n\t\t\t\tthis.events[eventname] = [];\n\t\t\t}\n\n\t\t\tthis.events[eventname].push(handler);\n\t\t});\n\t}\n\n\t// Dispatch\n\tdispatchEvent(e) {\n\n\t\tif (e.type in this.events) {\n\n\t\t\tlet target = e.currentTarget;\n\n\t\t\t// This was triggered using event delegation, aka in the background\n\t\t\tif (target === document) {\n\n\t\t\t\te = createDummyEvent({\n\t\t\t\t\ttype: e.type,\n\t\t\t\t\ttarget: this.target,\n\t\t\t\t\toffsetX: e.pageX || e.offsetX,\n\t\t\t\t\toffsetY: e.pageY || e.offsetY\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.events[e.type].forEach((handler) => handler(e));\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t}\n\t}\n\n\t// Dispatch\n\tdispatchTouchEvent(e) {\n\t\t// If this was a touch event\n\t\t// Determine the offset to the canvas element relative to the item being clicked\n\t\tvar touch = (e.touches || e.changedTouches)[0];\n\t\tif (touch) {\n\t\t\te.offsetX = Math.abs(touch.pageX || touch.screenX);\n\t\t\te.offsetY = Math.abs(touch.pageY || touch.screenY);\n\t\t}\n\n\t\tthis.dispatchEvent(e);\n\t}\n}\n\n\nfunction hashchange(z) {\n\n\tlet zIndex = 'z-index';\n\n\tif (window.location.hash === '#' + BACKGROUND_HASH) {\n\t\tz = 10000;\n\t}\n\n\tif (z !== undefined) {\n\t\t// Set the z-Index\n\t\tthis.setProperty(zIndex, z);\n\t}\n\telse {\n\t\t// Remove the z-Index\n\t\tthis.removeProperty(zIndex);\n\t}\n}\n","// Collection\n\nconst UserEvents = ['click', 'mousedown', 'mouseup', 'mouseover', 'mousemove', 'mouseout', 'touchmove', 'touchstart', 'touchend', 'frame'];\n\nexport default class Collection {\n\n\tconstructor(target) {\n\t\t// Create an empty children\n\t\tthis.children = [];\n\n\t\t// Events\n\t\tthis.events = [];\n\n\t\t// setup the canvas element\n\t\tthis.init(target);\n\t}\n\n\t// listen to canvas events\n\tinit (target) {\n\n\t\t// Define the canvas object as the target for the collection\n\t\tthis.target = target;\n\n\t\t// Define the CTX\n\t\tthis.ctx = target.getContext('2d');\n\n\t\t// listen to user interactive events and trigger those on items\n\t\tUserEvents.forEach((eventname) => target.addEventListener(eventname, this._findAndDispatch.bind(this)));\n\n\t}\n\n\tpush(item) {\n\t\titem.dirty = true;\n\n\t\t// Is this item already in the collection?\n\t\tif (this.children.indexOf(item) === -1) {\n\t\t\tif (item.setup) {\n\t\t\t\titem.setup(this);\n\t\t\t}\n\n\t\t\t// item.addEventListener('dirty', this.prepareChild.bind(this, item));\n\t\t\tthis.children.push(item);\n\t\t}\n\t}\n\n\tget length () {\n\t\treturn this.children.length;\n\t}\n\tset length (v) {\n\t\treturn this.children.length = v;\n\t}\n\n\n\t// Touch\n\t// Mark items and objects in the same space to be redrawn\n\tprepare() {\n\t\tthis.children.forEach((item) => {\n\t\t\tif (item.dirty === true)\n\t\t\t\tthis.prepareChild(item);\n\t\t});\n\t}\n\n\t// Clean Item\n\tprepareChild(item) {\n\n\t\tlet ctx = this.ctx;\n\n\t\tif (item.dirty === 'pending') {\n\t\t\treturn;\n\t\t}\n\n\t\t// Mark this item as dirty\n\t\titem.dirty = 'pending';\n\n\t\t// Remove from Canvas\n\t\tctx.clearRect(item.x, item.y, item.w, item.h);\n\n\t\t// If the items old position is different\n\t\tif (item.past && displaced(item.past, item)) {\n\t\t\tctx.clearRect(item.past.x, item.past.y, item.past.w, item.past.h);\n\t\t}\n\n\t\t// Loop though objects and redraw those that exist within the position\n\t\tthis.children.forEach(this._prepareSiblings.bind(this, item));\n\t}\n\n\t_prepareSiblings(item, sibling) {\n\n\t\t// Does this Object overlap with the focused object?\n\t\tif (!sibling.dirty && sibling.visible !== false && (intersect(sibling, item) || (item.past ? intersect(sibling, item.past) : false))) {\n\t\t\t// Nested clean\n\t\t\tthis.prepareChild(sibling);\n\t\t}\n\t}\n\n\tsort() {\n\t\t// Sort items by z-index\n\t\tthis.children.sort((a, b) => {\n\t\t\ta = a.zIndex || 0;\n\t\t\tb = b.zIndex || 0;\n\t\t\treturn +(a > b) || -(a < b);\n\t\t});\n\t}\n\n\t// Trigger the draw function\n\tdraw() {\n\n\t\tlet ctx = this.ctx;\n\n\t\t// Find items that have changed\n\t\t// Remove background\n\t\tthis.children.forEach((item) => {\n\n\t\t\tif (item.frame) {\n\t\t\t\titem.frame(ctx);\n\t\t\t}\n\n\t\t\tif (item.dirty && item.visible !== false) {\n\t\t\t\titem.draw(ctx);\n\t\t\t}\n\n\t\t\titem.dirty = false;\n\t\t});\n\t}\n\n\telementFromPoint(x, y) {\n\n\t\tvar target;\n\n\t\t// Find the canvas item which this targets?\n\t\tvar obj = {\n\t\t\tx: x,\n\t\t\ty: y,\n\t\t\tw: 1,\n\t\t\th: 1\n\t\t};\n\n\t\tthis.children.forEach((item) => {\n\n\t\t\tif (item.visible === false || !item.w || !item.h || item.pointerEvents === false) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Is this a target?\n\t\t\tif (intersect(obj, item)) {\n\t\t\t\t// Define this as a target\n\t\t\t\ttarget = item;\n\t\t\t}\n\t\t});\n\n\t\treturn target;\n\t}\n\n\t// The user has clicked an item on the page\n\taddEventListener(eventname, handler) {\n\n\t\t// Add to the events list\n\t\tif (!(eventname in this.events)) {\n\t\t\tthis.events[eventname] = [];\n\t\t}\n\n\t\tthis.events[eventname].push(handler);\n\t}\n\n\t// Dispatch\n\tdispatchEvent(e) {\n\t\tif (e.type in this.events)\n\t\t\tthis.events[e.type].forEach((handler) => handler(e));\n\t}\n\n\t// Find and _dispatch\n\t_findAndDispatch(e) {\n\t\t// If this is not a pointerEvent lets just pass it through.\n\t\tif ((typeof MouseEvent !== 'undefined' && e instanceof MouseEvent) ||\n\t\t\t(typeof TouchEvent !== 'undefined' && e instanceof TouchEvent)) {\n\n\t\t\t// Find the canvas item which this targets?\n\t\t\tvar obj = {\n\t\t\t\tx: e.offsetX,\n\t\t\t\ty: e.offsetY,\n\t\t\t\tw: 1,\n\t\t\t\th: 1\n\t\t\t};\n\n\t\t\tthis.children.forEach((item) => {\n\n\t\t\t\tif (!item.visible || !item.w || !item.h || !item.pointerEvents) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Intersects?\n\t\t\t\tintersect(obj, item) && item.dispatchEvent(e);\n\t\t\t});\n\t\t}\n\t}\n}\n\n\n// Intersect\n// Given two objects with, x,y,w,h properties\n// Do their rectangular dimensions intersect?\n// return Boolean true false.\nfunction intersect(a, b) {\n\treturn !(a.x > (b.x + b.w) ||\n\t(a.x + a.w) < b.x ||\n\ta.y > (b.y + b.h) ||\n\t(a.y + a.h) < b.y);\n}\n\nfunction displaced(a, b) {\n\treturn (a.x !== b.x ||\n\ta.y !== b.y ||\n\ta.w !== b.w ||\n\ta.h !== b.h);\n}\n","// Shape\n// CanvasShapes\n// The parent object defining a basic shape, x,y,w,h, for starters.\n// And basic operatings you might like to include on a shape\nimport createEvent from '../utils/events/createEvent';\n\nexport default class Shape {\n\n\tconstructor (...args) {\n\n\t\t// initieate  events\n\t\tthis.events = [];\n\n\t\tif (args.length) {\n\t\t\t// Store the values\n\t\t\tthis.position(...args);\n\t\t}\n\t}\n\n//\tSet property listeners\n\tget x() { return this._x;}\n\tset x(v) { if (this._x !== v) {this.dirty = true; this._x = v;}}\n\n\tget y() { return this._y;}\n\tset y(v) { if (this._y !== v) {this.dirty = true; this._y = v;}}\n\n\tget w() { return this._w;}\n\tset w(v) { if (this._w !== v) {this.dirty = true; this._w = v;}}\n\n\tget h() { return this._h;}\n\tset h(v) { if (this._h !== v) {this.dirty = true; this._h = v;}}\n\n\tget dx() { return this._dx;}\n\tset dx(v) { if (this._dx !== v) {this.dirty = true; this._dx = v;}}\n\n\tget dy() { return this._dy;}\n\tset dy(v) { if (this._dy !== v) {this.dirty = true; this._dy = v;}}\n\n\tget visible() { return (this._visible === undefined ? true : this._visible);}\n\tset visible(v) { if (this._visible !== v) {this.dirty = true; this._visible = v;}}\n\n\tget opacity() { return (this._opacity === undefined ? 1 : this._opacity);}\n\tset opacity(v) { if (this._opacity !== v) {this.dirty = true; this._opacity = v;}}\n\n\tset dirty (v) {\n\t\t// Has this just been made dirty?\n\t\tif (!this._dirty && v) {\n\t\t\t// Mark as dirty\n\t\t\tthis._dirty = v;\n\n\t\t\t// Trigger a canvas clean\n\t\t\tthis.dispatchEvent(createEvent('dirty'));\n\t\t}\n\t\telse if (!v) {\n\t\t\t// reset\n\t\t\tthis._dirty = v;\n\t\t}\n\t}\n\tget dirty () {\n\t\treturn this._dirty;\n\t}\n\n\t// Let events bubble up\n\tget pointerEvents () {\n\t\treturn (this._pointerEvents === undefined ? 1 : this._pointerEvents);\n\t}\n\tset pointerEvents (v) {\n\t\tthis._pointerEvents = v;\n\t}\n\n\tposition(x = 0, y = 0, w = 0, h = 0) {\n\n\t\tif (!this.past) {\n\t\t\t// Set past points\n\t\t\tthis.past = {};\n\t\t}\n\n\t\tthis.past.x = this.x;\n\t\tthis.past.y = this.y;\n\t\tthis.past.w = this.w;\n\t\tthis.past.h = this.h;\n\n\t\t// Assign, rectangle shape\n\t\t// Have a backup footprint\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.w = w;\n\t\tthis.h = h;\n\t}\n\n\t// Placeholder function for drawing to canvas\n\tframe() {}\n\tdraw() {}\n\tsetup() {}\n\n\t// Events\n\t// Assign Events to be fired when the user clicks this object\n\t// Awesome\n\taddEventListener(eventName, callback) {\n\t\tif (!(eventName in this.events)) {\n\t\t\tthis.events[eventName] = [];\n\t\t}\n\t\tthis.events[eventName].push(callback);\n\t}\n\n\tdispatchEvent(e) {\n\t\tif (!(e.type in this.events)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.events[e.type].forEach((fn) => fn(e));\n\t}\n\n\t// Assign getters and setters to default properties\n\t_watchProperty(propName) {\n\t\tObject.defineProperty(this, propName, {\n\t\t\tget: this._getter.bind(this, propName),\n\t\t\tset: this._setter.bind(this, propName)\n\t\t});\n\t}\n\n\t_getter(propName) {\n\t\treturn this['_' + propName];\n\t}\n\n\t_setter(propName, v) {\n\t\tif (this['_' + propName] !== v) {\n\t\t\tthis.dirty = true;\n\t\t\tthis['_' + propName] = v;\n\t\t}\n\t}\n}\n","// text\n// TextObject, defines a shape object which contains text.\n\nimport Shape from './shape';\n\nexport default class Text extends Shape {\n\n\t// Initiate a new shape object.\n\tconstructor (text) {\n\t\t// initiate inheritance\n\t\tsuper();\n\n\t\t// Watch the following properties for changes\n\t\t['text', 'shadowBlur', 'shadowColor', 'fillStyle', 'strokeStyle', 'textAlign', 'textBaseline', 'lineWidth'].forEach(this._watchProperty.bind(this));\n\n\t\t// Define text\n\t\tthis.text = text || '';\n\n\t\tthis.shadowColor = 'black';\n\t\tthis.fillStyle = 'black';\n\t\tthis.strokeStyle = 'white';\n\t\tthis.textAlign = 'left';\n\t\tthis.textBaseline = 'top';\n\t\tthis.lineWidth = 0;\n\t\tthis.align = 'left top';\n\t\tthis.fontSize = 30;\n\t}\n\n\t// Define the text and the alignment of the object\n\tcalc (canvas) {\n\n\t\t// Define text\n\t\t[this.textAlign, this.textBaseline] = this.align.split(' ');\n\n\t\tvar ctx = canvas.ctx;\n\t\tvar fontSize = this.fontSize;\n\n\t\t// Split text by line breaks\n\t\tthis.lines = this.text.toString().split('\\n');\n\n\t\t// Which is the longest line?\n\t\tvar _width = 0;\n\t\tvar default_text = this.lines[0];\n\n\t\tthis.lines.forEach((line) => {\n\t\t\tvar _w = ctx.measureText(line).width;\n\t\t\tif (_w > _width) {\n\t\t\t\t_width = _w;\n\t\t\t\tdefault_text = line;\n\t\t\t}\n\t\t});\n\n\t\t// Find the width and height of the item\n\t\t// Using the canvas context\n\t\tctx.save();\n\n\t\tctx.shadowColor = 'black';\n\t\tctx.fillStyle = 'black';\n\t\tctx.strokeStyle = 'rgba(255,255,255,0.5)';\n\t\tctx.font = 'bold ' + fontSize + 'px Arial';\n\n\t\twhile (ctx.measureText(default_text).width > canvas.width) {\n\t\t\tfontSize *= 0.9;\n\t\t\tfontSize = Math.round(fontSize);\n\t\t\tctx.font = 'bold ' + fontSize + 'px Arial';\n\t\t}\n\n\t\tthis.shadowBlur = ctx.shadowBlur = Math.round(fontSize / 10);\n\t\tthis.fontSize = fontSize;\n\t\tthis.font = ctx.font;\n\n\t\tthis.w = ctx.measureText(default_text).width + (this.shadowBlur * 2);\n\t\tthis.h = (fontSize + (this.shadowBlur * 2)) * this.lines.length;\n\n\t\tctx.restore();\n\n\t\t// Store style attributes\n\t\t// Store the new attributes of the text item\n\t\tthis.lineWidth = Math.floor(fontSize / 60);\n\n\n\t\t// HEIGHT and WIDTH\n\t\tswitch (this.textAlign) {\n\t\t\tcase 'center':\n\t\t\tcase 'middle':\n\t\t\t\tthis.textAlign = 'center';\n\t\t\t\tthis.x = (canvas.width / 2) - (this.w / 2);\n\t\t\tbreak;\n\t\t\tcase 'left':\n\t\t\t\tthis.x = 0;\n\t\t\tbreak;\n\t\t\tcase 'right':\n\t\t\t\tthis.x = canvas.width - this.w;\n\t\t\tbreak;\n\t\t}\n\n\t\tswitch (this.textBaseline) {\n\t\t\tcase 'center':\n\t\t\tcase 'middle':\n\t\t\t\tthis.textBaseline = 'middle';\n\t\t\t\tthis.y = (canvas.height / 2) - (this.h / 2);\n\t\t\tbreak;\n\t\t\tcase 'top':\n\t\t\t\tthis.y = 0;\n\t\t\tbreak;\n\t\t\tcase 'bottom':\n\t\t\t\tthis.y = canvas.height - this.h;\n\t\t\tbreak;\n\t\t}\n\n\t\tthis.textAlign = 'left';\n\t\tthis.textBaseline = 'top';\n\n\t\tctx.restore();\n\t}\n\n\t// Draw\n\tdraw (ctx) {\n\n\t\tctx.save();\n\n\t\tctx.globalAlpha = this.opacity;\n\n\t\tctx.shadowColor = this.shadowColor;\n\t\tif (this.shadowBlur) {\n\t\t\tctx.shadowBlur = this.shadowBlur;\n\t\t}\n\t\tctx.fillStyle = this.fillStyle;\n\t\tctx.strokeStyle = this.strokeStyle;\n\t\tctx.font = this.font;\n\n\t\tctx.textAlign = this.textAlign;\n\t\tctx.textBaseline = this.textBaseline;\n\t\tctx.lineWidth = this.lineWidth;\n\n\t\tif (this.lineWidth) {\n\t\t\tctx.lineWidth = this.lineWidth;\n\t\t}\n\n\t\tthis.lines = this.text.toString().split('\\n');\n\n\t\tvar len = this.lines.length;\n\n\t\tthis.lines.forEach((item, index) => {\n\t\t\tlet y = this.y + (this.h ? (index * (this.h / len)) : 0);\n\n\t\t\tctx.fillText(item, this.x, y);\n\t\t\tif (this.strokeStyle) {\n\t\t\t\tctx.strokeText(item, this.x, y);\n\t\t\t}\n\t\t});\n\n\t\tctx.restore();\n\t}\n}\n","// mineField, Canvas annimation\n// Copyright Andrew Dodson, March 2013\n\n// Get Canvas\nimport Canvas from './classes/canvas';\nimport Collection from './classes/collection';\nimport Text from './classes/text';\nimport Background from './classes/background';\nimport extend from './utils/object/extend';\n\n\n// Create a new tile\n// Arguments handled by parent\nclass Tile {\n\n\tconstructor (...args) {\n\n\t\t// Define the position of this square\n\t\tthis.position(...args);\n\n\t\t// Mine?\n\t\t// Assign with a 1 in 5 chance\n\t\tthis.mine = Math.random() < (1 / 8);\n\n\t\t// Private mark as to whether this has been played\n\t\tthis.played = false;\n\n\t\t// Define an initial grid position for this tile.\n\t\tthis.grid = [0, 0];\n\n\t\t// Define a default fill color for tiles.\n\t\tthis.fillStyle = '#ccc';\n\n\t\t// Initial heat\n\t\tthis.heat = 0; // How many bombs are next to this?\n\t}\n\n\tposition(x, y, w, h) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.w = w;\n\t\tthis.h = h;\n\t\tthis.dirty = true;\n\t}\n\n\tsetup() {}\n\tframe() {}\n\tdraw(ctx) {\n\t\tctx.fillStyle = this.fillStyle;\n\t\tctx.fillRect(this.x, this.y, this.w, this.h);\n\t}\n\n\tget type() {return 'tile';}\n}\n\n/******************************************\n *\n *  Build Canvas Object Collection\n * * Tiles\n * * Data\n ******************************************/\nclass Stage {\n\tconstructor() {\n\nthis.options = {\n\tcontrols: true\n};\n\nthis.tiles = [],\nthis.mines = [],\nthis.flooded = 0,\nthis.boom = false,\nthis.ended = false;\n\n// Iniitate canvas\nvar canvas = new Canvas();\nthis.canvas = canvas;\n\n// Iniitate collection\nvar collection = new Collection(canvas.target);\nthis.collection = collection;\n\n// Add a text Object\n// We only have one text Object on the screen at a time, lets reuse it.\n\nvar\ttitle = new Text();\ntitle.text = 'MineField';\ntitle.align = 'center center';\ntitle.fontSize = 150;\ntitle.zIndex = 1;\ntitle.calc(canvas);\ntitle.pointerEvents = false;\nthis.title = title;\n\nvar\tinfo = new Text();\ninfo.text = 'Tap  to  start';\ninfo.align = 'center center';\ninfo.fontSize = 40;\ninfo.zIndex = 1;\ninfo.calc(canvas);\ninfo.pointerEvents = false;\ninfo.y = info.y + title.h;\nthis.info = info;\n\nvar\tcredits = new Text();\ncredits.align = 'center center';\ncredits.zIndex = 1;\ncredits.fontSize = 150;\ncredits.calc(canvas);\ncredits.pointerEvents = false;\nthis.credits = credits;\n\n/******************************************\n *  Add Events, to listen to in game play\n ******************************************/\n\ncanvas.addEventListener('mousedown', (e) => userClick.call(this, e.offsetX, e.offsetY));\ncanvas.addEventListener('touchstart', (e) => userClick.call(this, e.offsetX, e.offsetY));\ncanvas.addEventListener('resize', setup.bind(this));\ncanvas.addEventListener('frame', () => {\n\n\t// Draw items\n\tcollection.prepare();\n\n\t// Draw items\n\tcollection.draw();\n\n});\n\n\n\t}\n\tsetup(options) {\n\n\t\t// Update config\n\t\tthis.config(options);\n\n\t\t// Setup all the tiles\n\t\tsetup.call(this);\n\t}\n\tconfig(options) {\n\n\t\t// Merge the current options\n\t\textend(this.options, options);\n\n\t\t// Show Controls\n\t\tshowControls.call(this);\n\t}\n}\n\n\n// Add Stage to the background\nBackground.add(Stage);\n\nfunction userClick(x, y) {\n\n\t// If we need to reset?\n\tif (this.ended) {\n\t\tsetup.call(this);\n\t\treturn;\n\t}\n\n\t// Tile Clicked\n\tvar target = this.collection.elementFromPoint(x, y);\n\n\tif (target && target.type === 'tile') {\n\t\tplay.call(this, target);\n\t}\n}\n\n\n// Setup\nfunction setup() {\n\n\tlet canvas = this.canvas;\n\tlet collection = this.collection;\n\tlet tiles = this.tiles;\n\tlet mines = this.mines;\n\n\t// Define type size\n\t// set tile default Width and height\n\tvar h, w;\n\tvar nx;\n\tvar ny;\n\n\n\tthis.mines.length = 0;\n\tthis.flooded = 0;\n\tthis.boom = false;\n\tthis.ended = false;\n\n\ttiles.length = 0;\n\tcollection.length = 0;\n\n\n\tw = h = 50;\n\n\t// set number of tiles horizontally and vertically\n\tnx = Math.floor(canvas.width / w);\n\tny = Math.floor(canvas.height / h);\n\n\tthis.nx = nx;\n\tthis.ny = ny;\n\n\t// Do the tiles not perfectly fit the space?\n\t// split the difference between the tiles, adding to the widths and heights\n\tw += Math.floor((canvas.width % (nx * w)) / nx);\n\th += Math.floor((canvas.height % (ny * h)) / ny);\n\n\t// Create tiles\n\tfor (var y = 0; y < ny; y++) {\n\t\tfor (var x = 0; x < nx; x++) {\n\n\t\t\tvar tile = new Tile(x * w, y * h, w - 1, h - 1);\n\t\t\ttile.grid = [x, y];\n\t\t\ttiles.push(tile);\n\t\t\tcollection.push(tile);\n\n\t\t\t// Upgrade the number of mines\n\t\t\tif (tile.mine) {\n\t\t\t\tmines.push(tile);\n\t\t\t}\n\t\t}\n\t}\n\n\tlet credits = this.credits;\n\tlet info = this.info;\n\tlet title = this.title;\n\n\t// Flood its neighbouring tiles on start\n\tcollection.push(title);\n\tcollection.push(credits);\n\tcollection.push(info);\n\n\t// Show Controls?\n\tshowControls.call(this);\n\n\tcredits.visible = false;\n\n\t// Sort the collection by z-index this ensures everything is drawn in the right order\n\tcollection.sort();\n}\n\nfunction play(tile) {\n\n\tlet mines = this.mines;\n\tlet tiles = this.tiles;\n\tlet credits = this.credits;\n\tlet info = this.info;\n\tlet title = this.title;\n\n\tif (!tile) {\n\t\treturn true;\n\t}\n\n\t// If this is the first time the game has been played,\n\t// flooded will equal 0\n\tif (this.flooded === 0) {\n\t\t// Ensure this is not a mine\n\t\ttile.mine = false;\n\t}\n\n\t// Is it a mine\n\tif (tile.mine) {\n\t\tthis.boom = true;\n\t}\n\t// Check to see it this tile has been exposed before?\n\telse if (!tile.played) {\n\t\t// Trigger Flooding\n\t\tflood.call(this, tile);\n\t}\n\n\tif (((this.flooded + mines.length) === tiles.length) || this.boom) {\n\n\t\t// Show all the mines\n\t\tmines.forEach((mine) => markTile.call(this, mine));\n\n\t\t// Mark as ended\n\t\tthis.ended = true;\n\n\t\t// Update Text\n\t\tcredits.text = this.boom ? 'BOOM!' : 'Kudos!';\n\t\tcredits.calc(this.canvas);\n\t\tinfo.text = 'Tap to restart';\n\n\t\t// Show controls\n\t\tshowControls.call(this);\n\t}\n\telse {\n\t\ttitle.visible = false;\n\t\tinfo.visible = false;\n\t\tcredits.visible = false;\n\t}\n\n}\n\n// Flood this tile with the new colour and its neighbours with the same colour\nfunction flood(tile) {\n\n\tlet nx = this.nx;\n\tlet ny = this.ny;\n\tlet tiles = this.tiles;\n\n\tvar [x, y] = tile.grid;\n\n\tif (tile.played) {\n\t\treturn;\n\t}\n\n\t// Add to Counter\n\tthis.flooded++;\n\n\t// find all tiles around this one.\n\t// Filter the array so we only have unique values\n\tvar edgeTiles = [\n\t((Math.max(y - 1, 0) * nx) + Math.max(x - 1, 0))\n\t, ((Math.max(y - 1, 0) * nx) + x)\n\t, ((Math.max(y - 1, 0) * nx) + Math.min(x + 1, nx - 1))\n\t, ((y * nx) + Math.min(x + 1, nx - 1))\n\t, (((Math.min(y + 1, ny - 1)) * nx) + Math.min(x + 1, nx - 1))\n\t, (((Math.min(y + 1, ny - 1)) * nx) + x)\n\t, (((Math.min(y + 1, ny - 1)) * nx) + Math.max(x - 1, 0))\n\t, ((y * nx) + Math.max(x - 1, 0))\n\t]\n\t.filter((key, index, arr) => {return arr.indexOf(key) === index && tiles[key];})\n\t.map((key) => {return tiles[key];});\n\n\t// Any bombs nearby?\n\t// Find the `heat` of the current node\n\t// Loop through all the tiles surrouding this point\n\tedgeTiles\n\t.forEach((_tile) => {tile.heat += +_tile.mine;});\n\n\t// Set the tile mode to played\n\ttile.played = true;\n\n\t// Change tile appearance\n\tmarkTile.call(this, tile);\n\n\t// If this tile is the one selected,\n\t// And has no heat, then recurse through all neighbours and flood them no heat\n\tif (tile.heat === 0) {\n\t\tedgeTiles.forEach(flood.bind(this));\n\t}\n}\n\n\nfunction markTile(tile) {\n\t// Style\n\ttile.fillStyle = tile.mine ? 'red' : 'rgba(0,0,0,0.1)';\n\n\t// Mark as dirty\n\ttile.dirty = true;\n\n\t// Can't make this visible\n\tif (tile.heat) {\n\n\t\t// Create text\n\t\tvar text = new Text();\n\t\ttext.text = tile.heat;\n\t\ttext.textBaseline = 'middle';\n\t\ttext.textAlign = 'center';\n\t\ttext.strokeStyle = null;\n\t\ttext.fillStyle = 'black';\n\t\ttext.font = 'bold 30px Arial';\n\t\ttext.x = tile.x + (tile.w / 2);\n\t\ttext.y = tile.y + (tile.h / 2);\n\t\ttext.w = 0;\n\t\ttext.h = 0;\n\n\t\tthis.collection.push(text);\n\t\tthis.collection.sort();\n\t}\n}\n\nfunction showControls() {\n\tlet showControls = this.options.controls;\n\tlet inProgress = !(this.flooded === 0 || this.boom || this.ended);\n\n\t// Show some controls only between game plays?\n\tthis.title.visible = this.flooded === 0 && !this.ended && showControls;\n\tthis.info.visible = !inProgress && showControls;\n\tthis.credits.visible = this.ended && showControls;\n}\n","export default (e) => {\n\te.stopPropagation = () => {};\n\te.preventDefault = () => {};\n\treturn e;\n};\n","// IE does not support `new Event()`\n// See https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events for details\nlet createEvent = (eventname) => {return new Event(eventname);};\ntry {\n\tcreateEvent('test');\n}\ncatch (e) {\n\tcreateEvent = (eventname) => {\n\t\tlet e = document.createEvent('Event');\n\t\te.initEvent(eventname, true, true);\n\t\treturn e;\n\t};\n}\n\nexport default createEvent;\n","// Create a queuing function\n// Queues items in an Array like function until a handler has been defined\n// Then each item will be processed against the handler.\n// Useful for creating Global Asynchronous Queues, as can be retro fitted to existing arrays.\n\nexport default class Queue {\n\n\tconstructor (arr, handler) {\n\t\tthis.items = (Array.isArray(arr) ? arr : []);\n\t\tthis.handler = handler;\n\t}\n\n\t// Mimic the Array.push function\n\tpush (...args) {\n\n\t\t// Append items to the internal array.\n\t\targs.forEach((item) => this.items.push(item));\n\n\t\t// Trigger the custom handler\n\t\tif (this._handler) {\n\t\t\targs.forEach((item) => this._handler(item));\n\t\t}\n\t}\n\n\t// Mimic the length\n\tget length () {\n\t\treturn this.items.length;\n\t}\n\tset length (value) {\n\t\treturn this.items.length = value;\n\t}\n\n\t// Set the item handler\n\tget handler () {\n\t\treturn this._handler;\n\t}\n\n\tset handler (callback) {\n\n\t\tthis._handler = callback;\n\n\t\tif (this._handler) {\n\t\t\tthis.items.forEach((item) => this._handler(item));\n\t\t}\n\t}\n}\n","import instanceOf from './instanceOf.js';\n\nexport default function extend(r, ...args) {\n\targs.forEach((o) => {\n\t\tif (instanceOf(r, Object) && instanceOf(o, Object) && r !== o) {\n\t\t\tfor (let x in o) {\n\t\t\t\tr[x] = extend(r[x], o[x]);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tr = o;\n\t\t}\n\t});\n\treturn r;\n}\n","export default (test, root) => {\n\treturn root && test instanceof root;\n};\n","// requestAnimationFrame polyfill\nwindow.requestAnimationFrame =\n\twindow.requestAnimationFrame ||\n\twindow.webkitRequestAnimationFrame ||\n\twindow.mozRequestAnimationFrame ||\n\twindow.oRequestAnimationFrame ||\n\twindow.msRequestAnimationFrame ||\n\tfunction (callback) {\n\t\tsetTimeout(callback, 1000 / 60);\n\t};\n\nexport default window.requestAnimationFrame.bind(window);\n"]}