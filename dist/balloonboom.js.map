{"version":3,"sources":["dist/node_modules/browser-pack/_prelude.js","dist/node_modules/tricks/array/toArray.js","dist/node_modules/tricks/dom/each.js","dist/node_modules/tricks/dom/isDom.js","dist/node_modules/tricks/events/createDummyEvent.js","dist/node_modules/tricks/events/createEvent.js","dist/node_modules/tricks/events/on.js","dist/node_modules/tricks/object/instanceOf.js","dist/node_modules/tricks/support/requestAnimationFrame.js","dist/src/balloonboom.js","dist/src/classes/canvas.js","dist/src/classes/collection.js"],"names":[],"mappings":"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","file":"balloonboom.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","module.exports = obj => Array.prototype.slice.call(obj);\n","const isDom = require('./isDom.js');\nconst instanceOf = require('../object/instanceOf.js');\nconst toArray = require('../array/toArray.js');\n\nmodule.exports = (matches, callback = () => {}) => {\n\n\tif (isDom(matches)) {\n\t\tmatches = [matches];\n\t}\n\telse if (typeof(matches) === 'string') {\n\t\tmatches = document.querySelectorAll(matches);\n\t}\n\n\tif (!instanceOf(matches, Array)) {\n\t\tmatches = toArray(matches);\n\t}\n\n\tif (callback) {\n\t\tmatches.forEach(callback);\n\t}\n\n\treturn matches;\n};\n","const instanceOf = require('../object/instanceOf.js');\n\nconst _HTMLElement = typeof HTMLElement !== 'undefined' ? HTMLElement : Element;\nconst _HTMLDocument = typeof HTMLDocument !== 'undefined' ? HTMLDocument : Document;\nconst _Window = window.constructor;\n\nmodule.exports = test =>\n\tinstanceOf(test, _HTMLElement) ||\n\t\tinstanceOf(test, _HTMLDocument) ||\n\t\tinstanceOf(test, _Window)\n;\n","module.exports = e => {\n\te.stopPropagation = () => {};\n\te.preventDefault = () => {};\n\treturn e;\n};\n","// IE does not support `new Event()`\n// See https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events for details\nconst dict = {bubbles: true, cancelable: true};\n\nlet createEvent = (eventname, options = dict) =>\n\tnew Event(eventname, options);\n\ntry {\n\tcreateEvent('test');\n}\ncatch (e) {\n\tcreateEvent = (eventname, options = dict) => {\n\t\tconst e = document.createEvent('Event');\n\t\te.initEvent(eventname, !!options.bubbles, !!options.cancelable);\n\t\treturn e;\n\t};\n}\n\nmodule.exports = createEvent;\n","// on.js\n// Listen to events, this is a wrapper for addEventListener\n\nconst each = require('../dom/each.js');\nconst SEPERATOR = /[\\s\\,]+/;\n\n// See https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md#feature-detection\nlet supportsPassive = false;\ntry {\n\tconst opts = Object.defineProperty({}, 'passive', {\n\t\tget() {\n\t\t\tsupportsPassive = true;\n\t\t}\n\t});\n\twindow.addEventListener('test', null, opts);\n}\ncatch (e) {\n\t// Continue\n}\n\n\nmodule.exports = (elements, eventnames, callback, options = false) => {\n\n\tif (typeof options === 'object' && options.passive && !supportsPassive) {\n\t\t// Override the passive mark\n\t\toptions = false;\n\t}\n\n\teventnames = eventnames.split(SEPERATOR);\n\treturn each(elements, el => eventnames.forEach(eventname => el.addEventListener(eventname, callback, options)));\n};\n","module.exports = (test, root) => root && test instanceof root;\n","// requestAnimationFrame polyfill\nwindow.requestAnimationFrame =\n\twindow.requestAnimationFrame ||\n\twindow.webkitRequestAnimationFrame ||\n\twindow.mozRequestAnimationFrame ||\n\twindow.oRequestAnimationFrame ||\n\twindow.msRequestAnimationFrame ||\n\t(callback => setTimeout(callback, 1000 / 60));\n\nmodule.exports = window.requestAnimationFrame.bind(window);\n","// TiledOfLife, Canvas annimation\n// Copyright Andrew Dodson, March 2013\n\n// Get Canvas\nimport Canvas from './classes/canvas';\nimport Collection from './classes/collection';\n\nconst MATH_PI2 = 2 * Math.PI;\n\nconst sprites = [];\n\n// Create a new tile\nclass Balloon {\n\n\tconstructor(cx, cy, r) {\n\n\t\tthis.cx = cx;\n\t\tthis.cy = cy;\n\t\tthis.r = r;\n\n\t\tthis.fillStyle = 'black';\n\n\t\tthis.calc();\n\t}\n\n\tcalc() {\n\t\tconst r = this.r;\n\t\tthis.x = this.cx - r;\n\t\tthis.y = this.cy - r;\n\t\tthis.w = r * 2;\n\t\tthis.h = r * 2;\n\t}\n\n\tdraw(ctx) {\n\n\t\tif (this.r <= 0) {\n\t\t\tthis.r = 0;\n\t\t\treturn;\n\t\t}\n\n\t\t// Does this exist as a sprite?\n\t\tconst key = this.fillStyle + this.r;\n\t\tif (!(key in sprites)) {\n\t\t\tconst _canvas = document.createElement('canvas');\n\t\t\t_canvas.width = Math.ceil(this.w) + 2;\n\t\t\t_canvas.height = Math.ceil(this.h) + 2;\n\t\t\tconst _ctx = _canvas.getContext('2d');\n\t\t\t_ctx.fillStyle = this.fillStyle;\n\t\t\t_ctx.beginPath();\n\t\t\t_ctx.arc(this.r + 1, this.r + 1, this.r, 0, MATH_PI2, false);\n\t\t\t_ctx.fill();\n\n\t\t\tsprites[key] = _canvas;\n\t\t}\n\n\t\tctx.drawImage(sprites[key], this.x - 1, this.y - 1);\n\t}\n\n\tframe() {\n\n\t\t// Is this expanding or shrinking?\n\t\tif (this.r >= max_radius) {\n\t\t\t// reset the radius\n\t\t\tthis.r = 0;\n\n\t\t\t// Swap the color\n\t\t\tthis.fillStyle = toggle(this.fillStyle, 'white', 'black');\n\t\t}\n\n\t\tthis.r += (max_radius / 200);\n\t\tthis.calc();\n\t\tthis.dirty = true;\n\t}\n}\n\n\nfunction toggle(value, ...args) {\n\tconst index = args.indexOf(value);\n\tlet next = args[index + 1];\n\tif (next === undefined) {\n\t\tnext = args[0];\n\t}\n\treturn next;\n}\n\n\nconst canvas = new Canvas();\nconst collection = new Collection(canvas.target);\ncanvas.addEventListener('resize', setup);\ncanvas.addEventListener('frame', () => {\n\n\t// // Clear canvas\n\t// canvas.ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n\t// Draw items\n\tcollection.draw();\n});\n\n// draw variant background\n\nconst balloons = [];\nlet max_radius;\n\nsetup();\n\nfunction setup() {\n\n\t// There are 100 balloons\n\tconst n = 1000;\n\n\t// To fill the rectangular screen area\n\tconst W = canvas.width;\n\tconst H = canvas.height;\n\tconst A = H * W;\n\n\t// Each would have to fill an area about.\n\tconst a = A / n;\n\n\t// And since they must fill a square we can sqrt to find width and height of the balloons\n\tlet w = Math.sqrt(a);\n\tlet h = w;\n\n\t// Find the number that would be needed to fill the axis\n\tconst nx = Math.floor(W / w) || 1;\n\tconst ny = Math.floor(H / h) || 1;\n\n\t// Adjust the width and height to uniformly spread them out\n\tw = W / nx;\n\th = H / ny;\n\n\t// Capture max-radius\n\tlet r = Math.max(w, h) / 2;\n\tmax_radius = r * 1.5;\n\n\tfor (let i = 0; i < nx; i++) {\n\t\tr = (((i + 1) / nx) * w) / 2;\n\t\tfor (let j = 0; j < ny; j++) {\n\n\t\t\tconst cx = parseInt((i * w) + (w / 2), 10);\n\t\t\tconst cy = parseInt((j * h) + (h / 2), 10);\n\n\t\t\tlet balloon = balloons[((i * ny) + j)];\n\n\t\t\t// %100\n\n\t\t\tif (!balloon) {\n\t\t\t\tballoon = new Balloon(cx, cy, r);\n\t\t\t\tcollection.push(balloon);\n\t\t\t\tballoons.push(balloon);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Insert into a collection\n\t\t\t\tcollection.push(balloon);\n\n\t\t\t\t// Update its position\n\t\t\t\tballoon.cx = cx;\n\t\t\t\tballoon.cy = cy;\n\t\t\t\tballoon.r = r;\n\t\t\t\tballoon.fillStyle = null;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Crop the collection array to nx * ny\n\tcollection.length = (nx * ny);\n}\n","// Setup\n// This constructs the canvas object\n\n// Includes\nimport 'tricks/support/requestAnimationFrame';\nimport createEvent from 'tricks/events/createEvent';\nimport createDummyEvent from 'tricks/events/createDummyEvent';\nimport on from 'tricks/events/on';\n\n\n// Constants\nconst BACKGROUND_HASH = 'background';\nconst UserEvents = ['click', 'mousedown', 'mouseup', 'mouseover', 'mousemove', 'mouseout', 'frame', 'resize'];\nconst TouchEvents = ['touchmove', 'touchstart', 'touchend'];\n\nconst EVENT_SEPARATOR = /[\\s\\,]+/;\n\nexport default class Canvas {\n\n\t// Construct the Canvas Element\n\t// @param canvas should be an root element container for this imagery.\n\tconstructor(canvas) {\n\n\t\tlet parent;\n\n\t\t// events\n\t\tthis.events = {};\n\n\t\t// browser check\n\t\tif (!('getContext' in document.createElement('canvas'))) {\n\t\t\t// browser doesn't support canvas\n\t\t\treturn;\n\t\t}\n\n\t\tif (!(canvas && canvas instanceof HTMLCanvasElement)) {\n\n\t\t\t// Set the parent\n\t\t\tparent = canvas;\n\n\t\t\t// Create the canvas layer\n\t\t\tcanvas = document.createElement('canvas');\n\t\t\tcanvas.style.backgroundColor = 'white';\n\n\t\t\t// Not a parent\n\t\t\tif (!parent) {\n\t\t\t\t// Append to the body\n\t\t\t\tparent = document.body;\n\t\t\t\tcanvas.style.cssText = 'position:fixed;z-index:-1;top:0;left:0;';\n\t\t\t\tcanvas.setAttribute('tabindex', 0);\n\n\t\t\t\tdocument.documentElement.style.cssText = 'min-height:100%;';\n\t\t\t\tdocument.body.style.cssText = 'min-height:100%;';\n\n\t\t\t\t// Bind window resize events\n\t\t\t\twindow.addEventListener('resize', this.resize.bind(this));\n\t\t\t}\n\n\t\t\t// Append this element\n\t\t\tparent.insertBefore(canvas, parent.firstElementChild);\n\n\t\t\tthis.target = canvas;\n\n\t\t\tthis.resize();\n\t\t}\n\t\telse {\n\t\t\tthis.target = canvas;\n\t\t\tparent = canvas.parentNode;\n\t\t}\n\n\t\tthis.ctx = canvas.getContext('2d');\n\n\t\t// Set initial save point\n\t\tthis.ctx.save();\n\n\t\t// Initiate the time\n\t\tthis._time = 0;\n\t\tthis._fps = 0;\n\n\t\t// Initiate the draw\n\t\tthis.draw();\n\n\t\t// Bind events\n\t\ton(this.target, UserEvents.toString(), this.dispatchEvent.bind(this), {passive: true});\n\n\t\t// Format Touch events\n\t\ton(this.target, TouchEvents.toString(), this.dispatchTouchEvent.bind(this), {passive: true});\n\n\t\t// In IE user-events aren't propagated to elements which have negative z-Index's\n\t\t// Listen to events on the document element and propagate those accordingly\n\t\tif (parent === document.body && canvas.style.getPropertyValue('z-index') === '-1') {\n\t\t\t// Bind events\n\t\t\ton(document, UserEvents.toString(), this.dispatchEvent.bind(this), {passive: true});\n\n\t\t\t// Format Touch events\n\t\t\ton(document, TouchEvents.toString(), this.dispatchTouchEvent.bind(this), {passive: true});\n\t\t}\n\n\t\t// Listen to hashChange events\n\t\t{\n\t\t\t// HASH CHANGE DEPTH\n\t\t\tconst style = this.target.style;\n\t\t\tconst initialZ = style.getPropertyValue('z-index');\n\t\t\t// Listen to changes to the background hash to bring the canvas element to the front\n\t\t\twindow.addEventListener('hashchange', hashchange.bind(style, initialZ));\n\n\t\t\thashchange.call(style, initialZ);\n\t\t}\n\t}\n\n\t// ensure its keeping up.\n\tget width() {\n\t\treturn this.target.width;\n\t}\n\tset width(value) {\n\t\tthis.target.width = value;\n\t\treturn value;\n\t}\n\n\tget height() {\n\t\treturn this.target.height;\n\t}\n\tset height(value) {\n\t\tthis.target.height = value;\n\t\treturn value;\n\t}\n\tget fps() {\n\t\treturn this._fps;\n\t}\n\tset fps(value) {\n\n\t\tthis._fps = value;\n\n\t\tconst now = (new Date()).getTime();\n\n\t\tif ((now - this._time) > 1000) {\n\t\t\t// console.log('fps: %d', this._fps);\n\t\t\tthis._time = now;\n\t\t\tthis._fps = 0;\n\t\t}\n\t}\n\n\n\tresize() {\n\t\tconst parent = (this.target.parentNode === document.body) ? document.documentElement : this.target.parentNode;\n\t\tconst height = parent.clientHeight;\n\t\tconst width = parent.clientWidth;\n\t\tlet changed = false;\n\n\t\tif (this.width !== width) {\n\t\t\tchanged = true;\n\t\t\tthis.width = width;\n\t\t}\n\t\tif (this.height !== height) {\n\t\t\tchanged = true;\n\t\t\tthis.height = height;\n\t\t}\n\n\t\tif (changed) {\n\t\t\tthis.target.dispatchEvent(createEvent('resize'));\n\t\t}\n\t}\n\n\tclear() {\n\t\tthis.ctx.clearRect(0, 0, this.target.width, this.target.height);\n\t}\n\n\t// Bring the content of the canvas to the front\n\tbringToFront() {\n\n\t\t// Update the window.location with the hash #background\n\t\twindow.location.hash = BACKGROUND_HASH;\n\t}\n\n\t// Trigger the draw function\n\tdraw() {\n\n\t\t// Increment the number of frames\n\t\tthis.fps++;\n\n\t\t// Call the frame function in the context of the frame to draw\n\t\tthis.target.dispatchEvent(createEvent('frame'));\n\n\t\t// Request another frame\n\t\trequestAnimationFrame(this.draw.bind(this));\n\t}\n\n\t// The user has clicked an item on the page\n\taddEventListener(eventnames, handler) {\n\n\t\teventnames.split(EVENT_SEPARATOR).forEach(eventname => {\n\t\t\t// Add to the events list\n\t\t\tif (!(eventname in this.events)) {\n\t\t\t\tthis.events[eventname] = [];\n\t\t\t}\n\n\t\t\tthis.events[eventname].push(handler);\n\t\t});\n\t}\n\n\t// Dispatch\n\tdispatchEvent(e) {\n\n\t\tif (e.type in this.events) {\n\n\t\t\tconst target = e.currentTarget;\n\n\t\t\t// This was triggered using event delegation, aka in the background\n\t\t\tif (target === document) {\n\n\t\t\t\te = createDummyEvent({\n\t\t\t\t\ttype: e.type,\n\t\t\t\t\ttarget: this.target,\n\t\t\t\t\toffsetX: e.pageX || e.offsetX,\n\t\t\t\t\toffsetY: e.pageY || e.offsetY\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.events[e.type].forEach(handler => handler(e));\n\t\t\te.stopPropagation();\n\t\t}\n\t}\n\n\t// Dispatch\n\tdispatchTouchEvent(e) {\n\t\t// If this was a touch event\n\t\t// Determine the offset to the canvas element relative to the item being clicked\n\t\tconst touch = (e.touches || e.changedTouches)[0];\n\t\tif (touch) {\n\t\t\te.offsetX = Math.abs(touch.pageX || touch.screenX);\n\t\t\te.offsetY = Math.abs(touch.pageY || touch.screenY);\n\t\t}\n\n\t\tthis.dispatchEvent(e);\n\t}\n}\n\n\nfunction hashchange(z) {\n\n\tconst zIndex = 'z-index';\n\n\tif (window.location.hash === `#${ BACKGROUND_HASH}`) {\n\t\tz = 10000;\n\t}\n\n\tif (z !== undefined) {\n\t\t// Set the z-Index\n\t\tthis.setProperty(zIndex, z);\n\t}\n\telse {\n\t\t// Remove the z-Index\n\t\tthis.removeProperty(zIndex);\n\t}\n}\n","// Collection\n\nimport on from 'tricks/events/on';\nconst UserEvents = ['click', 'mousedown', 'mouseup', 'mouseover', 'mousemove', 'mouseout', 'touchmove', 'touchstart', 'touchend', 'frame'];\n\nexport default class Collection {\n\n\tconstructor(target) {\n\t\t// Create an empty children\n\t\tthis.children = [];\n\n\t\t// Events\n\t\tthis.events = [];\n\n\t\t// setup the canvas element\n\t\tthis.init(target);\n\t}\n\n\t// listen to canvas events\n\tinit (target) {\n\n\t\t// Define the canvas object as the target for the collection\n\t\tthis.target = target;\n\n\t\t// Define the CTX\n\t\tthis.ctx = target.getContext('2d');\n\n\t\t// listen to user interactive events and trigger those on items\n\t\ton(target, UserEvents.toString(), this._findAndDispatch.bind(this), {passive: true});\n\n\t}\n\n\tpush(item) {\n\t\titem.dirty = true;\n\n\t\t// Is this item already in the collection?\n\t\tif (this.children.indexOf(item) === -1) {\n\t\t\tif (item.setup) {\n\t\t\t\titem.setup(this);\n\t\t\t}\n\n\t\t\t// item.addEventListener('dirty', this.prepareChild.bind(this, item));\n\t\t\tthis.children.push(item);\n\t\t}\n\t}\n\n\tget length () {\n\t\treturn this.children.length;\n\t}\n\tset length (v) {\n\t\treturn this.children.length = v;\n\t}\n\n\n\t// Touch\n\t// Mark items and objects in the same space to be redrawn\n\tprepare() {\n\t\tthis.children.forEach(item => {\n\t\t\tif (item.dirty === true)\n\t\t\t\tthis.prepareChild(item);\n\t\t});\n\t}\n\n\t// Clean Item\n\tprepareChild(item) {\n\n\t\tconst ctx = this.ctx;\n\n\t\tif (item.dirty === 'pending') {\n\t\t\treturn;\n\t\t}\n\n\t\t// Mark this item as dirty\n\t\titem.dirty = 'pending';\n\n\t\t// Remove from Canvas\n\t\tctx.clearRect(item.x, item.y, item.w, item.h);\n\n\t\t// If the items old position is different\n\t\tif (item.past && displaced(item.past, item)) {\n\t\t\tctx.clearRect(item.past.x, item.past.y, item.past.w, item.past.h);\n\t\t}\n\n\t\t// Loop though objects and redraw those that exist within the position\n\t\tthis.children.forEach(this._prepareSiblings.bind(this, item));\n\t}\n\n\t_prepareSiblings(item, sibling) {\n\n\t\t// Does this Object overlap with the focused object?\n\t\tif (!sibling.dirty && sibling.visible !== false && (intersect(sibling, item) || (item.past ? intersect(sibling, item.past) : false))) {\n\t\t\t// Nested clean\n\t\t\tthis.prepareChild(sibling);\n\t\t}\n\t}\n\n\tsort() {\n\t\t// Sort items by z-index\n\t\tthis.children.sort((a, b) => {\n\t\t\ta = a.zIndex || 0;\n\t\t\tb = b.zIndex || 0;\n\t\t\treturn +(a > b) || -(a < b);\n\t\t});\n\t}\n\n\t// Trigger the draw function\n\tdraw() {\n\n\t\tconst ctx = this.ctx;\n\n\t\t// Find items that have changed\n\t\t// Remove background\n\t\tthis.children.forEach(item => {\n\n\t\t\tif (item.frame) {\n\t\t\t\titem.frame(ctx);\n\t\t\t}\n\n\t\t\tif (item.dirty && item.visible !== false) {\n\t\t\t\titem.draw(ctx);\n\t\t\t}\n\n\t\t\titem.dirty = false;\n\t\t});\n\t}\n\n\telementFromPoint(x, y) {\n\n\t\tlet target;\n\n\t\t// Find the canvas item which this targets?\n\t\tconst obj = {\n\t\t\tx,\n\t\t\ty,\n\t\t\tw: 1,\n\t\t\th: 1\n\t\t};\n\n\t\tthis.children.forEach(item => {\n\n\t\t\tif (item.visible === false || !item.w || !item.h || item.pointerEvents === false) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Is this a target?\n\t\t\tif (intersect(obj, item)) {\n\t\t\t\t// Define this as a target\n\t\t\t\ttarget = item;\n\t\t\t}\n\t\t});\n\n\t\treturn target;\n\t}\n\n\t// The user has clicked an item on the page\n\taddEventListener(eventname, handler) {\n\n\t\t// Add to the events list\n\t\tif (!(eventname in this.events)) {\n\t\t\tthis.events[eventname] = [];\n\t\t}\n\n\t\tthis.events[eventname].push(handler);\n\t}\n\n\t// Dispatch\n\tdispatchEvent(e) {\n\t\tif (e.type in this.events)\n\t\t\tthis.events[e.type].forEach(handler => handler(e));\n\t}\n\n\t// Find and _dispatch\n\t_findAndDispatch(e) {\n\t\t// If this is not a pointerEvent lets just pass it through.\n\t\tif ((typeof MouseEvent !== 'undefined' && e instanceof MouseEvent) ||\n\t\t\t(typeof TouchEvent !== 'undefined' && e instanceof TouchEvent)) {\n\n\t\t\t// Find the canvas item which this targets?\n\t\t\tconst obj = {\n\t\t\t\tx: e.offsetX,\n\t\t\t\ty: e.offsetY,\n\t\t\t\tw: 1,\n\t\t\t\th: 1\n\t\t\t};\n\n\t\t\tthis.children.forEach(item => {\n\n\t\t\t\tif (!item.visible || !item.w || !item.h || !item.pointerEvents) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Intersects?\n\t\t\t\tintersect(obj, item) && item.dispatchEvent(e);\n\t\t\t});\n\t\t}\n\t}\n}\n\n\n// Intersect\n// Given two objects with, x,y,w,h properties\n// Do their rectangular dimensions intersect?\n// return Boolean true false.\nfunction intersect(a, b) {\n\treturn !(a.x > (b.x + b.w) ||\n\t(a.x + a.w) < b.x ||\n\ta.y > (b.y + b.h) ||\n\t(a.y + a.h) < b.y);\n}\n\nfunction displaced(a, b) {\n\treturn (a.x !== b.x ||\n\ta.y !== b.y ||\n\ta.w !== b.w ||\n\ta.h !== b.h);\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvdHJpY2tzL2FycmF5L3RvQXJyYXkuanMiLCJub2RlX21vZHVsZXMvdHJpY2tzL2RvbS9lYWNoLmpzIiwibm9kZV9tb2R1bGVzL3RyaWNrcy9kb20vaXNEb20uanMiLCJub2RlX21vZHVsZXMvdHJpY2tzL2V2ZW50cy9jcmVhdGVEdW1teUV2ZW50LmpzIiwibm9kZV9tb2R1bGVzL3RyaWNrcy9ldmVudHMvY3JlYXRlRXZlbnQuanMiLCJub2RlX21vZHVsZXMvdHJpY2tzL2V2ZW50cy9vbi5qcyIsIm5vZGVfbW9kdWxlcy90cmlja3Mvb2JqZWN0L2luc3RhbmNlT2YuanMiLCJub2RlX21vZHVsZXMvdHJpY2tzL3N1cHBvcnQvcmVxdWVzdEFuaW1hdGlvbkZyYW1lLmpzIiwic3JjL2JhbGxvb25ib29tLmpzIiwic3JjL2NsYXNzZXMvY2FudmFzLmpzIiwic3JjL2NsYXNzZXMvY29sbGVjdGlvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsT0FBTyxPQUFQLEdBQWlCO0FBQUEsU0FBTyxNQUFNLFNBQU4sQ0FBZ0IsS0FBaEIsQ0FBc0IsSUFBdEIsQ0FBMkIsR0FBM0IsQ0FBUDtBQUFBLENBQWpCOzs7OztBQ0FBLElBQU0sUUFBUSxRQUFRLFlBQVIsQ0FBZDtBQUNBLElBQU0sYUFBYSxRQUFRLHlCQUFSLENBQW5CO0FBQ0EsSUFBTSxVQUFVLFFBQVEscUJBQVIsQ0FBaEI7O0FBRUEsT0FBTyxPQUFQLEdBQWlCLFVBQUMsT0FBRCxFQUFrQztBQUFBLEtBQXhCLFFBQXdCLHVFQUFiLFlBQU0sQ0FBRSxDQUFLOzs7QUFFbEQsS0FBSSxNQUFNLE9BQU4sQ0FBSixFQUFvQjtBQUNuQixZQUFVLENBQUMsT0FBRCxDQUFWO0FBQ0EsRUFGRCxNQUdLLElBQUksT0FBTyxPQUFQLEtBQW9CLFFBQXhCLEVBQWtDO0FBQ3RDLFlBQVUsU0FBUyxnQkFBVCxD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bnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJtb2R1bGUuZXhwb3J0cyA9IG9iaiA9PiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChvYmopO1xuIiwiY29uc3QgaXNEb20gPSByZXF1aXJlKCcuL2lzRG9tLmpzJyk7XG5jb25zdCBpbnN0YW5jZU9mID0gcmVxdWlyZSgnLi4vb2JqZWN0L2luc3RhbmNlT2YuanMnKTtcbmNvbnN0IHRvQXJyYXkgPSByZXF1aXJlKCcuLi9hcnJheS90b0FycmF5LmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKG1hdGNoZXMsIGNhbGxiYWNrID0gKCkgPT4ge30pID0+IHtcblxuXHRpZiAoaXNEb20obWF0Y2hlcykpIHtcblx0XHRtYXRjaGVzID0gW21hdGNoZXNdO1xuXHR9XG5cdGVsc2UgaWYgKHR5cGVvZihtYXRjaGVzKSA9PT0gJ3N0cmluZycpIHtcblx0XHRtYXRjaGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChtYXRjaGVzKTtcblx0fVxuXG5cdGlmICghaW5zdGFuY2VPZihtYXRjaGVzLCBBcnJheSkpIHtcblx0XHRtYXRjaGVzID0gdG9BcnJheShtYXRjaGVzKTtcblx0fVxuXG5cdGlmIChjYWxsYmFjaykge1xuXHRcdG1hdGNoZXMuZm9yRWFjaChjYWxsYmFjayk7XG5cdH1cblxuXHRyZXR1cm4gbWF0Y2hlcztcbn07XG4iLCJjb25zdCBpbnN0YW5jZU9mID0gcmVxdWlyZSgnLi4vb2JqZWN0L2luc3RhbmNlT2YuanMnKTtcblxuY29uc3QgX0hUTUxFbGVtZW50ID0gdHlwZW9mIEhUTUxFbGVtZW50ICE9PSAndW5kZWZpbmVkJyA/IEhUTUxFbGVtZW50IDogRWxlbWVudDtcbmNvbnN0IF9IVE1MRG9jdW1lbnQgPSB0eXBlb2YgSFRNTERvY3VtZW50ICE9PSAndW5kZWZpbmVkJyA/IEhUTUxEb2N1bWVudCA6IERvY3VtZW50O1xuY29uc3QgX1dpbmRvdyA9IHdpbmRvdy5jb25zdHJ1Y3RvcjtcblxubW9kdWxlLmV4cG9ydHMgPSB0ZXN0ID0+XG5cdGluc3RhbmNlT2YodGVzdCwgX0hUTUxFbGVtZW50KSB8fFxuXHRcdGluc3RhbmNlT2YodGVzdCwgX0hUTUxEb2N1bWVudCkgfHxcblx0XHRpbnN0YW5jZU9mKHRlc3QsIF9XaW5kb3cpXG47XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGUgPT4ge1xuXHRlLnN0b3BQcm9wYWdhdGlvbiA9ICgpID0+IHt9O1xuXHRlLnByZXZlbnREZWZhdWx0ID0gKCkgPT4ge307XG5cdHJldHVybiBlO1xufTtcbiIsIi8vIElFIGRvZXMgbm90IHN1cHBvcnQgYG5ldyBFdmVudCgpYFxuLy8gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0d1aWRlL0V2ZW50cy9DcmVhdGluZ19hbmRfdHJpZ2dlcmluZ19ldmVudHMgZm9yIGRldGFpbHNcbmNvbnN0IGRpY3QgPSB7YnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogdHJ1ZX07XG5cbmxldCBjcmVhdGVFdmVudCA9IChldmVudG5hbWUsIG9wdGlvbnMgPSBkaWN0KSA9PlxuXHRuZXcgRXZlbnQoZXZlbnRuYW1lLCBvcHRpb25zKTtcblxudHJ5IHtcblx0Y3JlYXRlRXZlbnQoJ3Rlc3QnKTtcbn1cbmNhdGNoIChlKSB7XG5cdGNyZWF0ZUV2ZW50ID0gKGV2ZW50bmFtZSwgb3B0aW9ucyA9IGRpY3QpID0+IHtcblx0XHRjb25zdCBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG5cdFx0ZS5pbml0RXZlbnQoZXZlbnRuYW1lLCAhIW9wdGlvbnMuYnViYmxlcywgISFvcHRpb25zLmNhbmNlbGFibGUpO1xuXHRcdHJldHVybiBlO1xuXHR9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZUV2ZW50O1xuIiwiLy8gb24uanNcbi8vIExpc3RlbiB0byBldmVudHMsIHRoaXMgaXMgYSB3cmFwcGVyIGZvciBhZGRFdmVudExpc3RlbmVyXG5cbmNvbnN0IGVhY2ggPSByZXF1aXJlKCcuLi9kb20vZWFjaC5qcycpO1xuY29uc3QgU0VQRVJBVE9SID0gL1tcXHNcXCxdKy87XG5cbi8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vV0lDRy9FdmVudExpc3RlbmVyT3B0aW9ucy9ibG9iL2doLXBhZ2VzL2V4cGxhaW5lci5tZCNmZWF0dXJlLWRldGVjdGlvblxubGV0IHN1cHBvcnRzUGFzc2l2ZSA9IGZhbHNlO1xudHJ5IHtcblx0Y29uc3Qgb3B0cyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ3Bhc3NpdmUnLCB7XG5cdFx0Z2V0KCkge1xuXHRcdFx0c3VwcG9ydHNQYXNzaXZlID0gdHJ1ZTtcblx0XHR9XG5cdH0pO1xuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGVzdCcsIG51bGwsIG9wdHMpO1xufVxuY2F0Y2ggKGUpIHtcblx0Ly8gQ29udGludWVcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IChlbGVtZW50cywgZXZlbnRuYW1lcywgY2FsbGJhY2ssIG9wdGlvbnMgPSBmYWxzZSkgPT4ge1xuXG5cdGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ29iamVjdCcgJiYgb3B0aW9ucy5wYXNzaXZlICYmICFzdXBwb3J0c1Bhc3NpdmUpIHtcblx0XHQvLyBPdmVycmlkZSB0aGUgcGFzc2l2ZSBtYXJrXG5cdFx0b3B0aW9ucyA9IGZhbHNlO1xuXHR9XG5cblx0ZXZlbnRuYW1lcyA9IGV2ZW50bmFtZXMuc3BsaXQoU0VQRVJBVE9SKTtcblx0cmV0dXJuIGVhY2goZWxlbWVudHMsIGVsID0+IGV2ZW50bmFtZXMuZm9yRWFjaChldmVudG5hbWUgPT4gZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudG5hbWUsIGNhbGxiYWNrLCBvcHRpb25zKSkpO1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gKHRlc3QsIHJvb3QpID0+IHJvb3QgJiYgdGVzdCBpbnN0YW5jZW9mIHJvb3Q7XG4iLCIvLyByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgcG9seWZpbGxcbndpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPVxuXHR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG5cdHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcblx0d2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuXHR3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuXHR3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcblx0KGNhbGxiYWNrID0+IHNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMDAgLyA2MCkpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYmluZCh3aW5kb3cpO1xuIiwiLy8gVGlsZWRPZkxpZmUsIENhbnZhcyBhbm5pbWF0aW9uXG4vLyBDb3B5cmlnaHQgQW5kcmV3IERvZHNvbiwgTWFyY2ggMjAxM1xuXG4vLyBHZXQgQ2FudmFzXG5pbXBvcnQgQ2FudmFzIGZyb20gJy4vY2xhc3Nlcy9jYW52YXMnO1xuaW1wb3J0IENvbGxlY3Rpb24gZnJvbSAnLi9jbGFzc2VzL2NvbGxlY3Rpb24nO1xuXG5jb25zdCBNQVRIX1BJMiA9IDIgKiBNYXRoLlBJO1xuXG5jb25zdCBzcHJpdGVzID0gW107XG5cbi8vIENyZWF0ZSBhIG5ldyB0aWxlXG5jbGFzcyBCYWxsb29uIHtcblxuXHRjb25zdHJ1Y3RvcihjeCwgY3ksIHIpIHtcblxuXHRcdHRoaXMuY3ggPSBjeDtcblx0XHR0aGlzLmN5ID0gY3k7XG5cdFx0dGhpcy5yID0gcjtcblxuXHRcdHRoaXMuZmlsbFN0eWxlID0gJ2JsYWNrJztcblxuXHRcdHRoaXMuY2FsYygpO1xuXHR9XG5cblx0Y2FsYygpIHtcblx0XHRjb25zdCByID0gdGhpcy5yO1xuXHRcdHRoaXMueCA9IHRoaXMuY3ggLSByO1xuXHRcdHRoaXMueSA9IHRoaXMuY3kgLSByO1xuXHRcdHRoaXMudyA9IHIgKiAyO1xuXHRcdHRoaXMuaCA9IHIgKiAyO1xuXHR9XG5cblx0ZHJhdyhjdHgpIHtcblxuXHRcdGlmICh0aGlzLnIgPD0gMCkge1xuXHRcdFx0dGhpcy5yID0gMDtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBEb2VzIHRoaXMgZXhpc3QgYXMgYSBzcHJpdGU/XG5cdFx0Y29uc3Qga2V5ID0gdGhpcy5maWxsU3R5bGUgKyB0aGlzLnI7XG5cdFx0aWYgKCEoa2V5IGluIHNwcml0ZXMpKSB7XG5cdFx0XHRjb25zdCBfY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG5cdFx0XHRfY2FudmFzLndpZHRoID0gTWF0aC5jZWlsKHRoaXMudykgKyAyO1xuXHRcdFx0X2NhbnZhcy5oZWlnaHQgPSBNYXRoLmNlaWwodGhpcy5oKSArIDI7XG5cdFx0XHRjb25zdCBfY3R4ID0gX2NhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXHRcdFx0X2N0eC5maWxsU3R5bGUgPSB0aGlzLmZpbGxTdHlsZTtcblx0XHRcdF9jdHguYmVnaW5QYXRoKCk7XG5cdFx0XHRfY3R4LmFyYyh0aGlzLnIgKyAxLCB0aGlzLnIgKyAxLCB0aGlzLnIsIDAsIE1BVEhfUEkyLCBmYWxzZSk7XG5cdFx0XHRfY3R4LmZpbGwoKTtcblxuXHRcdFx0c3ByaXRlc1trZXldID0gX2NhbnZhcztcblx0XHR9XG5cblx0XHRjdHguZHJhd0ltYWdlKHNwcml0ZXNba2V5XSwgdGhpcy54IC0gMSwgdGhpcy55IC0gMSk7XG5cdH1cblxuXHRmcmFtZSgpIHtcblxuXHRcdC8vIElzIHRoaXMgZXhwYW5kaW5nIG9yIHNocmlua2luZz9cblx0XHRpZiAodGhpcy5yID49IG1heF9yYWRpdXMpIHtcblx0XHRcdC8vIHJlc2V0IHRoZSByYWRpdXNcblx0XHRcdHRoaXMuciA9IDA7XG5cblx0XHRcdC8vIFN3YXAgdGhlIGNvbG9yXG5cdFx0XHR0aGlzLmZpbGxTdHlsZSA9IHRvZ2dsZSh0aGlzLmZpbGxTdHlsZSwgJ3doaXRlJywgJ2JsYWNrJyk7XG5cdFx0fVxuXG5cdFx0dGhpcy5yICs9IChtYXhfcmFkaXVzIC8gMjAwKTtcblx0XHR0aGlzLmNhbGMoKTtcblx0XHR0aGlzLmRpcnR5ID0gdHJ1ZTtcblx0fVxufVxuXG5cbmZ1bmN0aW9uIHRvZ2dsZSh2YWx1ZSwgLi4uYXJncykge1xuXHRjb25zdCBpbmRleCA9IGFyZ3MuaW5kZXhPZih2YWx1ZSk7XG5cdGxldCBuZXh0ID0gYXJnc1tpbmRleCArIDFdO1xuXHRpZiAobmV4dCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0bmV4dCA9IGFyZ3NbMF07XG5cdH1cblx0cmV0dXJuIG5leHQ7XG59XG5cblxuY29uc3QgY2FudmFzID0gbmV3IENhbnZhcygpO1xuY29uc3QgY29sbGVjdGlvbiA9IG5ldyBDb2xsZWN0aW9uKGNhbnZhcy50YXJnZXQpO1xuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHNldHVwKTtcbmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdmcmFtZScsICgpID0+IHtcblxuXHQvLyAvLyBDbGVhciBjYW52YXNcblx0Ly8gY2FudmFzLmN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblxuXHQvLyBEcmF3IGl0ZW1zXG5cdGNvbGxlY3Rpb24uZHJhdygpO1xufSk7XG5cbi8vIGRyYXcgdmFyaWFudCBiYWNrZ3JvdW5kXG5cbmNvbnN0IGJhbGxvb25zID0gW107XG5sZXQgbWF4X3JhZGl1cztcblxuc2V0dXAoKTtcblxuZnVuY3Rpb24gc2V0dXAoKSB7XG5cblx0Ly8gVGhlcmUgYXJlIDEwMCBiYWxsb29uc1xuXHRjb25zdCBuID0gMTAwMDtcblxuXHQvLyBUbyBmaWxsIHRoZSByZWN0YW5ndWxhciBzY3JlZW4gYXJlYVxuXHRjb25zdCBXID0gY2FudmFzLndpZHRoO1xuXHRjb25zdCBIID0gY2FudmFzLmhlaWdodDtcblx0Y29uc3QgQSA9IEggKiBXO1xuXG5cdC8vIEVhY2ggd291bGQgaGF2ZSB0byBmaWxsIGFuIGFyZWEgYWJvdXQuXG5cdGNvbnN0IGEgPSBBIC8gbjtcblxuXHQvLyBBbmQgc2luY2UgdGhleSBtdXN0IGZpbGwgYSBzcXVhcmUgd2UgY2FuIHNxcnQgdG8gZmluZCB3aWR0aCBhbmQgaGVpZ2h0IG9mIHRoZSBiYWxsb29uc1xuXHRsZXQgdyA9IE1hdGguc3FydChhKTtcblx0bGV0IGggPSB3O1xuXG5cdC8vIEZpbmQgdGhlIG51bWJlciB0aGF0IHdvdWxkIGJlIG5lZWRlZCB0byBmaWxsIHRoZSBheGlzXG5cdGNvbnN0IG54ID0gTWF0aC5mbG9vcihXIC8gdykgfHwgMTtcblx0Y29uc3QgbnkgPSBNYXRoLmZsb29yKEggLyBoKSB8fCAxO1xuXG5cdC8vIEFkanVzdCB0aGUgd2lkdGggYW5kIGhlaWdodCB0byB1bmlmb3JtbHkgc3ByZWFkIHRoZW0gb3V0XG5cdHcgPSBXIC8gbng7XG5cdGggPSBIIC8gbnk7XG5cblx0Ly8gQ2FwdHVyZSBtYXgtcmFkaXVzXG5cdGxldCByID0gTWF0aC5tYXgodywgaCkgLyAyO1xuXHRtYXhfcmFkaXVzID0gciAqIDEuNTtcblxuXHRmb3IgKGxldCBpID0gMDsgaSA8IG54OyBpKyspIHtcblx0XHRyID0gKCgoaSArIDEpIC8gbngpICogdykgLyAyO1xuXHRcdGZvciAobGV0IGogPSAwOyBqIDwgbnk7IGorKykge1xuXG5cdFx0XHRjb25zdCBjeCA9IHBhcnNlSW50KChpICogdykgKyAodyAvIDIpLCAxMCk7XG5cdFx0XHRjb25zdCBjeSA9IHBhcnNlSW50KChqICogaCkgKyAoaCAvIDIpLCAxMCk7XG5cblx0XHRcdGxldCBiYWxsb29uID0gYmFsbG9vbnNbKChpICogbnkpICsgaildO1xuXG5cdFx0XHQvLyAlMTAwXG5cblx0XHRcdGlmICghYmFsbG9vbikge1xuXHRcdFx0XHRiYWxsb29uID0gbmV3IEJhbGxvb24oY3gsIGN5LCByKTtcblx0XHRcdFx0Y29sbGVjdGlvbi5wdXNoKGJhbGxvb24pO1xuXHRcdFx0XHRiYWxsb29ucy5wdXNoKGJhbGxvb24pO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdC8vIEluc2VydCBpbnRvIGEgY29sbGVjdGlvblxuXHRcdFx0XHRjb2xsZWN0aW9uLnB1c2goYmFsbG9vbik7XG5cblx0XHRcdFx0Ly8gVXBkYXRlIGl0cyBwb3NpdGlvblxuXHRcdFx0XHRiYWxsb29uLmN4ID0gY3g7XG5cdFx0XHRcdGJhbGxvb24uY3kgPSBjeTtcblx0XHRcdFx0YmFsbG9vbi5yID0gcjtcblx0XHRcdFx0YmFsbG9vbi5maWxsU3R5bGUgPSBudWxsO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIENyb3AgdGhlIGNvbGxlY3Rpb24gYXJyYXkgdG8gbnggKiBueVxuXHRjb2xsZWN0aW9uLmxlbmd0aCA9IChueCAqIG55KTtcbn1cbiIsIi8vIFNldHVwXG4vLyBUaGlzIGNvbnN0cnVjdHMgdGhlIGNhbnZhcyBvYmplY3RcblxuLy8gSW5jbHVkZXNcbmltcG9ydCAndHJpY2tzL3N1cHBvcnQvcmVxdWVzdEFuaW1hdGlvbkZyYW1lJztcbmltcG9ydCBjcmVhdGVFdmVudCBmcm9tICd0cmlja3MvZXZlbnRzL2NyZWF0ZUV2ZW50JztcbmltcG9ydCBjcmVhdGVEdW1teUV2ZW50IGZyb20gJ3RyaWNrcy9ldmVudHMvY3JlYXRlRHVtbXlFdmVudCc7XG5pbXBvcnQgb24gZnJvbSAndHJpY2tzL2V2ZW50cy9vbic7XG5cblxuLy8gQ29uc3RhbnRzXG5jb25zdCBCQUNLR1JPVU5EX0hBU0ggPSAnYmFja2dyb3VuZCc7XG5jb25zdCBVc2VyRXZlbnRzID0gWydjbGljaycsICdtb3VzZWRvd24nLCAnbW91c2V1cCcsICdtb3VzZW92ZXInLCAnbW91c2Vtb3ZlJywgJ21vdXNlb3V0JywgJ2ZyYW1lJywgJ3Jlc2l6ZSddO1xuY29uc3QgVG91Y2hFdmVudHMgPSBbJ3RvdWNobW92ZScsICd0b3VjaHN0YXJ0JywgJ3RvdWNoZW5kJ107XG5cbmNvbnN0IEVWRU5UX1NFUEFSQVRPUiA9IC9bXFxzXFwsXSsvO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYW52YXMge1xuXG5cdC8vIENvbnN0cnVjdCB0aGUgQ2FudmFzIEVsZW1lbnRcblx0Ly8gQHBhcmFtIGNhbnZhcyBzaG91bGQgYmUgYW4gcm9vdCBlbGVtZW50IGNvbnRhaW5lciBmb3IgdGhpcyBpbWFnZXJ5LlxuXHRjb25zdHJ1Y3RvcihjYW52YXMpIHtcblxuXHRcdGxldCBwYXJlbnQ7XG5cblx0XHQvLyBldmVudHNcblx0XHR0aGlzLmV2ZW50cyA9IHt9O1xuXG5cdFx0Ly8gYnJvd3NlciBjaGVja1xuXHRcdGlmICghKCdnZXRDb250ZXh0JyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKSkpIHtcblx0XHRcdC8vIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IGNhbnZhc1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICghKGNhbnZhcyAmJiBjYW52YXMgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkpIHtcblxuXHRcdFx0Ly8gU2V0IHRoZSBwYXJlbnRcblx0XHRcdHBhcmVudCA9IGNhbnZhcztcblxuXHRcdFx0Ly8gQ3JlYXRlIHRoZSBjYW52YXMgbGF5ZXJcblx0XHRcdGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuXHRcdFx0Y2FudmFzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd3aGl0ZSc7XG5cblx0XHRcdC8vIE5vdCBhIHBhcmVudFxuXHRcdFx0aWYgKCFwYXJlbnQpIHtcblx0XHRcdFx0Ly8gQXBwZW5kIHRvIHRoZSBib2R5XG5cdFx0XHRcdHBhcmVudCA9IGRvY3VtZW50LmJvZHk7XG5cdFx0XHRcdGNhbnZhcy5zdHlsZS5jc3NUZXh0ID0gJ3Bvc2l0aW9uOmZpeGVkO3otaW5kZXg6LTE7dG9wOjA7bGVmdDowOyc7XG5cdFx0XHRcdGNhbnZhcy5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgMCk7XG5cblx0XHRcdFx0ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLmNzc1RleHQgPSAnbWluLWhlaWdodDoxMDAlOyc7XG5cdFx0XHRcdGRvY3VtZW50LmJvZHkuc3R5bGUuY3NzVGV4dCA9ICdtaW4taGVpZ2h0OjEwMCU7JztcblxuXHRcdFx0XHQvLyBCaW5kIHdpbmRvdyByZXNpemUgZXZlbnRzXG5cdFx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnJlc2l6ZS5iaW5kKHRoaXMpKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQXBwZW5kIHRoaXMgZWxlbWVudFxuXHRcdFx0cGFyZW50Lmluc2VydEJlZm9yZShjYW52YXMsIHBhcmVudC5maXJzdEVsZW1lbnRDaGlsZCk7XG5cblx0XHRcdHRoaXMudGFyZ2V0ID0gY2FudmFzO1xuXG5cdFx0XHR0aGlzLnJlc2l6ZSgpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHRoaXMudGFyZ2V0ID0gY2FudmFzO1xuXHRcdFx0cGFyZW50ID0gY2FudmFzLnBhcmVudE5vZGU7XG5cdFx0fVxuXG5cdFx0dGhpcy5jdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuXHRcdC8vIFNldCBpbml0aWFsIHNhdmUgcG9pbnRcblx0XHR0aGlzLmN0eC5zYXZlKCk7XG5cblx0XHQvLyBJbml0aWF0ZSB0aGUgdGltZVxuXHRcdHRoaXMuX3RpbWUgPSAwO1xuXHRcdHRoaXMuX2ZwcyA9IDA7XG5cblx0XHQvLyBJbml0aWF0ZSB0aGUgZHJhd1xuXHRcdHRoaXMuZHJhdygpO1xuXG5cdFx0Ly8gQmluZCBldmVudHNcblx0XHRvbih0aGlzLnRhcmdldCwgVXNlckV2ZW50cy50b1N0cmluZygpLCB0aGlzLmRpc3BhdGNoRXZlbnQuYmluZCh0aGlzKSwge3Bhc3NpdmU6IHRydWV9KTtcblxuXHRcdC8vIEZvcm1hdCBUb3VjaCBldmVudHNcblx0XHRvbih0aGlzLnRhcmdldCwgVG91Y2hFdmVudHMudG9TdHJpbmcoKSwgdGhpcy5kaXNwYXRjaFRvdWNoRXZlbnQuYmluZCh0aGlzKSwge3Bhc3NpdmU6IHRydWV9KTtcblxuXHRcdC8vIEluIElFIHVzZXItZXZlbnRzIGFyZW4ndCBwcm9wYWdhdGVkIHRvIGVsZW1lbnRzIHdoaWNoIGhhdmUgbmVnYXRpdmUgei1JbmRleCdzXG5cdFx0Ly8gTGlzdGVuIHRvIGV2ZW50cyBvbiB0aGUgZG9jdW1lbnQgZWxlbWVudCBhbmQgcHJvcGFnYXRlIHRob3NlIGFjY29yZGluZ2x5XG5cdFx0aWYgKHBhcmVudCA9PT0gZG9jdW1lbnQuYm9keSAmJiBjYW52YXMuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnei1pbmRleCcpID09PSAnLTEnKSB7XG5cdFx0XHQvLyBCaW5kIGV2ZW50c1xuXHRcdFx0b24oZG9jdW1lbnQsIFVzZXJFdmVudHMudG9TdHJpbmcoKSwgdGhpcy5kaXNwYXRjaEV2ZW50LmJpbmQodGhpcyksIHtwYXNzaXZlOiB0cnVlfSk7XG5cblx0XHRcdC8vIEZvcm1hdCBUb3VjaCBldmVudHNcblx0XHRcdG9uKGRvY3VtZW50LCBUb3VjaEV2ZW50cy50b1N0cmluZygpLCB0aGlzLmRpc3BhdGNoVG91Y2hFdmVudC5iaW5kKHRoaXMpLCB7cGFzc2l2ZTogdHJ1ZX0pO1xuXHRcdH1cblxuXHRcdC8vIExpc3RlbiB0byBoYXNoQ2hhbmdlIGV2ZW50c1xuXHRcdHtcblx0XHRcdC8vIEhBU0ggQ0hBTkdFIERFUFRIXG5cdFx0XHRjb25zdCBzdHlsZSA9IHRoaXMudGFyZ2V0LnN0eWxlO1xuXHRcdFx0Y29uc3QgaW5pdGlhbFogPSBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCd6LWluZGV4Jyk7XG5cdFx0XHQvLyBMaXN0ZW4gdG8gY2hhbmdlcyB0byB0aGUgYmFja2dyb3VuZCBoYXNoIHRvIGJyaW5nIHRoZSBjYW52YXMgZWxlbWVudCB0byB0aGUgZnJvbnRcblx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgaGFzaGNoYW5nZS5iaW5kKHN0eWxlLCBpbml0aWFsWikpO1xuXG5cdFx0XHRoYXNoY2hhbmdlLmNhbGwoc3R5bGUsIGluaXRpYWxaKTtcblx0XHR9XG5cdH1cblxuXHQvLyBlbnN1cmUgaXRzIGtlZXBpbmcgdXAuXG5cdGdldCB3aWR0aCgpIHtcblx0XHRyZXR1cm4gdGhpcy50YXJnZXQud2lkdGg7XG5cdH1cblx0c2V0IHdpZHRoKHZhbHVlKSB7XG5cdFx0dGhpcy50YXJnZXQud2lkdGggPSB2YWx1ZTtcblx0XHRyZXR1cm4gdmFsdWU7XG5cdH1cblxuXHRnZXQgaGVpZ2h0KCkge1xuXHRcdHJldHVybiB0aGlzLnRhcmdldC5oZWlnaHQ7XG5cdH1cblx0c2V0IGhlaWdodCh2YWx1ZSkge1xuXHRcdHRoaXMudGFyZ2V0LmhlaWdodCA9IHZhbHVlO1xuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxuXHRnZXQgZnBzKCkge1xuXHRcdHJldHVybiB0aGlzLl9mcHM7XG5cdH1cblx0c2V0IGZwcyh2YWx1ZSkge1xuXG5cdFx0dGhpcy5fZnBzID0gdmFsdWU7XG5cblx0XHRjb25zdCBub3cgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuXG5cdFx0aWYgKChub3cgLSB0aGlzLl90aW1lKSA+IDEwMDApIHtcblx0XHRcdC8vIGNvbnNvbGUubG9nKCdmcHM6ICVkJywgdGhpcy5fZnBzKTtcblx0XHRcdHRoaXMuX3RpbWUgPSBub3c7XG5cdFx0XHR0aGlzLl9mcHMgPSAwO1xuXHRcdH1cblx0fVxuXG5cblx0cmVzaXplKCkge1xuXHRcdGNvbnN0IHBhcmVudCA9ICh0aGlzLnRhcmdldC5wYXJlbnROb2RlID09PSBkb2N1bWVudC5ib2R5KSA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA6IHRoaXMudGFyZ2V0LnBhcmVudE5vZGU7XG5cdFx0Y29uc3QgaGVpZ2h0ID0gcGFyZW50LmNsaWVudEhlaWdodDtcblx0XHRjb25zdCB3aWR0aCA9IHBhcmVudC5jbGllbnRXaWR0aDtcblx0XHRsZXQgY2hhbmdlZCA9IGZhbHNlO1xuXG5cdFx0aWYgKHRoaXMud2lkdGggIT09IHdpZHRoKSB7XG5cdFx0XHRjaGFuZ2VkID0gdHJ1ZTtcblx0XHRcdHRoaXMud2lkdGggPSB3aWR0aDtcblx0XHR9XG5cdFx0aWYgKHRoaXMuaGVpZ2h0ICE9PSBoZWlnaHQpIHtcblx0XHRcdGNoYW5nZWQgPSB0cnVlO1xuXHRcdFx0dGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG5cdFx0fVxuXG5cdFx0aWYgKGNoYW5nZWQpIHtcblx0XHRcdHRoaXMudGFyZ2V0LmRpc3BhdGNoRXZlbnQoY3JlYXRlRXZlbnQoJ3Jlc2l6ZScpKTtcblx0XHR9XG5cdH1cblxuXHRjbGVhcigpIHtcblx0XHR0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy50YXJnZXQud2lkdGgsIHRoaXMudGFyZ2V0LmhlaWdodCk7XG5cdH1cblxuXHQvLyBCcmluZyB0aGUgY29udGVudCBvZiB0aGUgY2FudmFzIHRvIHRoZSBmcm9udFxuXHRicmluZ1RvRnJvbnQoKSB7XG5cblx0XHQvLyBVcGRhdGUgdGhlIHdpbmRvdy5sb2NhdGlvbiB3aXRoIHRoZSBoYXNoICNiYWNrZ3JvdW5kXG5cdFx0d2luZG93LmxvY2F0aW9uLmhhc2ggPSBCQUNLR1JPVU5EX0hBU0g7XG5cdH1cblxuXHQvLyBUcmlnZ2VyIHRoZSBkcmF3IGZ1bmN0aW9uXG5cdGRyYXcoKSB7XG5cblx0XHQvLyBJbmNyZW1lbnQgdGhlIG51bWJlciBvZiBmcmFtZXNcblx0XHR0aGlzLmZwcysrO1xuXG5cdFx0Ly8gQ2FsbCB0aGUgZnJhbWUgZnVuY3Rpb24gaW4gdGhlIGNvbnRleHQgb2YgdGhlIGZyYW1lIHRvIGRyYXdcblx0XHR0aGlzLnRhcmdldC5kaXNwYXRjaEV2ZW50KGNyZWF0ZUV2ZW50KCdmcmFtZScpKTtcblxuXHRcdC8vIFJlcXVlc3QgYW5vdGhlciBmcmFtZVxuXHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmRyYXcuYmluZCh0aGlzKSk7XG5cdH1cblxuXHQvLyBUaGUgdXNlciBoYXMgY2xpY2tlZCBhbiBpdGVtIG9uIHRoZSBwYWdlXG5cdGFkZEV2ZW50TGlzdGVuZXIoZXZlbnRuYW1lcywgaGFuZGxlcikge1xuXG5cdFx0ZXZlbnRuYW1lcy5zcGxpdChFVkVOVF9TRVBBUkFUT1IpLmZvckVhY2goZXZlbnRuYW1lID0+IHtcblx0XHRcdC8vIEFkZCB0byB0aGUgZXZlbnRzIGxpc3Rcblx0XHRcdGlmICghKGV2ZW50bmFtZSBpbiB0aGlzLmV2ZW50cykpIHtcblx0XHRcdFx0dGhpcy5ldmVudHNbZXZlbnRuYW1lXSA9IFtdO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLmV2ZW50c1tldmVudG5hbWVdLnB1c2goaGFuZGxlcik7XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBEaXNwYXRjaFxuXHRkaXNwYXRjaEV2ZW50KGUpIHtcblxuXHRcdGlmIChlLnR5cGUgaW4gdGhpcy5ldmVudHMpIHtcblxuXHRcdFx0Y29uc3QgdGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0O1xuXG5cdFx0XHQvLyBUaGlzIHdhcyB0cmlnZ2VyZWQgdXNpbmcgZXZlbnQgZGVsZWdhdGlvbiwgYWthIGluIHRoZSBiYWNrZ3JvdW5kXG5cdFx0XHRpZiAodGFyZ2V0ID09PSBkb2N1bWVudCkge1xuXG5cdFx0XHRcdGUgPSBjcmVhdGVEdW1teUV2ZW50KHtcblx0XHRcdFx0XHR0eXBlOiBlLnR5cGUsXG5cdFx0XHRcdFx0dGFyZ2V0OiB0aGlzLnRhcmdldCxcblx0XHRcdFx0XHRvZmZzZXRYOiBlLnBhZ2VYIHx8IGUub2Zmc2V0WCxcblx0XHRcdFx0XHRvZmZzZXRZOiBlLnBhZ2VZIHx8IGUub2Zmc2V0WVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5ldmVudHNbZS50eXBlXS5mb3JFYWNoKGhhbmRsZXIgPT4gaGFuZGxlcihlKSk7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdH1cblx0fVxuXG5cdC8vIERpc3BhdGNoXG5cdGRpc3BhdGNoVG91Y2hFdmVudChlKSB7XG5cdFx0Ly8gSWYgdGhpcyB3YXMgYSB0b3VjaCBldmVudFxuXHRcdC8vIERldGVybWluZSB0aGUgb2Zmc2V0IHRvIHRoZSBjYW52YXMgZWxlbWVudCByZWxhdGl2ZSB0byB0aGUgaXRlbSBiZWluZyBjbGlja2VkXG5cdFx0Y29uc3QgdG91Y2ggPSAoZS50b3VjaGVzIHx8IGUuY2hhbmdlZFRvdWNoZXMpWzBdO1xuXHRcdGlmICh0b3VjaCkge1xuXHRcdFx0ZS5vZmZzZXRYID0gTWF0aC5hYnModG91Y2gucGFnZVggfHwgdG91Y2guc2NyZWVuWCk7XG5cdFx0XHRlLm9mZnNldFkgPSBNYXRoLmFicyh0b3VjaC5wYWdlWSB8fCB0b3VjaC5zY3JlZW5ZKTtcblx0XHR9XG5cblx0XHR0aGlzLmRpc3BhdGNoRXZlbnQoZSk7XG5cdH1cbn1cblxuXG5mdW5jdGlvbiBoYXNoY2hhbmdlKHopIHtcblxuXHRjb25zdCB6SW5kZXggPSAnei1pbmRleCc7XG5cblx0aWYgKHdpbmRvdy5sb2NhdGlvbi5oYXNoID09PSBgIyR7IEJBQ0tHUk9VTkRfSEFTSH1gKSB7XG5cdFx0eiA9IDEwMDAwO1xuXHR9XG5cblx0aWYgKHogIT09IHVuZGVmaW5lZCkge1xuXHRcdC8vIFNldCB0aGUgei1JbmRleFxuXHRcdHRoaXMuc2V0UHJvcGVydHkoekluZGV4LCB6KTtcblx0fVxuXHRlbHNlIHtcblx0XHQvLyBSZW1vdmUgdGhlIHotSW5kZXhcblx0XHR0aGlzLnJlbW92ZVByb3BlcnR5KHpJbmRleCk7XG5cdH1cbn1cbiIsIi8vIENvbGxlY3Rpb25cblxuaW1wb3J0IG9uIGZyb20gJ3RyaWNrcy9ldmVudHMvb24nO1xuY29uc3QgVXNlckV2ZW50cyA9IFsnY2xpY2snLCAnbW91c2Vkb3duJywgJ21vdXNldXAnLCAnbW91c2VvdmVyJywgJ21vdXNlbW92ZScsICdtb3VzZW91dCcsICd0b3VjaG1vdmUnLCAndG91Y2hzdGFydCcsICd0b3VjaGVuZCcsICdmcmFtZSddO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb2xsZWN0aW9uIHtcblxuXHRjb25zdHJ1Y3Rvcih0YXJnZXQpIHtcblx0XHQvLyBDcmVhdGUgYW4gZW1wdHkgY2hpbGRyZW5cblx0XHR0aGlzLmNoaWxkcmVuID0gW107XG5cblx0XHQvLyBFdmVudHNcblx0XHR0aGlzLmV2ZW50cyA9IFtdO1xuXG5cdFx0Ly8gc2V0dXAgdGhlIGNhbnZhcyBlbGVtZW50XG5cdFx0dGhpcy5pbml0KHRhcmdldCk7XG5cdH1cblxuXHQvLyBsaXN0ZW4gdG8gY2FudmFzIGV2ZW50c1xuXHRpbml0ICh0YXJnZXQpIHtcblxuXHRcdC8vIERlZmluZSB0aGUgY2FudmFzIG9iamVjdCBhcyB0aGUgdGFyZ2V0IGZvciB0aGUgY29sbGVjdGlvblxuXHRcdHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuXG5cdFx0Ly8gRGVmaW5lIHRoZSBDVFhcblx0XHR0aGlzLmN0eCA9IHRhcmdldC5nZXRDb250ZXh0KCcyZCcpO1xuXG5cdFx0Ly8gbGlzdGVuIHRvIHVzZXIgaW50ZXJhY3RpdmUgZXZlbnRzIGFuZCB0cmlnZ2VyIHRob3NlIG9uIGl0ZW1zXG5cdFx0b24odGFyZ2V0LCBVc2VyRXZlbnRzLnRvU3RyaW5nKCksIHRoaXMuX2ZpbmRBbmREaXNwYXRjaC5iaW5kKHRoaXMpLCB7cGFzc2l2ZTogdHJ1ZX0pO1xuXG5cdH1cblxuXHRwdXNoKGl0ZW0pIHtcblx0XHRpdGVtLmRpcnR5ID0gdHJ1ZTtcblxuXHRcdC8vIElzIHRoaXMgaXRlbSBhbHJlYWR5IGluIHRoZSBjb2xsZWN0aW9uP1xuXHRcdGlmICh0aGlzLmNoaWxkcmVuLmluZGV4T2YoaXRlbSkgPT09IC0xKSB7XG5cdFx0XHRpZiAoaXRlbS5zZXR1cCkge1xuXHRcdFx0XHRpdGVtLnNldHVwKHRoaXMpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2RpcnR5JywgdGhpcy5wcmVwYXJlQ2hpbGQuYmluZCh0aGlzLCBpdGVtKSk7XG5cdFx0XHR0aGlzLmNoaWxkcmVuLnB1c2goaXRlbSk7XG5cdFx0fVxuXHR9XG5cblx0Z2V0IGxlbmd0aCAoKSB7XG5cdFx0cmV0dXJuIHRoaXMuY2hpbGRyZW4ubGVuZ3RoO1xuXHR9XG5cdHNldCBsZW5ndGggKHYpIHtcblx0XHRyZXR1cm4gdGhpcy5jaGlsZHJlbi5sZW5ndGggPSB2O1xuXHR9XG5cblxuXHQvLyBUb3VjaFxuXHQvLyBNYXJrIGl0ZW1zIGFuZCBvYmplY3RzIGluIHRoZSBzYW1lIHNwYWNlIHRvIGJlIHJlZHJhd25cblx0cHJlcGFyZSgpIHtcblx0XHR0aGlzLmNoaWxkcmVuLmZvckVhY2goaXRlbSA9PiB7XG5cdFx0XHRpZiAoaXRlbS5kaXJ0eSA9PT0gdHJ1ZSlcblx0XHRcdFx0dGhpcy5wcmVwYXJlQ2hpbGQoaXRlbSk7XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBDbGVhbiBJdGVtXG5cdHByZXBhcmVDaGlsZChpdGVtKSB7XG5cblx0XHRjb25zdCBjdHggPSB0aGlzLmN0eDtcblxuXHRcdGlmIChpdGVtLmRpcnR5ID09PSAncGVuZGluZycpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBNYXJrIHRoaXMgaXRlbSBhcyBkaXJ0eVxuXHRcdGl0ZW0uZGlydHkgPSAncGVuZGluZyc7XG5cblx0XHQvLyBSZW1vdmUgZnJvbSBDYW52YXNcblx0XHRjdHguY2xlYXJSZWN0KGl0ZW0ueCwgaXRlbS55LCBpdGVtLncsIGl0ZW0uaCk7XG5cblx0XHQvLyBJZiB0aGUgaXRlbXMgb2xkIHBvc2l0aW9uIGlzIGRpZmZlcmVudFxuXHRcdGlmIChpdGVtLnBhc3QgJiYgZGlzcGxhY2VkKGl0ZW0ucGFzdCwgaXRlbSkpIHtcblx0XHRcdGN0eC5jbGVhclJlY3QoaXRlbS5wYXN0LngsIGl0ZW0ucGFzdC55LCBpdGVtLnBhc3QudywgaXRlbS5wYXN0LmgpO1xuXHRcdH1cblxuXHRcdC8vIExvb3AgdGhvdWdoIG9iamVjdHMgYW5kIHJlZHJhdyB0aG9zZSB0aGF0IGV4aXN0IHdpdGhpbiB0aGUgcG9zaXRpb25cblx0XHR0aGlzLmNoaWxkcmVuLmZvckVhY2godGhpcy5fcHJlcGFyZVNpYmxpbmdzLmJpbmQodGhpcywgaXRlbSkpO1xuXHR9XG5cblx0X3ByZXBhcmVTaWJsaW5ncyhpdGVtLCBzaWJsaW5nKSB7XG5cblx0XHQvLyBEb2VzIHRoaXMgT2JqZWN0IG92ZXJsYXAgd2l0aCB0aGUgZm9jdXNlZCBvYmplY3Q/XG5cdFx0aWYgKCFzaWJsaW5nLmRpcnR5ICYmIHNpYmxpbmcudmlzaWJsZSAhPT0gZmFsc2UgJiYgKGludGVyc2VjdChzaWJsaW5nLCBpdGVtKSB8fCAoaXRlbS5wYXN0ID8gaW50ZXJzZWN0KHNpYmxpbmcsIGl0ZW0ucGFzdCkgOiBmYWxzZSkpKSB7XG5cdFx0XHQvLyBOZXN0ZWQgY2xlYW5cblx0XHRcdHRoaXMucHJlcGFyZUNoaWxkKHNpYmxpbmcpO1xuXHRcdH1cblx0fVxuXG5cdHNvcnQoKSB7XG5cdFx0Ly8gU29ydCBpdGVtcyBieSB6LWluZGV4XG5cdFx0dGhpcy5jaGlsZHJlbi5zb3J0KChhLCBiKSA9PiB7XG5cdFx0XHRhID0gYS56SW5kZXggfHwgMDtcblx0XHRcdGIgPSBiLnpJbmRleCB8fCAwO1xuXHRcdFx0cmV0dXJuICsoYSA+IGIpIHx8IC0oYSA8IGIpO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gVHJpZ2dlciB0aGUgZHJhdyBmdW5jdGlvblxuXHRkcmF3KCkge1xuXG5cdFx0Y29uc3QgY3R4ID0gdGhpcy5jdHg7XG5cblx0XHQvLyBGaW5kIGl0ZW1zIHRoYXQgaGF2ZSBjaGFuZ2VkXG5cdFx0Ly8gUmVtb3ZlIGJhY2tncm91bmRcblx0XHR0aGlzLmNoaWxkcmVuLmZvckVhY2goaXRlbSA9PiB7XG5cblx0XHRcdGlmIChpdGVtLmZyYW1lKSB7XG5cdFx0XHRcdGl0ZW0uZnJhbWUoY3R4KTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGl0ZW0uZGlydHkgJiYgaXRlbS52aXNpYmxlICE9PSBmYWxzZSkge1xuXHRcdFx0XHRpdGVtLmRyYXcoY3R4KTtcblx0XHRcdH1cblxuXHRcdFx0aXRlbS5kaXJ0eSA9IGZhbHNlO1xuXHRcdH0pO1xuXHR9XG5cblx0ZWxlbWVudEZyb21Qb2ludCh4LCB5KSB7XG5cblx0XHRsZXQgdGFyZ2V0O1xuXG5cdFx0Ly8gRmluZCB0aGUgY2FudmFzIGl0ZW0gd2hpY2ggdGhpcyB0YXJnZXRzP1xuXHRcdGNvbnN0IG9iaiA9IHtcblx0XHRcdHgsXG5cdFx0XHR5LFxuXHRcdFx0dzogMSxcblx0XHRcdGg6IDFcblx0XHR9O1xuXG5cdFx0dGhpcy5jaGlsZHJlbi5mb3JFYWNoKGl0ZW0gPT4ge1xuXG5cdFx0XHRpZiAoaXRlbS52aXNpYmxlID09PSBmYWxzZSB8fCAhaXRlbS53IHx8ICFpdGVtLmggfHwgaXRlbS5wb2ludGVyRXZlbnRzID09PSBmYWxzZSkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIElzIHRoaXMgYSB0YXJnZXQ/XG5cdFx0XHRpZiAoaW50ZXJzZWN0KG9iaiwgaXRlbSkpIHtcblx0XHRcdFx0Ly8gRGVmaW5lIHRoaXMgYXMgYSB0YXJnZXRcblx0XHRcdFx0dGFyZ2V0ID0gaXRlbTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiB0YXJnZXQ7XG5cdH1cblxuXHQvLyBUaGUgdXNlciBoYXMgY2xpY2tlZCBhbiBpdGVtIG9uIHRoZSBwYWdlXG5cdGFkZEV2ZW50TGlzdGVuZXIoZXZlbnRuYW1lLCBoYW5kbGVyKSB7XG5cblx0XHQvLyBBZGQgdG8gdGhlIGV2ZW50cyBsaXN0XG5cdFx0aWYgKCEoZXZlbnRuYW1lIGluIHRoaXMuZXZlbnRzKSkge1xuXHRcdFx0dGhpcy5ldmVudHNbZXZlbnRuYW1lXSA9IFtdO1xuXHRcdH1cblxuXHRcdHRoaXMuZXZlbnRzW2V2ZW50bmFtZV0ucHVzaChoYW5kbGVyKTtcblx0fVxuXG5cdC8vIERpc3BhdGNoXG5cdGRpc3BhdGNoRXZlbnQoZSkge1xuXHRcdGlmIChlLnR5cGUgaW4gdGhpcy5ldmVudHMpXG5cdFx0XHR0aGlzLmV2ZW50c1tlLnR5cGVdLmZvckVhY2goaGFuZGxlciA9PiBoYW5kbGVyKGUpKTtcblx0fVxuXG5cdC8vIEZpbmQgYW5kIF9kaXNwYXRjaFxuXHRfZmluZEFuZERpc3BhdGNoKGUpIHtcblx0XHQvLyBJZiB0aGlzIGlzIG5vdCBhIHBvaW50ZXJFdmVudCBsZXRzIGp1c3QgcGFzcyBpdCB0aHJvdWdoLlxuXHRcdGlmICgodHlwZW9mIE1vdXNlRXZlbnQgIT09ICd1bmRlZmluZWQnICYmIGUgaW5zdGFuY2VvZiBNb3VzZUV2ZW50KSB8fFxuXHRcdFx0KHR5cGVvZiBUb3VjaEV2ZW50ICE9PSAndW5kZWZpbmVkJyAmJiBlIGluc3RhbmNlb2YgVG91Y2hFdmVudCkpIHtcblxuXHRcdFx0Ly8gRmluZCB0aGUgY2FudmFzIGl0ZW0gd2hpY2ggdGhpcyB0YXJnZXRzP1xuXHRcdFx0Y29uc3Qgb2JqID0ge1xuXHRcdFx0XHR4OiBlLm9mZnNldFgsXG5cdFx0XHRcdHk6IGUub2Zmc2V0WSxcblx0XHRcdFx0dzogMSxcblx0XHRcdFx0aDogMVxuXHRcdFx0fTtcblxuXHRcdFx0dGhpcy5jaGlsZHJlbi5mb3JFYWNoKGl0ZW0gPT4ge1xuXG5cdFx0XHRcdGlmICghaXRlbS52aXNpYmxlIHx8ICFpdGVtLncgfHwgIWl0ZW0uaCB8fCAhaXRlbS5wb2ludGVyRXZlbnRzKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gSW50ZXJzZWN0cz9cblx0XHRcdFx0aW50ZXJzZWN0KG9iaiwgaXRlbSkgJiYgaXRlbS5kaXNwYXRjaEV2ZW50KGUpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG59XG5cblxuLy8gSW50ZXJzZWN0XG4vLyBHaXZlbiB0d28gb2JqZWN0cyB3aXRoLCB4LHksdyxoIHByb3BlcnRpZXNcbi8vIERvIHRoZWlyIHJlY3Rhbmd1bGFyIGRpbWVuc2lvbnMgaW50ZXJzZWN0P1xuLy8gcmV0dXJuIEJvb2xlYW4gdHJ1ZSBmYWxzZS5cbmZ1bmN0aW9uIGludGVyc2VjdChhLCBiKSB7XG5cdHJldHVybiAhKGEueCA+IChiLnggKyBiLncpIHx8XG5cdChhLnggKyBhLncpIDwgYi54IHx8XG5cdGEueSA+IChiLnkgKyBiLmgpIHx8XG5cdChhLnkgKyBhLmgpIDwgYi55KTtcbn1cblxuZnVuY3Rpb24gZGlzcGxhY2VkKGEsIGIpIHtcblx0cmV0dXJuIChhLnggIT09IGIueCB8fFxuXHRhLnkgIT09IGIueSB8fFxuXHRhLncgIT09IGIudyB8fFxuXHRhLmggIT09IGIuaCk7XG59XG4iXX0="}