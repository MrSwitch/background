{"version":3,"sources":["dist/node_modules/browserify/node_modules/browser-pack/_prelude.js","src/balloonboom.js","src/classes/canvas.js","src/classes/collection.js","src/utils/events/createDummyEvent.js","src/utils/events/createEvent.js","src/utils/events/userinitiated.js","src/utils/support/requestAnimationFrame.js"],"names":[],"mappings":"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","file":"dist/balloonboom.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// TiledOfLife, Canvas annimation\n// Copyright Andrew Dodson, March 2013\n\n// Get Canvas\nimport Canvas from './classes/canvas';\nimport Collection from './classes/collection';\n\nconst MATH_PI2 = 2 * Math.PI;\n\nconst sprites = [];\n\n// Create a new tile\nclass Balloon{\n\n\tconstructor(cx, cy, r) {\n\n\t\tthis.cx = cx;\n\t\tthis.cy = cy;\n\t\tthis.r = r;\n\n\t\tthis.fillStyle = \"black\";\n\n\t\tthis.calc();\n\t}\n\n\tcalc() {\n\t\tlet r = this.r;\n\t\tthis.x = this.cx - r;\n\t\tthis.y = this.cy - r;\n\t\tthis.w = r*2;\n\t\tthis.h = r*2;\n\t}\n\n\tdraw(ctx) {\n\n\t\tif (this.r <= 0) {\n\t\t\tthis.r = 0;\n\t\t\treturn;\n\t\t}\n\n\t\t// Does this exist as a sprite?\n\t\tvar key = this.fillStyle + this.r;\n\t\tif (!(key in sprites)) {\n\t\t\tvar _canvas = document.createElement('canvas');\n\t\t\t_canvas.width = Math.ceil(this.w)+2;\n\t\t\t_canvas.height = Math.ceil(this.h)+2;\n\t\t\tvar _ctx = _canvas.getContext('2d');\n\t\t\t_ctx.fillStyle = this.fillStyle;\n\t\t\t_ctx.beginPath();\n\t\t\t_ctx.arc(this.r + 1, this.r + 1, this.r, 0, MATH_PI2, false);\n\t\t\t_ctx.fill();\n\n\t\t\tsprites[key] = _canvas;\n\t\t}\n\n\t\tctx.drawImage(sprites[key], this.x - 1, this.y - 1);\n\t}\n\n\tframe(canvas) {\n\n\t\t// Is this expanding or shrinking?\n\t\tif (this.r >= max_radius) {\n\t\t\t// reset the radius\n\t\t\tthis.r = 0;\n\n\t\t\t// Swap the color\n\t\t\tthis.fillStyle = toggle(this.fillStyle, \"white\", \"black\");\n\t\t}\n\n\t\tthis.r += (max_radius/200);\n\t\tthis.calc();\n\t\tthis.dirty = true;\n\t}\n}\n\n\n\nfunction toggle(value, ...args) {\n\tvar index = args.indexOf(value);\n\tvar next = args[index + 1];\n\tif (next === undefined) {\n\t\tnext = args[0];\n\t}\n\treturn next;\n}\n\n\nlet canvas = new Canvas();\nlet collection = new Collection(canvas.target);\ncanvas.addEventListener('resize', setup);\ncanvas.addEventListener('frame', () => {\n\n\t// // Clear canvas\n\t// canvas.ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n\t// Draw items\n\tcollection.draw();\n});\n\n// draw variant background\n\nvar balloons = [];\nvar max_radius;\n\nsetup();\n\nfunction setup() {\n\n\t// There are 100 balloons\n\tvar n = 1000;\n\n\t// To fill the rectangular screen area\n\tvar W = canvas.width;\n\tvar H = canvas.height;\n\tvar A = H * W;\n\n\t// Each would have to fill an area about.\n\tvar a = A / n;\n\n\t// And since they must fill a square we can sqrt to find width and height of the balloons\n\tvar w = Math.sqrt(a);\n\tvar h = w;\n\n\t// Find the number that would be needed to fill the axis\n\tvar nx = Math.floor(W / w) || 1;\n\tvar ny = Math.floor(H / h) || 1;\n\n\t// Adjust the width and height to uniformly spread them out\n\tw = W / nx;\n\th = H / ny;\n\n\t// Capture max-radius\n\tvar r = Math.max(w, h) / 2;\n\tmax_radius = r * 1.5;\n\n\tfor (var i = 0; i < nx; i++) {\n\t\tr = (((i + 1) / nx) * w) / 2;\n\t\tfor (var j = 0; j < ny; j++) {\n\n\t\t\tvar cx = parseInt((i * w) + (w / 2), 10);\n\t\t\tvar cy = parseInt((j * h) + (h / 2), 10);\n\n\t\t\tvar balloon = balloons[((i * ny) + j)];\n\n\t\t\t// %100\n\n\t\t\tif(!balloon){\n\t\t\t\tballoon = new Balloon(cx, cy, r);\n\t\t\t\tcollection.push(balloon);\n\t\t\t\tballoons.push(balloon);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Insert into a collection\n\t\t\t\tcollection.push(balloon);\n\n\t\t\t\t// Update its position\n\t\t\t\tballoon.cx = cx;\n\t\t\t\tballoon.cy = cy;\n\t\t\t\tballoon.r = r;\n\t\t\t\tballoon.fillStyle = null;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Crop the collection array to nx * ny\n\tcollection.length = (nx * ny);\n}\n","// Setup\n// This constructs the canvas object\n\n// Includes\nimport '../utils/support/requestAnimationFrame';\nimport createEvent from '../utils/events/createEvent';\nimport createDummyEvent from '../utils/events/createDummyEvent';\nimport userInitiated from '../utils/events/userinitiated';\n\n// Constants\nconst BACKGROUND_HASH = 'background';\nconst UserEvents = ['click', 'mousedown', 'mouseup', 'mouseover', 'mousemove','mouseout', 'frame', 'resize'];\nconst TouchEvents = ['touchmove', 'touchstart', 'touchend'];\n\nconst EVENT_SEPARATOR = /[\\s\\,]+/;\n\nexport default class Canvas{\n\n\t// Construct the Canvas Element\n\t// @param canvas should be an root element container for this imagery.\n\tconstructor(canvas) {\n\n\t\tvar parent;\n\n\t\t// events\n\t\tthis.events = {};\n\n\t\t// browser check\n\t\tif (!(\"getContext\" in document.createElement('canvas'))) {\n\t\t\t// browser doesn't support canvas\n\t\t\treturn;\n\t\t}\n\n\t\tif (!(canvas && canvas instanceof HTMLCanvasElement)) {\n\n\t\t\t// Set the parent\n\t\t\tparent = canvas;\n\n\t\t\t// Create the canvas layer\n\t\t\tcanvas = document.createElement('canvas');\n\t\t\tcanvas.style.backgroundColor = 'white';\n\n\t\t\t// Not a parent\n\t\t\tif (!parent) {\n\t\t\t\t// Append to the body\n\t\t\t\tparent = document.body;\n\t\t\t\tcanvas.style.cssText = \"position:fixed;z-index:-1;top:0;left:0;\";\n\t\t\t\tcanvas.setAttribute('tabindex', 0);\n\n\t\t\t\tdocument.documentElement.style.cssText = \"min-height:100%;\";\n\t\t\t\tdocument.body.style.cssText = \"min-height:100%;\";\n\n\t\t\t\t// Bind window resize events\n\t\t\t\twindow.addEventListener('resize', this.resize.bind(this));\n\t\t\t}\n\n\t\t\t// Append this element\n\t\t\tparent.insertBefore(canvas, parent.firstElementChild);\n\n\t\t\tthis.target = canvas;\n\n\t\t\tthis.resize();\n\t\t}\n\t\telse{\n\t\t\tthis.target = canvas;\n\t\t\tparent = canvas.parentNode;\n\t\t}\n\n\t\tthis.ctx = canvas.getContext('2d');\n\n\t\t// Set initial save point\n\t\tthis.ctx.save();\n\n\t\t// Initiate the time\n\t\tthis._time = 0;\n\t\tthis._fps = 0;\n\n\t\t// Initiate the draw\n\t\tthis.draw();\n\n\t\t// Bind events\n\t\tUserEvents.forEach((eventname) => this.target.addEventListener(eventname, this.dispatchEvent.bind(this)));\n\n\t\t// Format Touch events\n\t\tTouchEvents.forEach((eventname) => this.target.addEventListener(eventname, this.dispatchTouchEvent.bind(this)));\n\n\t\t// In IE user-events aren't propagated to elements which have negative z-Index's\n\t\t// Listen to events on the document element and propagate those accordingly\n\t\tif (parent === document.body && canvas.style.getPropertyValue('z-index') === \"-1\") {\n\t\t\t// Bind events\n\t\t\tUserEvents.forEach((eventname) => document.addEventListener(eventname, this.dispatchEvent.bind(this)));\n\n\t\t\t// Format Touch events\n\t\t\tTouchEvents.forEach((eventname) => document.addEventListener(eventname, this.dispatchTouchEvent.bind(this)));\n\t\t}\n\n\t\t// Listen to hashChange events\n\t\t{\n\t\t\t// HASH CHANGE DEPTH\n\t\t\tlet style = this.target.style;\n\t\t\tlet initialZ = style.getPropertyValue('z-index');\n\t\t\t// Listen to changes to the background hash to bring the canvas element to the front\n\t\t\twindow.addEventListener('hashchange', hashchange.bind(style, initialZ));\n\n\t\t\thashchange.call(style, initialZ);\n\t\t}\n\t}\n\n\t// ensure its keeping up.\n\tget width() {\n\t\treturn this.target.width;\n\t}\n\tset width(value) {\n\t\tthis.target.width = value;\n\t\treturn value;\n\t}\n\n\tget height() {\n\t\treturn this.target.height;\n\t}\n\tset height(value) {\n\t\tthis.target.height = value;\n\t\treturn value;\n\t}\n\tget fps() {\n\t\treturn this._fps;\n\t}\n\tset fps(value) {\n\n\t\tthis._fps++;\n\n\t\tlet now = (new Date()).getTime();\n\n\t\tif ((now - this._time) > 1000) {\n\t\t\tconsole.log('fps: %d', this._fps);\n\t\t\tthis._time = now;\n\t\t\tthis._fps = 0;\n\t\t}\n\t}\n\n\n\tresize() {\n\t\tvar parent = (this.target.parentNode === document.body) ? document.documentElement : this.target.parentNode;\n\t\tvar height = parent.clientHeight;\n\t\tvar width = parent.clientWidth;\n\t\tvar changed = false;\n\n\t\tif (this.width !== width) {\n\t\t\tchanged = true;\n\t\t\tthis.width = width;\n\t\t}\n\t\tif (this.height !== height) {\n\t\t\tchanged = true;\n\t\t\tthis.height = height;\n\t\t}\n\n\t\tif (changed) {\n\t\t\tthis.target.dispatchEvent(createEvent('resize'));\n\t\t}\n\t}\n\n\tclear() {\n\t\tthis.ctx.clearRect(0, 0, this.target.width, this.target.height);\n\t}\n\n\t// Bring the content of the canvas to the front\n\tbringToFront() {\n\n\t\t// Update the window.location with the hash #background\n\t\twindow.location.hash = BACKGROUND_HASH;\n\t}\n\n\t// Trigger the draw function\n\tdraw() {\n\n\t\t// Increment the number of frames\n\t\tthis.fps++;\n\n\t\t// Call the frame function in the context of the frame to draw\n\t\tthis.target.dispatchEvent(createEvent('frame'));\n\n\t\t// Request another frame\n\t\trequestAnimationFrame(this.draw.bind(this));\n\t}\n\n\t// The user has clicked an item on the page\n\taddEventListener(eventnames, handler) {\n\n\t\teventnames.split(EVENT_SEPARATOR).forEach((eventname) => {\n\t\t\t// Add to the events list\n\t\t\tif (!(eventname in this.events)) {\n\t\t\t\tthis.events[eventname] = [];\n\t\t\t}\n\n\t\t\tthis.events[eventname].push(handler);\n\t\t});\n\t}\n\n\t// Dispatch\n\tdispatchEvent(e) {\n\n\t\tif (e.type in this.events) {\n\n\t\t\tlet target = e.currentTarget;\n\n\t\t\t// This was triggered using event delegation, aka in the background\n\t\t\tif (target === document) {\n\n\t\t\t\te = createDummyEvent({\n\t\t\t\t\ttype: e.type,\n\t\t\t\t\ttarget: this.target,\n\t\t\t\t\toffsetX: e.pageX,\n\t\t\t\t\toffsetY: e.pageY\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.events[e.type].forEach((handler) => handler(e));\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t}\n\t}\n\n\t// Dispatch\n\tdispatchTouchEvent(e) {\n\t\t// If this was a touch event\n\t\t// Determine the offset to the canvas element relative to the item being clicked\n\t\tvar touch = (e.touches || e.changedTouches)[0];\n\t\tif (touch) {\n\t\t\te.offsetX = Math.abs(touch.screenX);\n\t\t\te.offsetY = Math.abs(touch.screenY);\n\t\t}\n\n\t\tthis.dispatchEvent(e);\n\t}\n}\n\n\nfunction hashchange(z) {\n\n\tlet zIndex = 'z-index';\n\n\tif (window.location.hash === '#'+BACKGROUND_HASH) {\n\t\tz = 10000;\n\t}\n\n\tif (z !== undefined) {\n\t\t// Set the z-Index\n\t\tthis.setProperty(zIndex, z);\n\t}\n\telse {\n\t\t// Remove the z-Index\n\t\tthis.removeProperty(zIndex);\n\t}\n}\n","// Collection\n\nconst UserEvents = ['click', 'mousedown', 'mouseup', 'mouseover', 'mousemove','mouseout', 'touchmove','touchstart', 'touchend', 'frame'];\n\nexport default class Collection{\n\n\tconstructor(target) {\n\t\t// Create an empty children\n\t\tthis.children = [];\n\n\t\t// Events\n\t\tthis.events = [];\n\n\t\t// setup the canvas element\n\t\tthis.init(target);\n\t}\n\n\t// listen to canvas events\n\tinit (target) {\n\n\t\t// Define the canvas object as the target for the collection\n\t\tthis.target = target;\n\n\t\t// Define the CTX\n\t\tthis.ctx = target.getContext('2d');\n\n\t\t// listen to user interactive events and trigger those on items\n\t\tUserEvents.forEach((eventname) => target.addEventListener(eventname, this._findAndDispatch.bind(this)));\n\n\t}\n\n\tpush(item) {\n\t\titem.dirty = true;\n\n\t\t// Is this item already in the collection?\n\t\tif (this.children.indexOf(item) === -1) {\n\t\t\tif (item.setup) {\n\t\t\t\titem.setup(this);\n\t\t\t}\n\n\t\t\t// item.addEventListener('dirty', this.prepareChild.bind(this, item));\n\t\t\tthis.children.push(item);\n\t\t}\n\t}\n\n\tget length () {\n\t\treturn this.children.length;\n\t}\n\tset length (v) {\n\t\treturn this.children.length = v;\n\t}\n\n\n\t// Touch\n\t// Mark items and objects in the same space to be redrawn\n\tprepare() {\n\t\tthis.children.forEach((item) => {\n\t\t\tif (item.dirty === true)\n\t\t\t\tthis.prepareChild(item);\n\t\t});\n\t}\n\n\t// Clean Item\n\tprepareChild(item) {\n\n\t\tlet ctx = this.ctx;\n\n\t\tif (item.dirty === 'pending') {\n\t\t\treturn;\n\t\t}\n\n\t\t// Mark this item as dirty\n\t\titem.dirty = 'pending';\n\n\t\t// Remove from Canvas\n\t\tctx.clearRect(item.x, item.y, item.w, item.h);\n\n\t\t// If the items old position is different\n\t\tif (item.past && displaced(item.past, item)) {\n\t\t\tctx.clearRect(item.past.x, item.past.y, item.past.w, item.past.h);\n\t\t}\n\n\t\t// Loop though objects and redraw those that exist within the position\n\t\tthis.children.forEach( this._prepareSiblings.bind(this, item));\n\t}\n\n\t_prepareSiblings(item, sibling) {\n\n\t\t// Does this Object overlap with the focused object?\n\t\tif (!sibling.dirty && sibling.visible !== false && (intersect(sibling, item) || (item.past ? intersect(sibling, item.past) : false))) {\n\t\t\t// Nested clean\n\t\t\tthis.prepareChild(sibling);\n\t\t}\n\t}\n\n\tsort() {\n\t\t// Sort items by z-index\n\t\tthis.children.sort((a, b) => {\n\t\t\ta = a.zIndex || 0;\n\t\t\tb = b.zIndex || 0;\n\t\t\treturn +(a > b) || -(a < b);\n\t\t});\n\t}\n\n\t// Trigger the draw function\n\tdraw() {\n\n\t\tlet ctx = this.ctx;\n\n\t\t// Find items that have changed\n\t\t// Remove background\n\t\tthis.children.forEach((item) => {\n\n\t\t\tif (item.frame) {\n\t\t\t\titem.frame(ctx);\n\t\t\t}\n\n\t\t\tif (item.dirty && item.visible !== false) {\n\t\t\t\titem.draw(ctx);\n\t\t\t}\n\n\t\t\titem.dirty = false;\n\t\t});\n\t}\n\n\telementFromPoint(x, y) {\n\n\t\tvar target;\n\n\t\t// Find the canvas item which this targets?\n\t\tvar obj = {\n\t\t\tx: x,\n\t\t\ty: y,\n\t\t\tw: 1,\n\t\t\th: 1\n\t\t};\n\n\t\tthis.children.forEach((item) => {\n\n\t\t\tif (item.visible === false || !item.w || !item.h || item.pointerEvents === false) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Is this a target?\n\t\t\tif (intersect(obj, item)) {\n\t\t\t\t// Define this as a target\n\t\t\t\ttarget = item;\n\t\t\t}\n\t\t});\n\n\t\treturn target;\n\t}\n\n\t// The user has clicked an item on the page\n\taddEventListener(eventname, handler) {\n\n\t\t// Add to the events list\n\t\tif (!(eventname in this.events)) {\n\t\t\tthis.events[eventname] = [];\n\t\t}\n\n\t\tthis.events[eventname].push(handler);\n\t}\n\n\t// Dispatch\n\tdispatchEvent(e) {\n\t\tif (e.type in this.events)\n\t\t\tthis.events[e.type].forEach((handler) => handler(e));\n\t}\n\n\t// Find and _dispatch\n\t_findAndDispatch(e) {\n\t\t// If this is not a pointerEvent lets just pass it through.\n\t\tif ((typeof MouseEvent !== 'undefined' && e instanceof MouseEvent) ||\n\t\t\t(typeof TouchEvent !== 'undefined' && e instanceof TouchEvent)) {\n\n\t\t\t// Find the canvas item which this targets?\n\t\t\tvar obj = {\n\t\t\t\tx: e.offsetX,\n\t\t\t\ty: e.offsetY,\n\t\t\t\tw: 1,\n\t\t\t\th: 1\n\t\t\t};\n\n\t\t\tthis.children.forEach((item) => {\n\n\t\t\t\tif (!item.visible || !item.w || !item.h || !item.pointerEvents) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Intersects?\n\t\t\t\tintersect(obj, item) && item.dispatchEvent(e);\n\t\t\t});\n\t\t}\n\t}\n}\n\n\n// Intersect\n// Given two objects with, x,y,w,h properties\n// Do their rectangular dimensions intersect?\n// return Boolean true false.\nfunction intersect(a,b){\n\treturn !( a.x>(b.x+b.w) ||\n\t(a.x+a.w)<b.x  ||\n\ta.y>(b.y+b.h) ||\n\t(a.y+a.h)<b.y );\n}\n\nfunction displaced(a,b) {\n\treturn (a.x !== b.x ||\n\ta.y !== b.y ||\n\ta.w !== b.w ||\n\ta.h !== b.h);\n}\n","export default (e) => {\n\te.stopPropagation = () => {};\n\te.preventDefault = () => {};\n\treturn e;\n};\n","// IE does not support `new Event()`\n// See https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events for details\nlet createEvent = (eventname) => {return new Event(eventname);};\ntry {\n\tcreateEvent('test');\n}\ncatch (e) {\n\tcreateEvent = (eventname) => {\n\t\tlet e = document.createEvent('Event');\n\t\te.initEvent(eventname, true, true);\n\t\treturn e;\n\t};\n}\n\nexport default createEvent;\n","// Was the current event userInitiated?\nexport default (e = window.event) => {\n\tif (!e || typeof e !== 'object') {\n\t\treturn false;\n\t}\n\treturn !!('which' in e ? e.which : 'button' in e);\n};\n","// requestAnimationFrame polyfill\nwindow.requestAnimationFrame =\n\twindow.requestAnimationFrame ||\n\twindow.webkitRequestAnimationFrame ||\n\twindow.mozRequestAnimationFrame ||\n\twindow.oRequestAnimationFrame ||\n\twindow.msRequestAnimationFrame ||\n\tfunction (callback) {\n\t\tsetTimeout(callback, 1000 / 60);\n\t};\n\nexport default window.requestAnimationFrame.bind(window);\n"]}