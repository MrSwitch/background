(()=>{window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||(e=>setTimeout(e,1e3/60));var J=window.requestAnimationFrame.bind(window);var E={bubbles:!0,cancelable:!0},m=(e,t=E)=>new Event(e,t);try{m("test")}catch{m=(e,t=E)=>{let i=document.createEvent("Event");return i.initEvent(e,!!t.bubbles,!!t.cancelable),i}}var x=m;var M=e=>(e.stopPropagation=()=>{},e.preventDefault=()=>{},e);var f=(e,t)=>t&&e instanceof t;var q=typeof HTMLElement<"u"&&HTMLElement||typeof Element<"u"&&Element,C=typeof HTMLDocument<"u"&&HTMLDocument||typeof Document<"u"&&Document,F=window.constructor,S=e=>f(e,q)||f(e,C)||f(e,F);function O(e){return Array.prototype.slice.call(e)}var P=O;var g=(e,t=()=>{})=>(S(e)?e=[e]:typeof e=="string"&&(e=document.querySelectorAll(e)),f(e,Array)||(e=P(e)),t&&e.forEach(t),e);var k=/[\s,]+/,X=!1;try{let e=Object.defineProperty({},"passive",{get(){X=!0}});window.addEventListener("test",null,e)}catch{}var c=(e,t,i,s=!1)=>(typeof s=="object"&&s.passive&&!X&&(s=!1),t=t.split(k),g(e,o=>t.forEach(h=>o.addEventListener(h,i,s))));var T=window.navigator.pointerEnabled,N=T?"MSPointerMove pointerMove":"mousemove touchmove",U=T?"MSPointerDown pointerDown":"mousedown touchstart",j=T?"MSPointerUp pointerUp":"mouseup touchend touchcancel",v=(e,t,i,s)=>{let o={},h={},w={};c(document,N,n=>{if($(n))return;let r=n.pointerId||0,d=o[r];if(d&&typeof d=="function"){let a=h[r];b(n,a),d(n,a)}h[r]=n}),c(document,j,n=>{let r=n.pointerId||0;o[r]=null,(n.type==="touchend"||n.type==="touchcancel")&&(n=h[r]);let d=w[r];d&&d(n),w[r]=null}),g(e,n=>{c(n,"selectstart",()=>!1),c(n,U,r=>{let d=r.pointerId||0;b(r),h[d]=r,o[d]=(a,I)=>{t.call(n,a,I,r)},s&&(w[d]=a=>{b(a,r),s.call(n,a,r)}),i&&i.call(n,r)})})};function b(e,t){if(e.gesture={},e&&e.touches&&e.touches.length>0?e.gesture.touches=e.touches:e.gesture.touches=[e],e.gesture.screenX=e.gesture.touches[0].screenX,e.gesture.screenY=e.gesture.touches[0].screenY,"screenX"in e||(e.screenX=e.gesture.screenX),"screenY"in e||(e.screenY=e.gesture.screenY),t){e.gesture.deltaTime=e.timeStamp-t.timeStamp;let i=e.gesture.deltaX=e.gesture.screenX-t.gesture.screenX,s=e.gesture.deltaY=e.gesture.screenY-t.gesture.screenY;Math.abs(s)>Math.abs(i)?e.gesture.direction=s>0?"up":"down":e.gesture.direction=i>0?"right":"left",e.gesture.distance=Math.sqrt(i*i+s*s),e.gesture.velocity=e.gesture.distance/e.gesture.deltaTime}}function $(e){return(e.pointerType||e.type).match(/mouse/i)&&(e.which||e.buttons)!==1}var{gesture:V}=v,_=(e,t)=>v(e,function(i,s,o){V(i,o),i.gesture.type=`drag${i.gesture.direction}`,t.call(this,i)},function(i){i.gesture.type="start",t.call(this,i)},function(i){let s=i.gesture;s.deltaTime<200&&s.distance>20&&s.velocity>.3?s.type=`swipe${s.direction}`:s.distance<20?s.type="click":s.type="release",t.call(this,i)});var z="background",Y=["click","mousedown","mouseup","mouseover","mousemove","mouseout","frame","resize","keydown"],L=["touchmove","touchstart","touchend"],B=/[\s,]+/,p=class{constructor(t){let i;if(this.events={},"getContext"in document.createElement("canvas")){t&&t instanceof HTMLCanvasElement?(this.target=t,i=t.parentNode):(i=t,t=document.createElement("canvas"),t.style.backgroundColor="white",i||(i=document.body,t.style.cssText="position:fixed;z-index:-1;top:0;left:0;",t.setAttribute("tabindex",0),document.documentElement.style.cssText="min-height:100%;",document.body.style.cssText="min-height:100%;",window.addEventListener("resize",this.resize.bind(this))),i.insertBefore(t,i.firstElementChild),this.target=t,this.resize()),this.ctx=t.getContext("2d"),this.ctx.save(),this._time=0,this._fps=0,this.draw(),c(this.target,Y.toString(),this.dispatchEvent.bind(this),{passive:!0}),c(this.target,L.toString(),this.dispatchTouchEvent.bind(this),{passive:!0}),i===document.body&&t.style.getPropertyValue("z-index")==="-1"&&(c(document,Y.toString(),this.dispatchEvent.bind(this),{passive:!0}),c(document,L.toString(),this.dispatchTouchEvent.bind(this),{passive:!0}));{let s=this.target.style,o=s.getPropertyValue("z-index");window.addEventListener("hashchange",D.bind(s,o)),D.call(s,o)}this.swipe&&_(this.target,this.swipe.bind(this))}}get width(){return this.target.width}set width(t){this.target.width=t}get height(){return this.target.height}set height(t){this.target.height=t}get fps(){return this._fps}set fps(t){this._fps=t;let i=new Date().getTime();i-this._time>1e3&&(this._time=i,this._fps=0)}resize(){let t=this.target.parentNode===document.body?document.documentElement:this.target.parentNode,i=t.clientHeight,s=t.clientWidth,o=!1;this.width!==s&&(o=!0,this.width=s),this.height!==i&&(o=!0,this.height=i),o&&this.target.dispatchEvent(x("resize"))}clear(){this.ctx.clearRect(0,0,this.target.width,this.target.height)}bringToFront(){window.location.hash=z}draw(){this.fps++,this.target.dispatchEvent(x("frame")),requestAnimationFrame(this.draw.bind(this))}addEventListener(t,i){t.split(B).forEach(s=>{s in this.events||(this.events[s]=[]),this.events[s].push(i)})}dispatchEvent(t){t.type in this.events&&(t.currentTarget===document&&(t=M({type:t.type,target:this.target,offsetX:t.pageX||t.offsetX,offsetY:t.pageY||t.offsetY})),this.events[t.type].forEach(s=>s(t)),t.stopPropagation())}dispatchTouchEvent(t){let i=(t.touches||t.changedTouches)[0];i&&(t.offsetX=Math.abs(i.pageX||i.screenX),t.offsetY=Math.abs(i.pageY||i.screenY)),this.dispatchEvent(t)}};function D(e){let t="z-index";window.location.hash===`#${z}`&&(e=1e4),e!==void 0?this.setProperty(t,e):this.removeProperty(t)}var W=["click","mousedown","mouseup","mouseover","mousemove","mouseout","touchmove","touchstart","touchend","frame"],l=class{constructor(t){this.children=[],this.events=[],this.init(t)}init(t){this.target=t,this.ctx=t.getContext("2d"),c(t,W.toString(),this._findAndDispatch.bind(this),{passive:!0})}push(t){t.dirty=!0,this.children.indexOf(t)===-1&&(t.setup&&t.setup(this),this.children.push(t))}findIndex(t){return this.children.findIndex(t)}find(t){return this.children.find(t)}get length(){return this.children.length}set length(t){this.children.length=t}prepare(){this.children.forEach(t=>{t.dirty===!0&&this.prepareChild(t)})}prepareChild(t){let i=this.ctx;t.dirty!=="pending"&&(t.dirty="pending",i.clearRect(t.x,t.y,t.w,t.h),t.previous&&G(t.previous,t)&&i.clearRect(t.previous.x,t.previous.y,t.previous.w,t.previous.h),this.children.forEach(this._prepareSiblings.bind(this,t)))}_prepareSiblings(t,i){!i.dirty&&i.visible!==!1&&(y(i,t)||t.past&&y(i,t.past))&&this.prepareChild(i)}sort(){this.children.sort((t,i)=>(t=t.zIndex||0,i=i.zIndex||0,+(t>i)||-(t<i)))}draw(){let t=this.ctx;this.children.forEach(i=>{i.frame&&i.frame(t),i.dirty&&i.visible!==!1&&i.draw(t),i.dirty=!1})}elementFromPoint(t,i){let s,o={x:t,y:i,w:1,h:1};return this.children.forEach(h=>{h.visible===!1||!h.w||!h.h||h.pointerEvents===!1||y(o,h)&&(s=h)}),s}addEventListener(t,i){t in this.events||(this.events[t]=[]),this.events[t].push(i)}dispatchEvent(t){t.type in this.events&&this.events[t.type].forEach(i=>i(t))}_findAndDispatch(t){if(typeof MouseEvent<"u"&&t instanceof MouseEvent||typeof TouchEvent<"u"&&t instanceof TouchEvent){let i={x:t.offsetX,y:t.offsetY,w:1,h:1};this.children.forEach(s=>{!s.visible||!s.w||!s.h||!s.pointerEvents||y(i,s)&&s.dispatchEvent(t)})}}};function y(e,t){return!(e.x>t.x+t.w||e.x+e.w<t.x||e.y>t.y+t.h||e.y+e.h<t.y)}function G(e,t){return e.x!==t.x||e.y!==t.y||e.w!==t.w||e.h!==t.h}var R=e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1;var K=2*Math.PI,Z=500,A=class{constructor(t,i,s){this.cx=t,this.cy=i,this.r=s,this.fillStyle="black",this.t=1,this.calc()}calc(){let t=this.r;this.x=this.cx-t,this.y=this.cy-t,this.w=t*2,this.h=t*2}draw(t){let i=this.t;t.fillStyle=`rgba(0,0,0,${i/10})`,t.beginPath(),t.arc(this.cx,this.cy,this.r,0,K,!1),t.fill()}frame(){this.t-=.01,this.t<=0?(this.t=0,this.visible=!1):(this.visible=!0,this.r=R(1-this.t)*Z,this.calc(),this.dirty=!0)}},u=new p,H=new l(u.target);u.addEventListener("frame",()=>{u.ctx.clearRect(0,0,u.width,u.height),H.draw()});u.addEventListener("click",e=>{let t=new A(e.offsetX,e.offsetY,1);H.push(t)});})();
//# sourceMappingURL=ripple.js.map
