{"version":3,"sources":["dist/node_modules/browser-pack/_prelude.js","dist/node_modules/tricks/events/createDummyEvent.js","dist/node_modules/tricks/events/createEvent.js","dist/node_modules/tricks/object/Queue.js","dist/node_modules/tricks/support/requestAnimationFrame.js","dist/src/classes/Background.js","dist/src/classes/canvas.js","dist/src/classes/collection.js","dist/src/tiledOfLife.js"],"names":[],"mappings":"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","file":"tiledOfLife.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","module.exports = e => {\n\te.stopPropagation = () => {};\n\te.preventDefault = () => {};\n\treturn e;\n};\n","// IE does not support `new Event()`\n// See https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events for details\nconst dict = {bubbles: true, cancelable: true};\n\nlet createEvent = (eventname, options = dict) =>\n\tnew Event(eventname, options);\n\ntry {\n\tcreateEvent('test');\n}\ncatch (e) {\n\tcreateEvent = (eventname, options = dict) => {\n\t\tconst e = document.createEvent('Event');\n\t\te.initEvent(eventname, !!options.bubbles, !!options.cancelable);\n\t\treturn e;\n\t};\n}\n\nmodule.exports = createEvent;\n","// Create a queuing function\n// Queues items in an Array like function until a handler has been defined\n// Then each item will be processed against the handler.\n// Useful for creating Global Asynchronous Queues, as can be retro fitted to existing arrays.\n\nmodule.exports = class Queue {\n\n\tconstructor (arr, handler) {\n\t\tthis.items = (Array.isArray(arr) ? arr : []);\n\t\tthis.handler = handler;\n\t}\n\n\t// Mimic the Array.push function\n\tpush (...args) {\n\n\t\t// Append items to the internal array.\n\t\targs.forEach(item => this.items.push(item));\n\n\t\t// Trigger the custom handler\n\t\tif (this._handler) {\n\t\t\targs.forEach(item => this._handler(item));\n\t\t}\n\t}\n\n\t// Mimic the length\n\tget length () {\n\t\treturn this.items.length;\n\t}\n\tset length (value) {\n\t\treturn this.items.length = value;\n\t}\n\n\t// Set the item handler\n\tget handler () {\n\t\treturn this._handler;\n\t}\n\n\tset handler (callback) {\n\n\t\tthis._handler = callback;\n\n\t\tif (this._handler) {\n\t\t\tthis.items.forEach(item => this._handler(item));\n\t\t}\n\t}\n};\n","// requestAnimationFrame polyfill\nwindow.requestAnimationFrame =\n\twindow.requestAnimationFrame ||\n\twindow.webkitRequestAnimationFrame ||\n\twindow.mozRequestAnimationFrame ||\n\twindow.oRequestAnimationFrame ||\n\twindow.msRequestAnimationFrame ||\n\t(callback => setTimeout(callback, 1000 / 60));\n\nmodule.exports = window.requestAnimationFrame.bind(window);\n","// Background\n// Exposes the basic properties/methods of a controllable background\n\nimport Queue from 'tricks/object/Queue';\n\n// Extract the window.background items\nconst queue = window.background = new Queue(window.background);\n\nfunction queueHandler(callback) {\n\t// Each item in the queue should be a function\n\tcallback(Background);\n}\n\nexport default class Background {\n\n\tstatic add(stage) {\n\t\t// Store the\n\t\tBackground.stages.push(stage);\n\n\t\t// Trigger ready if it has not already been set\n\t\tif (Background.stages.length === 1) {\n\t\t\t// Initiate the queue\n\t\t\tqueue.handler = queueHandler;\n\t\t}\n\t}\n\n\t// Create a new instance of a stage\n\tstatic init(target) {\n\t\t// Get the default stage which has been registered with this class\n\t\tconst stage = Background.stages[0];\n\n\t\t// Return instance\n\t\tif (stage) {\n\t\t\treturn new stage(target);\n\t\t}\n\t}\n}\n\nBackground.stages = [];\n","// Setup\n// This constructs the canvas object\n\n// Includes\nimport 'tricks/support/requestAnimationFrame';\nimport createEvent from 'tricks/events/createEvent';\nimport createDummyEvent from 'tricks/events/createDummyEvent';\n\n// Constants\nconst BACKGROUND_HASH = 'background';\nconst UserEvents = ['click', 'mousedown', 'mouseup', 'mouseover', 'mousemove', 'mouseout', 'frame', 'resize'];\nconst TouchEvents = ['touchmove', 'touchstart', 'touchend'];\n\nconst EVENT_SEPARATOR = /[\\s\\,]+/;\n\nexport default class Canvas {\n\n\t// Construct the Canvas Element\n\t// @param canvas should be an root element container for this imagery.\n\tconstructor(canvas) {\n\n\t\tlet parent;\n\n\t\t// events\n\t\tthis.events = {};\n\n\t\t// browser check\n\t\tif (!('getContext' in document.createElement('canvas'))) {\n\t\t\t// browser doesn't support canvas\n\t\t\treturn;\n\t\t}\n\n\t\tif (!(canvas && canvas instanceof HTMLCanvasElement)) {\n\n\t\t\t// Set the parent\n\t\t\tparent = canvas;\n\n\t\t\t// Create the canvas layer\n\t\t\tcanvas = document.createElement('canvas');\n\t\t\tcanvas.style.backgroundColor = 'white';\n\n\t\t\t// Not a parent\n\t\t\tif (!parent) {\n\t\t\t\t// Append to the body\n\t\t\t\tparent = document.body;\n\t\t\t\tcanvas.style.cssText = 'position:fixed;z-index:-1;top:0;left:0;';\n\t\t\t\tcanvas.setAttribute('tabindex', 0);\n\n\t\t\t\tdocument.documentElement.style.cssText = 'min-height:100%;';\n\t\t\t\tdocument.body.style.cssText = 'min-height:100%;';\n\n\t\t\t\t// Bind window resize events\n\t\t\t\twindow.addEventListener('resize', this.resize.bind(this));\n\t\t\t}\n\n\t\t\t// Append this element\n\t\t\tparent.insertBefore(canvas, parent.firstElementChild);\n\n\t\t\tthis.target = canvas;\n\n\t\t\tthis.resize();\n\t\t}\n\t\telse {\n\t\t\tthis.target = canvas;\n\t\t\tparent = canvas.parentNode;\n\t\t}\n\n\t\tthis.ctx = canvas.getContext('2d');\n\n\t\t// Set initial save point\n\t\tthis.ctx.save();\n\n\t\t// Initiate the time\n\t\tthis._time = 0;\n\t\tthis._fps = 0;\n\n\t\t// Initiate the draw\n\t\tthis.draw();\n\n\t\t// Bind events\n\t\tUserEvents.forEach(eventname => this.target.addEventListener(eventname, this.dispatchEvent.bind(this)));\n\n\t\t// Format Touch events\n\t\tTouchEvents.forEach(eventname => this.target.addEventListener(eventname, this.dispatchTouchEvent.bind(this)));\n\n\t\t// In IE user-events aren't propagated to elements which have negative z-Index's\n\t\t// Listen to events on the document element and propagate those accordingly\n\t\tif (parent === document.body && canvas.style.getPropertyValue('z-index') === '-1') {\n\t\t\t// Bind events\n\t\t\tUserEvents.forEach(eventname => document.addEventListener(eventname, this.dispatchEvent.bind(this)));\n\n\t\t\t// Format Touch events\n\t\t\tTouchEvents.forEach(eventname => document.addEventListener(eventname, this.dispatchTouchEvent.bind(this)));\n\t\t}\n\n\t\t// Listen to hashChange events\n\t\t{\n\t\t\t// HASH CHANGE DEPTH\n\t\t\tconst style = this.target.style;\n\t\t\tconst initialZ = style.getPropertyValue('z-index');\n\t\t\t// Listen to changes to the background hash to bring the canvas element to the front\n\t\t\twindow.addEventListener('hashchange', hashchange.bind(style, initialZ));\n\n\t\t\thashchange.call(style, initialZ);\n\t\t}\n\t}\n\n\t// ensure its keeping up.\n\tget width() {\n\t\treturn this.target.width;\n\t}\n\tset width(value) {\n\t\tthis.target.width = value;\n\t\treturn value;\n\t}\n\n\tget height() {\n\t\treturn this.target.height;\n\t}\n\tset height(value) {\n\t\tthis.target.height = value;\n\t\treturn value;\n\t}\n\tget fps() {\n\t\treturn this._fps;\n\t}\n\tset fps(value) {\n\n\t\tthis._fps = value;\n\n\t\tconst now = (new Date()).getTime();\n\n\t\tif ((now - this._time) > 1000) {\n\t\t\t// console.log('fps: %d', this._fps);\n\t\t\tthis._time = now;\n\t\t\tthis._fps = 0;\n\t\t}\n\t}\n\n\n\tresize() {\n\t\tconst parent = (this.target.parentNode === document.body) ? document.documentElement : this.target.parentNode;\n\t\tconst height = parent.clientHeight;\n\t\tconst width = parent.clientWidth;\n\t\tlet changed = false;\n\n\t\tif (this.width !== width) {\n\t\t\tchanged = true;\n\t\t\tthis.width = width;\n\t\t}\n\t\tif (this.height !== height) {\n\t\t\tchanged = true;\n\t\t\tthis.height = height;\n\t\t}\n\n\t\tif (changed) {\n\t\t\tthis.target.dispatchEvent(createEvent('resize'));\n\t\t}\n\t}\n\n\tclear() {\n\t\tthis.ctx.clearRect(0, 0, this.target.width, this.target.height);\n\t}\n\n\t// Bring the content of the canvas to the front\n\tbringToFront() {\n\n\t\t// Update the window.location with the hash #background\n\t\twindow.location.hash = BACKGROUND_HASH;\n\t}\n\n\t// Trigger the draw function\n\tdraw() {\n\n\t\t// Increment the number of frames\n\t\tthis.fps++;\n\n\t\t// Call the frame function in the context of the frame to draw\n\t\tthis.target.dispatchEvent(createEvent('frame'));\n\n\t\t// Request another frame\n\t\trequestAnimationFrame(this.draw.bind(this));\n\t}\n\n\t// The user has clicked an item on the page\n\taddEventListener(eventnames, handler) {\n\n\t\teventnames.split(EVENT_SEPARATOR).forEach(eventname => {\n\t\t\t// Add to the events list\n\t\t\tif (!(eventname in this.events)) {\n\t\t\t\tthis.events[eventname] = [];\n\t\t\t}\n\n\t\t\tthis.events[eventname].push(handler);\n\t\t});\n\t}\n\n\t// Dispatch\n\tdispatchEvent(e) {\n\n\t\tif (e.type in this.events) {\n\n\t\t\tconst target = e.currentTarget;\n\n\t\t\t// This was triggered using event delegation, aka in the background\n\t\t\tif (target === document) {\n\n\t\t\t\te = createDummyEvent({\n\t\t\t\t\ttype: e.type,\n\t\t\t\t\ttarget: this.target,\n\t\t\t\t\toffsetX: e.pageX || e.offsetX,\n\t\t\t\t\toffsetY: e.pageY || e.offsetY\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.events[e.type].forEach(handler => handler(e));\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t}\n\t}\n\n\t// Dispatch\n\tdispatchTouchEvent(e) {\n\t\t// If this was a touch event\n\t\t// Determine the offset to the canvas element relative to the item being clicked\n\t\tconst touch = (e.touches || e.changedTouches)[0];\n\t\tif (touch) {\n\t\t\te.offsetX = Math.abs(touch.pageX || touch.screenX);\n\t\t\te.offsetY = Math.abs(touch.pageY || touch.screenY);\n\t\t}\n\n\t\tthis.dispatchEvent(e);\n\t}\n}\n\n\nfunction hashchange(z) {\n\n\tconst zIndex = 'z-index';\n\n\tif (window.location.hash === `#${ BACKGROUND_HASH}`) {\n\t\tz = 10000;\n\t}\n\n\tif (z !== undefined) {\n\t\t// Set the z-Index\n\t\tthis.setProperty(zIndex, z);\n\t}\n\telse {\n\t\t// Remove the z-Index\n\t\tthis.removeProperty(zIndex);\n\t}\n}\n","// Collection\n\nconst UserEvents = ['click', 'mousedown', 'mouseup', 'mouseover', 'mousemove', 'mouseout', 'touchmove', 'touchstart', 'touchend', 'frame'];\n\nexport default class Collection {\n\n\tconstructor(target) {\n\t\t// Create an empty children\n\t\tthis.children = [];\n\n\t\t// Events\n\t\tthis.events = [];\n\n\t\t// setup the canvas element\n\t\tthis.init(target);\n\t}\n\n\t// listen to canvas events\n\tinit (target) {\n\n\t\t// Define the canvas object as the target for the collection\n\t\tthis.target = target;\n\n\t\t// Define the CTX\n\t\tthis.ctx = target.getContext('2d');\n\n\t\t// listen to user interactive events and trigger those on items\n\t\tUserEvents.forEach(eventname => target.addEventListener(eventname, this._findAndDispatch.bind(this)));\n\n\t}\n\n\tpush(item) {\n\t\titem.dirty = true;\n\n\t\t// Is this item already in the collection?\n\t\tif (this.children.indexOf(item) === -1) {\n\t\t\tif (item.setup) {\n\t\t\t\titem.setup(this);\n\t\t\t}\n\n\t\t\t// item.addEventListener('dirty', this.prepareChild.bind(this, item));\n\t\t\tthis.children.push(item);\n\t\t}\n\t}\n\n\tget length () {\n\t\treturn this.children.length;\n\t}\n\tset length (v) {\n\t\treturn this.children.length = v;\n\t}\n\n\n\t// Touch\n\t// Mark items and objects in the same space to be redrawn\n\tprepare() {\n\t\tthis.children.forEach(item => {\n\t\t\tif (item.dirty === true)\n\t\t\t\tthis.prepareChild(item);\n\t\t});\n\t}\n\n\t// Clean Item\n\tprepareChild(item) {\n\n\t\tconst ctx = this.ctx;\n\n\t\tif (item.dirty === 'pending') {\n\t\t\treturn;\n\t\t}\n\n\t\t// Mark this item as dirty\n\t\titem.dirty = 'pending';\n\n\t\t// Remove from Canvas\n\t\tctx.clearRect(item.x, item.y, item.w, item.h);\n\n\t\t// If the items old position is different\n\t\tif (item.past && displaced(item.past, item)) {\n\t\t\tctx.clearRect(item.past.x, item.past.y, item.past.w, item.past.h);\n\t\t}\n\n\t\t// Loop though objects and redraw those that exist within the position\n\t\tthis.children.forEach(this._prepareSiblings.bind(this, item));\n\t}\n\n\t_prepareSiblings(item, sibling) {\n\n\t\t// Does this Object overlap with the focused object?\n\t\tif (!sibling.dirty && sibling.visible !== false && (intersect(sibling, item) || (item.past ? intersect(sibling, item.past) : false))) {\n\t\t\t// Nested clean\n\t\t\tthis.prepareChild(sibling);\n\t\t}\n\t}\n\n\tsort() {\n\t\t// Sort items by z-index\n\t\tthis.children.sort((a, b) => {\n\t\t\ta = a.zIndex || 0;\n\t\t\tb = b.zIndex || 0;\n\t\t\treturn +(a > b) || -(a < b);\n\t\t});\n\t}\n\n\t// Trigger the draw function\n\tdraw() {\n\n\t\tconst ctx = this.ctx;\n\n\t\t// Find items that have changed\n\t\t// Remove background\n\t\tthis.children.forEach(item => {\n\n\t\t\tif (item.frame) {\n\t\t\t\titem.frame(ctx);\n\t\t\t}\n\n\t\t\tif (item.dirty && item.visible !== false) {\n\t\t\t\titem.draw(ctx);\n\t\t\t}\n\n\t\t\titem.dirty = false;\n\t\t});\n\t}\n\n\telementFromPoint(x, y) {\n\n\t\tlet target;\n\n\t\t// Find the canvas item which this targets?\n\t\tconst obj = {\n\t\t\tx,\n\t\t\ty,\n\t\t\tw: 1,\n\t\t\th: 1\n\t\t};\n\n\t\tthis.children.forEach(item => {\n\n\t\t\tif (item.visible === false || !item.w || !item.h || item.pointerEvents === false) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Is this a target?\n\t\t\tif (intersect(obj, item)) {\n\t\t\t\t// Define this as a target\n\t\t\t\ttarget = item;\n\t\t\t}\n\t\t});\n\n\t\treturn target;\n\t}\n\n\t// The user has clicked an item on the page\n\taddEventListener(eventname, handler) {\n\n\t\t// Add to the events list\n\t\tif (!(eventname in this.events)) {\n\t\t\tthis.events[eventname] = [];\n\t\t}\n\n\t\tthis.events[eventname].push(handler);\n\t}\n\n\t// Dispatch\n\tdispatchEvent(e) {\n\t\tif (e.type in this.events)\n\t\t\tthis.events[e.type].forEach(handler => handler(e));\n\t}\n\n\t// Find and _dispatch\n\t_findAndDispatch(e) {\n\t\t// If this is not a pointerEvent lets just pass it through.\n\t\tif ((typeof MouseEvent !== 'undefined' && e instanceof MouseEvent) ||\n\t\t\t(typeof TouchEvent !== 'undefined' && e instanceof TouchEvent)) {\n\n\t\t\t// Find the canvas item which this targets?\n\t\t\tconst obj = {\n\t\t\t\tx: e.offsetX,\n\t\t\t\ty: e.offsetY,\n\t\t\t\tw: 1,\n\t\t\t\th: 1\n\t\t\t};\n\n\t\t\tthis.children.forEach(item => {\n\n\t\t\t\tif (!item.visible || !item.w || !item.h || !item.pointerEvents) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Intersects?\n\t\t\t\tintersect(obj, item) && item.dispatchEvent(e);\n\t\t\t});\n\t\t}\n\t}\n}\n\n\n// Intersect\n// Given two objects with, x,y,w,h properties\n// Do their rectangular dimensions intersect?\n// return Boolean true false.\nfunction intersect(a, b) {\n\treturn !(a.x > (b.x + b.w) ||\n\t(a.x + a.w) < b.x ||\n\ta.y > (b.y + b.h) ||\n\t(a.y + a.h) < b.y);\n}\n\nfunction displaced(a, b) {\n\treturn (a.x !== b.x ||\n\ta.y !== b.y ||\n\ta.w !== b.w ||\n\ta.h !== b.h);\n}\n","// TiledOfLife, Canvas annimation\n// Copyright Andrew Dodson, March 2013\n\n// Get Canvas\nimport Canvas from './classes/canvas';\nimport Collection from './classes/collection';\nimport Background from './classes/background';\n\n// Create a new tile\nclass Tile {\n\n\tconstructor(...args) {\n\n\t\tthis.i = Math.round(Math.random() * this.n);\n\t\tthis.ascending = !Math.round(Math.random());\n\t\tthis.dx = 0;\n\t\tthis.dy = 0;\n\t\tthis.grid = [];\n\t\tthis.position(...args);\n\t}\n\n\tget n() {\n\t\treturn 100;\n\t}\n\n\tposition(x, y, w, h) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.w = w;\n\t\tthis.h = h;\n\t}\n\tdraw(ctx) {\n\n\t\tif (this.dx || this.dy) {\n\t\t\tctx.translate(this.dx, this.dy);\n\t\t}\n\n\t\tctx.fillStyle = this.fillStyle;\n\t\tctx.fillRect(this.x, this.y, this.w, this.h);\n\n\t\tif (this.dx || this.dy) {\n\t\t\t// reset\n\t\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\t}\n\t}\n\tsetup() {}\n\tframe() {\n\n\t\tthis.dirty = true;\n\n\t\tlet opacity = this.i;\n\n\t\tif (this.dx || this.dy) {\n\t\t\tthis.dy *= 0.9;\n\t\t\tthis.dx *= 0.9;\n\t\t\tif (Math.abs(this.dx) < 0.1) {\n\t\t\t\tthis.dx = 0;\n\t\t\t}\n\t\t\tif (Math.abs(this.dy) < 0.1) {\n\t\t\t\tthis.dy = 0;\n\t\t\t}\n\t\t}\n\n\t\tif (pointer) {\n\n\t\t\tconst [mx, my] = [pointer.offsetX, pointer.offsetY];\n\t\t\tlet dx = mx - this.x;\n\t\t\tlet dy = my - this.y;\n\n\t\t\tif (Math.abs(dx) < radius &&\n\t\t\t\tMath.abs(dy) < radius &&\n\t\t\t\t(Math.pow(dx, 2) + Math.pow(dy, 2) < Math.pow(radius, 2))) {\n\n\n\t\t\t\tdx = 0.3 * (Math.abs(dx) / dx) * -(radius - Math.abs(dx));\n\t\t\t\tdy = 0.3 * (Math.abs(dy) / dy) * -(radius - Math.abs(dy));\n\n\t\t\t\t// sometimes we get a NaN, catch and set those\n\t\t\t\tif (!dx) {\n\t\t\t\t\tdx = 0;\n\t\t\t\t}\n\t\t\t\tif (!dy) {\n\t\t\t\t\tdy = 0;\n\t\t\t\t}\n\n\t\t\t\tthis.dx += (dx - this.dx) * 0.5;\n\t\t\t\tthis.dy += (dy - this.dy) * 0.5;\n\n\n\t\t\t\t// If this is on the left, highlight\n\t\t\t\t// else, gray out if on the left\n\t\t\t\tif (mx > this.x) {\n\t\t\t\t\topacity = (opacity / 2) + (this.n / 2);\n\t\t\t\t}\n\t\t\t\tif (mx < this.x) {\n\t\t\t\t\topacity = opacity / 2;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.fillStyle = `rgba(0, 0, 0, ${opacity ? opacity / this.n : 0})`;\n\n\t\tif (this.i <= 0) {\n\t\t\tthis.ascending = true;\n\t\t}\n\t\telse if (this.i >= this.n) {\n\t\t\tthis.ascending = false;\n\t\t}\n\n\t\tthis.i += this.ascending ? 1 : -1;\n\t}\n}\n\nclass Stage {\n\tconstructor(target) {\n\n\t\tconst canvas = new Canvas(target);\n\t\tconst collection = new Collection(canvas.target);\n\n\t\tthis.canvas = canvas;\n\t\tthis.collection = collection;\n\n\t\tcanvas.addEventListener('mousemove', action.bind(this));\n\t\tcanvas.addEventListener('touchmove', action.bind(this));\n\t\tcanvas.addEventListener('resize', setup.bind(this));\n\n\t\tcanvas.addEventListener('frame', () => {\n\n\t// Clear canvas\n\t\t\tcanvas.clear();\n\n\t// Draw items\n\t\t\tcollection.draw();\n\t\t});\n\n\t\tthis.tiles = [];\n\n\t\tsetup.call(this);\n\n\t}\n}\n\n\n// Canvas\nconst radius = 80;\nlet pointer;\n\n// Add Stage to the background\nBackground.add(Stage);\n\n\nfunction setup() {\n\n\tconst canvas = this.canvas;\n\tconst tiles = this.tiles;\n\tconst collection = this.collection;\n\n\tlet h;\n\tlet w;\n\tw = h = 40;\n\n\tconst nx = Math.floor(canvas.width / w);\n\tconst ny = Math.floor(canvas.height / h);\n\n\tw += Math.floor((canvas.width % (nx * w)) / nx);\n\th += Math.floor((canvas.height % (ny * h)) / ny);\n\n\tfor (let i = 0; i < nx; i++) {\n\t\tfor (let j = 0; j < ny; j++) {\n\n\t\t\tlet tile = tiles[((i * ny) + j)];\n\n\t\t\t// %100\n\n\t\t\tif (!tile) {\n\t\t\t\ttile = new Tile((i * w) + 1, (j * h) + 1, w - 1, h - 1);\n\t\t\t\tcollection.push(tile);\n\t\t\t\ttiles.push(tile);\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttile.position((i * w) + 1, (j * h) + 1, w - 1, h - 1);\n\t\t\t}\n\t\t\ttile.grid = [i, j];\n\t\t}\n\t}\n}\n\nlet timer;\nfunction action(e) {\n\tpointer = e;\n\n\tif (timer) {\n\t\tclearTimeout(timer);\n\t}\n\ttimer = setTimeout(() => {\n\t\tpointer = null;\n\t}, 1e2);\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvdHJpY2tzL2V2ZW50cy9jcmVhdGVEdW1teUV2ZW50LmpzIiwibm9kZV9tb2R1bGVzL3RyaWNrcy9ldmVudHMvY3JlYXRlRXZlbnQuanMiLCJub2RlX21vZHVsZXMvdHJpY2tzL29iamVjdC9RdWV1ZS5qcyIsIm5vZGVfbW9kdWxlcy90cmlja3Mvc3VwcG9ydC9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuanMiLCJzcmMvY2xhc3Nlcy9CYWNrZ3JvdW5kLmpzIiwic3JjL2NsYXNzZXMvY2FudmFzLmpzIiwic3JjL2NsYXNzZXMvY29sbGVjdGlvbi5qcyIsInNyYy90aWxlZE9mTGlmZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsT0FBTyxPQUFQLEdBQWlCLGFBQUs7QUFDckIsR0FBRSxlQUFGLEdBQW9CLFlBQU0sQ0FBRSxDQUE1QjtBQUNBLEdBQUUsY0FBRixHQUFtQixZQUFNLENBQUUsQ0FBM0I7QUFDQSxRQUFPLENBQVA7QUFDQSxDQUpEOzs7OztBQ0FBO0FBQ0E7QUFDQSxJQUFNLE9BQU8sRUFBQyxTQUFTLElBQVYsRUFBZ0IsWUFBWSxJQUE1QixFQUFiOztBQUVBLElBQUksY0FBYyxxQkFBQyxTQUFEO0FBQUEsS0FBWSxPQUFaLHVFQUFzQixJQUF0QjtBQUFBLFFBQ2pCLElBQUksS0FBSixDQUFVLFNBQVYsRUFBcUIsT0FBckIsQ0FEaUI7QUFBQSxDQUFsQjs7QUFHQSxJQUFJO0FBQ0gsYUFBWSxNQUFaO0FBQ0EsQ0FGRCxDQUdBLE9BQU8sQ0FBUCxFQUFVO0FBQ1QsZUFBYyxxQkFBQyxTQUFELEVBQStCO0FBQUEsTUFBbkIsT0FBbUIsdUVBQVQsSUFBUzs7QUFDNUMsTUFBTSxJQUFJLFNBQVMsV0FBVCxDQUFxQixPQUFyQixDQUFWO0FBQ0EsSUFBRSxTQUFGLENBQVksU0FBWixFQUF1QixDQUFDLENBQUMsUUFBUSxPQUFqQyxFQUEw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LE9BQUksQ0FBQyxJQUFMLEVBQVc7QUFDVixXQUFPLElBQUksSUFBSixDQUFVLElBQUksQ0FBTCxHQUFVLENBQW5CLEVBQXVCLElBQUksQ0FBTCxHQUFVLENBQWhDLEVBQW1DLElBQUksQ0FBdkMsRUFBMEMsSUFBSSxDQUE5QyxDQUFQO0FBQ0EsZUFBVyxJQUFYLENBQWdCLElBQWhCO0FBQ0EsVUFBTSxJQUFOLENBQVcsSUFBWDtBQUNBLElBSkQsTUFLSztBQUNKLFNBQUssUUFBTCxDQUFlLElBQUksQ0FBTCxHQUFVLENBQXhCLEVBQTRCLElBQUksQ0FBTCxHQUFVLENBQXJDLEVBQXdDLElBQUksQ0FBNUMsRUFBK0MsSUFBSSxDQUFuRDtBQUNBO0FBQ0QsUUFBSyxJQUFMLEdBQVksQ0FBQyxDQUFELEVBQUksQ0FBSixDQUFaO0FBQ0E7QUFDRDtBQUNEOztBQUVELElBQUksY0FBSjtBQUNBLFNBQVMsTUFBVCxDQUFnQixDQUFoQixFQUFtQjtBQUNsQixXQUFVLENBQVY7O0FBRUEsS0FBSSxLQUFKLEVBQVc7QUFDVixlQUFhLEtBQWI7QUFDQTtBQUNELFNBQVEsV0FBVyxZQUFNO0FBQ3hCLFlBQVUsSUFBVjtBQUNBLEVBRk8sRUFFTCxHQUZLLENBQVI7QUFHQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJtb2R1bGUuZXhwb3J0cyA9IGUgPT4ge1xuXHRlLnN0b3BQcm9wYWdhdGlvbiA9ICgpID0+IHt9O1xuXHRlLnByZXZlbnREZWZhdWx0ID0gKCkgPT4ge307XG5cdHJldHVybiBlO1xufTtcbiIsIi8vIElFIGRvZXMgbm90IHN1cHBvcnQgYG5ldyBFdmVudCgpYFxuLy8gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0d1aWRlL0V2ZW50cy9DcmVhdGluZ19hbmRfdHJpZ2dlcmluZ19ldmVudHMgZm9yIGRldGFpbHNcbmNvbnN0IGRpY3QgPSB7YnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogdHJ1ZX07XG5cbmxldCBjcmVhdGVFdmVudCA9IChldmVudG5hbWUsIG9wdGlvbnMgPSBkaWN0KSA9PlxuXHRuZXcgRXZlbnQoZXZlbnRuYW1lLCBvcHRpb25zKTtcblxudHJ5IHtcblx0Y3JlYXRlRXZlbnQoJ3Rlc3QnKTtcbn1cbmNhdGNoIChlKSB7XG5cdGNyZWF0ZUV2ZW50ID0gKGV2ZW50bmFtZSwgb3B0aW9ucyA9IGRpY3QpID0+IHtcblx0XHRjb25zdCBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG5cdFx0ZS5pbml0RXZlbnQoZXZlbnRuYW1lLCAhIW9wdGlvbnMuYnViYmxlcywgISFvcHRpb25zLmNhbmNlbGFibGUpO1xuXHRcdHJldHVybiBlO1xuXHR9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZUV2ZW50O1xuIiwiLy8gQ3JlYXRlIGEgcXVldWluZyBmdW5jdGlvblxuLy8gUXVldWVzIGl0ZW1zIGluIGFuIEFycmF5IGxpa2UgZnVuY3Rpb24gdW50aWwgYSBoYW5kbGVyIGhhcyBiZWVuIGRlZmluZWRcbi8vIFRoZW4gZWFjaCBpdGVtIHdpbGwgYmUgcHJvY2Vzc2VkIGFnYWluc3QgdGhlIGhhbmRsZXIuXG4vLyBVc2VmdWwgZm9yIGNyZWF0aW5nIEdsb2JhbCBBc3luY2hyb25vdXMgUXVldWVzLCBhcyBjYW4gYmUgcmV0cm8gZml0dGVkIHRvIGV4aXN0aW5nIGFycmF5cy5cblxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBRdWV1ZSB7XG5cblx0Y29uc3RydWN0b3IgKGFyciwgaGFuZGxlcikge1xuXHRcdHRoaXMuaXRlbXMgPSAoQXJyYXkuaXNBcnJheShhcnIpID8gYXJyIDogW10pO1xuXHRcdHRoaXMuaGFuZGxlciA9IGhhbmRsZXI7XG5cdH1cblxuXHQvLyBNaW1pYyB0aGUgQXJyYXkucHVzaCBmdW5jdGlvblxuXHRwdXNoICguLi5hcmdzKSB7XG5cblx0XHQvLyBBcHBlbmQgaXRlbXMgdG8gdGhlIGludGVybmFsIGFycmF5LlxuXHRcdGFyZ3MuZm9yRWFjaChpdGVtID0+IHRoaXMuaXRlbXMucHVzaChpdGVtKSk7XG5cblx0XHQvLyBUcmlnZ2VyIHRoZSBjdXN0b20gaGFuZGxlclxuXHRcdGlmICh0aGlzLl9oYW5kbGVyKSB7XG5cdFx0XHRhcmdzLmZvckVhY2goaXRlbSA9PiB0aGlzLl9oYW5kbGVyKGl0ZW0pKTtcblx0XHR9XG5cdH1cblxuXHQvLyBNaW1pYyB0aGUgbGVuZ3RoXG5cdGdldCBsZW5ndGggKCkge1xuXHRcdHJldHVybiB0aGlzLml0ZW1zLmxlbmd0aDtcblx0fVxuXHRzZXQgbGVuZ3RoICh2YWx1ZSkge1xuXHRcdHJldHVybiB0aGlzLml0ZW1zLmxlbmd0aCA9IHZhbHVlO1xuXHR9XG5cblx0Ly8gU2V0IHRoZSBpdGVtIGhhbmRsZXJcblx0Z2V0IGhhbmRsZXIgKCkge1xuXHRcdHJldHVybiB0aGlzLl9oYW5kbGVyO1xuXHR9XG5cblx0c2V0IGhhbmRsZXIgKGNhbGxiYWNrKSB7XG5cblx0XHR0aGlzLl9oYW5kbGVyID0gY2FsbGJhY2s7XG5cblx0XHRpZiAodGhpcy5faGFuZGxlcikge1xuXHRcdFx0dGhpcy5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4gdGhpcy5faGFuZGxlcihpdGVtKSk7XG5cdFx0fVxuXHR9XG59O1xuIiwiLy8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHBvbHlmaWxsXG53aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID1cblx0d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuXHR3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG5cdHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcblx0d2luZG93Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcblx0d2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG5cdChjYWxsYmFjayA9PiBzZXRUaW1lb3V0KGNhbGxiYWNrLCAxMDAwIC8gNjApKTtcblxubW9kdWxlLmV4cG9ydHMgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lLmJpbmQod2luZG93KTtcbiIsIi8vIEJhY2tncm91bmRcbi8vIEV4cG9zZXMgdGhlIGJhc2ljIHByb3BlcnRpZXMvbWV0aG9kcyBvZiBhIGNvbnRyb2xsYWJsZSBiYWNrZ3JvdW5kXG5cbmltcG9ydCBRdWV1ZSBmcm9tICd0cmlja3Mvb2JqZWN0L1F1ZXVlJztcblxuLy8gRXh0cmFjdCB0aGUgd2luZG93LmJhY2tncm91bmQgaXRlbXNcbmNvbnN0IHF1ZXVlID0gd2luZG93LmJhY2tncm91bmQgPSBuZXcgUXVldWUod2luZG93LmJhY2tncm91bmQpO1xuXG5mdW5jdGlvbiBxdWV1ZUhhbmRsZXIoY2FsbGJhY2spIHtcblx0Ly8gRWFjaCBpdGVtIGluIHRoZSBxdWV1ZSBzaG91bGQgYmUgYSBmdW5jdGlvblxuXHRjYWxsYmFjayhCYWNrZ3JvdW5kKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFja2dyb3VuZCB7XG5cblx0c3RhdGljIGFkZChzdGFnZSkge1xuXHRcdC8vIFN0b3JlIHRoZVxuXHRcdEJhY2tncm91bmQuc3RhZ2VzLnB1c2goc3RhZ2UpO1xuXG5cdFx0Ly8gVHJpZ2dlciByZWFkeSBpZiBpdCBoYXMgbm90IGFscmVhZHkgYmVlbiBzZXRcblx0XHRpZiAoQmFja2dyb3VuZC5zdGFnZXMubGVuZ3RoID09PSAxKSB7XG5cdFx0XHQvLyBJbml0aWF0ZSB0aGUgcXVldWVcblx0XHRcdHF1ZXVlLmhhbmRsZXIgPSBxdWV1ZUhhbmRsZXI7XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIGEgc3RhZ2Vcblx0c3RhdGljIGluaXQodGFyZ2V0KSB7XG5cdFx0Ly8gR2V0IHRoZSBkZWZhdWx0IHN0YWdlIHdoaWNoIGhhcyBiZWVuIHJlZ2lzdGVyZWQgd2l0aCB0aGlzIGNsYXNzXG5cdFx0Y29uc3Qgc3RhZ2UgPSBCYWNrZ3JvdW5kLnN0YWdlc1swXTtcblxuXHRcdC8vIFJldHVybiBpbnN0YW5jZVxuXHRcdGlmIChzdGFnZSkge1xuXHRcdFx0cmV0dXJuIG5ldyBzdGFnZSh0YXJnZXQpO1xuXHRcdH1cblx0fVxufVxuXG5CYWNrZ3JvdW5kLnN0YWdlcyA9IFtdO1xuIiwiLy8gU2V0dXBcbi8vIFRoaXMgY29uc3RydWN0cyB0aGUgY2FudmFzIG9iamVjdFxuXG4vLyBJbmNsdWRlc1xuaW1wb3J0ICd0cmlja3Mvc3VwcG9ydC9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUnO1xuaW1wb3J0IGNyZWF0ZUV2ZW50IGZyb20gJ3RyaWNrcy9ldmVudHMvY3JlYXRlRXZlbnQnO1xuaW1wb3J0IGNyZWF0ZUR1bW15RXZlbnQgZnJvbSAndHJpY2tzL2V2ZW50cy9jcmVhdGVEdW1teUV2ZW50JztcblxuLy8gQ29uc3RhbnRzXG5jb25zdCBCQUNLR1JPVU5EX0hBU0ggPSAnYmFja2dyb3VuZCc7XG5jb25zdCBVc2VyRXZlbnRzID0gWydjbGljaycsICdtb3VzZWRvd24nLCAnbW91c2V1cCcsICdtb3VzZW92ZXInLCAnbW91c2Vtb3ZlJywgJ21vdXNlb3V0JywgJ2ZyYW1lJywgJ3Jlc2l6ZSddO1xuY29uc3QgVG91Y2hFdmVudHMgPSBbJ3RvdWNobW92ZScsICd0b3VjaHN0YXJ0JywgJ3RvdWNoZW5kJ107XG5cbmNvbnN0IEVWRU5UX1NFUEFSQVRPUiA9IC9bXFxzXFwsXSsvO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYW52YXMge1xuXG5cdC8vIENvbnN0cnVjdCB0aGUgQ2FudmFzIEVsZW1lbnRcblx0Ly8gQHBhcmFtIGNhbnZhcyBzaG91bGQgYmUgYW4gcm9vdCBlbGVtZW50IGNvbnRhaW5lciBmb3IgdGhpcyBpbWFnZXJ5LlxuXHRjb25zdHJ1Y3RvcihjYW52YXMpIHtcblxuXHRcdGxldCBwYXJlbnQ7XG5cblx0XHQvLyBldmVudHNcblx0XHR0aGlzLmV2ZW50cyA9IHt9O1xuXG5cdFx0Ly8gYnJvd3NlciBjaGVja1xuXHRcdGlmICghKCdnZXRDb250ZXh0JyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKSkpIHtcblx0XHRcdC8vIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IGNhbnZhc1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICghKGNhbnZhcyAmJiBjYW52YXMgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkpIHtcblxuXHRcdFx0Ly8gU2V0IHRoZSBwYXJlbnRcblx0XHRcdHBhcmVudCA9IGNhbnZhcztcblxuXHRcdFx0Ly8gQ3JlYXRlIHRoZSBjYW52YXMgbGF5ZXJcblx0XHRcdGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuXHRcdFx0Y2FudmFzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd3aGl0ZSc7XG5cblx0XHRcdC8vIE5vdCBhIHBhcmVudFxuXHRcdFx0aWYgKCFwYXJlbnQpIHtcblx0XHRcdFx0Ly8gQXBwZW5kIHRvIHRoZSBib2R5XG5cdFx0XHRcdHBhcmVudCA9IGRvY3VtZW50LmJvZHk7XG5cdFx0XHRcdGNhbnZhcy5zdHlsZS5jc3NUZXh0ID0gJ3Bvc2l0aW9uOmZpeGVkO3otaW5kZXg6LTE7dG9wOjA7bGVmdDowOyc7XG5cdFx0XHRcdGNhbnZhcy5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgMCk7XG5cblx0XHRcdFx0ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLmNzc1RleHQgPSAnbWluLWhlaWdodDoxMDAlOyc7XG5cdFx0XHRcdGRvY3VtZW50LmJvZHkuc3R5bGUuY3NzVGV4dCA9ICdtaW4taGVpZ2h0OjEwMCU7JztcblxuXHRcdFx0XHQvLyBCaW5kIHdpbmRvdyByZXNpemUgZXZlbnRzXG5cdFx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnJlc2l6ZS5iaW5kKHRoaXMpKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQXBwZW5kIHRoaXMgZWxlbWVudFxuXHRcdFx0cGFyZW50Lmluc2VydEJlZm9yZShjYW52YXMsIHBhcmVudC5maXJzdEVsZW1lbnRDaGlsZCk7XG5cblx0XHRcdHRoaXMudGFyZ2V0ID0gY2FudmFzO1xuXG5cdFx0XHR0aGlzLnJlc2l6ZSgpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHRoaXMudGFyZ2V0ID0gY2FudmFzO1xuXHRcdFx0cGFyZW50ID0gY2FudmFzLnBhcmVudE5vZGU7XG5cdFx0fVxuXG5cdFx0dGhpcy5jdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuXHRcdC8vIFNldCBpbml0aWFsIHNhdmUgcG9pbnRcblx0XHR0aGlzLmN0eC5zYXZlKCk7XG5cblx0XHQvLyBJbml0aWF0ZSB0aGUgdGltZVxuXHRcdHRoaXMuX3RpbWUgPSAwO1xuXHRcdHRoaXMuX2ZwcyA9IDA7XG5cblx0XHQvLyBJbml0aWF0ZSB0aGUgZHJhd1xuXHRcdHRoaXMuZHJhdygpO1xuXG5cdFx0Ly8gQmluZCBldmVudHNcblx0XHRVc2VyRXZlbnRzLmZvckVhY2goZXZlbnRuYW1lID0+IHRoaXMudGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRuYW1lLCB0aGlzLmRpc3BhdGNoRXZlbnQuYmluZCh0aGlzKSkpO1xuXG5cdFx0Ly8gRm9ybWF0IFRvdWNoIGV2ZW50c1xuXHRcdFRvdWNoRXZlbnRzLmZvckVhY2goZXZlbnRuYW1lID0+IHRoaXMudGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRuYW1lLCB0aGlzLmRpc3BhdGNoVG91Y2hFdmVudC5iaW5kKHRoaXMpKSk7XG5cblx0XHQvLyBJbiBJRSB1c2VyLWV2ZW50cyBhcmVuJ3QgcHJvcGFnYXRlZCB0byBlbGVtZW50cyB3aGljaCBoYXZlIG5lZ2F0aXZlIHotSW5kZXgnc1xuXHRcdC8vIExpc3RlbiB0byBldmVudHMgb24gdGhlIGRvY3VtZW50IGVsZW1lbnQgYW5kIHByb3BhZ2F0ZSB0aG9zZSBhY2NvcmRpbmdseVxuXHRcdGlmIChwYXJlbnQgPT09IGRvY3VtZW50LmJvZHkgJiYgY2FudmFzLnN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3otaW5kZXgnKSA9PT0gJy0xJykge1xuXHRcdFx0Ly8gQmluZCBldmVudHNcblx0XHRcdFVzZXJFdmVudHMuZm9yRWFjaChldmVudG5hbWUgPT4gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudG5hbWUsIHRoaXMuZGlzcGF0Y2hFdmVudC5iaW5kKHRoaXMpKSk7XG5cblx0XHRcdC8vIEZvcm1hdCBUb3VjaCBldmVudHNcblx0XHRcdFRvdWNoRXZlbnRzLmZvckVhY2goZXZlbnRuYW1lID0+IGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRuYW1lLCB0aGlzLmRpc3BhdGNoVG91Y2hFdmVudC5iaW5kKHRoaXMpKSk7XG5cdFx0fVxuXG5cdFx0Ly8gTGlzdGVuIHRvIGhhc2hDaGFuZ2UgZXZlbnRzXG5cdFx0e1xuXHRcdFx0Ly8gSEFTSCBDSEFOR0UgREVQVEhcblx0XHRcdGNvbnN0IHN0eWxlID0gdGhpcy50YXJnZXQuc3R5bGU7XG5cdFx0XHRjb25zdCBpbml0aWFsWiA9IHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3otaW5kZXgnKTtcblx0XHRcdC8vIExpc3RlbiB0byBjaGFuZ2VzIHRvIHRoZSBiYWNrZ3JvdW5kIGhhc2ggdG8gYnJpbmcgdGhlIGNhbnZhcyBlbGVtZW50IHRvIHRoZSBmcm9udFxuXHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCBoYXNoY2hhbmdlLmJpbmQoc3R5bGUsIGluaXRpYWxaKSk7XG5cblx0XHRcdGhhc2hjaGFuZ2UuY2FsbChzdHlsZSwgaW5pdGlhbFopO1xuXHRcdH1cblx0fVxuXG5cdC8vIGVuc3VyZSBpdHMga2VlcGluZyB1cC5cblx0Z2V0IHdpZHRoKCkge1xuXHRcdHJldHVybiB0aGlzLnRhcmdldC53aWR0aDtcblx0fVxuXHRzZXQgd2lkdGgodmFsdWUpIHtcblx0XHR0aGlzLnRhcmdldC53aWR0aCA9IHZhbHVlO1xuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxuXG5cdGdldCBoZWlnaHQoKSB7XG5cdFx0cmV0dXJuIHRoaXMudGFyZ2V0LmhlaWdodDtcblx0fVxuXHRzZXQgaGVpZ2h0KHZhbHVlKSB7XG5cdFx0dGhpcy50YXJnZXQuaGVpZ2h0ID0gdmFsdWU7XG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9XG5cdGdldCBmcHMoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX2Zwcztcblx0fVxuXHRzZXQgZnBzKHZhbHVlKSB7XG5cblx0XHR0aGlzLl9mcHMgPSB2YWx1ZTtcblxuXHRcdGNvbnN0IG5vdyA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XG5cblx0XHRpZiAoKG5vdyAtIHRoaXMuX3RpbWUpID4gMTAwMCkge1xuXHRcdFx0Ly8gY29uc29sZS5sb2coJ2ZwczogJWQnLCB0aGlzLl9mcHMpO1xuXHRcdFx0dGhpcy5fdGltZSA9IG5vdztcblx0XHRcdHRoaXMuX2ZwcyA9IDA7XG5cdFx0fVxuXHR9XG5cblxuXHRyZXNpemUoKSB7XG5cdFx0Y29uc3QgcGFyZW50ID0gKHRoaXMudGFyZ2V0LnBhcmVudE5vZGUgPT09IGRvY3VtZW50LmJvZHkpID8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IDogdGhpcy50YXJnZXQucGFyZW50Tm9kZTtcblx0XHRjb25zdCBoZWlnaHQgPSBwYXJlbnQuY2xpZW50SGVpZ2h0O1xuXHRcdGNvbnN0IHdpZHRoID0gcGFyZW50LmNsaWVudFdpZHRoO1xuXHRcdGxldCBjaGFuZ2VkID0gZmFsc2U7XG5cblx0XHRpZiAodGhpcy53aWR0aCAhPT0gd2lkdGgpIHtcblx0XHRcdGNoYW5nZWQgPSB0cnVlO1xuXHRcdFx0dGhpcy53aWR0aCA9IHdpZHRoO1xuXHRcdH1cblx0XHRpZiAodGhpcy5oZWlnaHQgIT09IGhlaWdodCkge1xuXHRcdFx0Y2hhbmdlZCA9IHRydWU7XG5cdFx0XHR0aGlzLmhlaWdodCA9IGhlaWdodDtcblx0XHR9XG5cblx0XHRpZiAoY2hhbmdlZCkge1xuXHRcdFx0dGhpcy50YXJnZXQuZGlzcGF0Y2hFdmVudChjcmVhdGVFdmVudCgncmVzaXplJykpO1xuXHRcdH1cblx0fVxuXG5cdGNsZWFyKCkge1xuXHRcdHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLnRhcmdldC53aWR0aCwgdGhpcy50YXJnZXQuaGVpZ2h0KTtcblx0fVxuXG5cdC8vIEJyaW5nIHRoZSBjb250ZW50IG9mIHRoZSBjYW52YXMgdG8gdGhlIGZyb250XG5cdGJyaW5nVG9Gcm9udCgpIHtcblxuXHRcdC8vIFVwZGF0ZSB0aGUgd2luZG93LmxvY2F0aW9uIHdpdGggdGhlIGhhc2ggI2JhY2tncm91bmRcblx0XHR3aW5kb3cubG9jYXRpb24uaGFzaCA9IEJBQ0tHUk9VTkRfSEFTSDtcblx0fVxuXG5cdC8vIFRyaWdnZXIgdGhlIGRyYXcgZnVuY3Rpb25cblx0ZHJhdygpIHtcblxuXHRcdC8vIEluY3JlbWVudCB0aGUgbnVtYmVyIG9mIGZyYW1lc1xuXHRcdHRoaXMuZnBzKys7XG5cblx0XHQvLyBDYWxsIHRoZSBmcmFtZSBmdW5jdGlvbiBpbiB0aGUgY29udGV4dCBvZiB0aGUgZnJhbWUgdG8gZHJhd1xuXHRcdHRoaXMudGFyZ2V0LmRpc3BhdGNoRXZlbnQoY3JlYXRlRXZlbnQoJ2ZyYW1lJykpO1xuXG5cdFx0Ly8gUmVxdWVzdCBhbm90aGVyIGZyYW1lXG5cdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuZHJhdy5iaW5kKHRoaXMpKTtcblx0fVxuXG5cdC8vIFRoZSB1c2VyIGhhcyBjbGlja2VkIGFuIGl0ZW0gb24gdGhlIHBhZ2Vcblx0YWRkRXZlbnRMaXN0ZW5lcihldmVudG5hbWVzLCBoYW5kbGVyKSB7XG5cblx0XHRldmVudG5hbWVzLnNwbGl0KEVWRU5UX1NFUEFSQVRPUikuZm9yRWFjaChldmVudG5hbWUgPT4ge1xuXHRcdFx0Ly8gQWRkIHRvIHRoZSBldmVudHMgbGlzdFxuXHRcdFx0aWYgKCEoZXZlbnRuYW1lIGluIHRoaXMuZXZlbnRzKSkge1xuXHRcdFx0XHR0aGlzLmV2ZW50c1tldmVudG5hbWVdID0gW107XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuZXZlbnRzW2V2ZW50bmFtZV0ucHVzaChoYW5kbGVyKTtcblx0XHR9KTtcblx0fVxuXG5cdC8vIERpc3BhdGNoXG5cdGRpc3BhdGNoRXZlbnQoZSkge1xuXG5cdFx0aWYgKGUudHlwZSBpbiB0aGlzLmV2ZW50cykge1xuXG5cdFx0XHRjb25zdCB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQ7XG5cblx0XHRcdC8vIFRoaXMgd2FzIHRyaWdnZXJlZCB1c2luZyBldmVudCBkZWxlZ2F0aW9uLCBha2EgaW4gdGhlIGJhY2tncm91bmRcblx0XHRcdGlmICh0YXJnZXQgPT09IGRvY3VtZW50KSB7XG5cblx0XHRcdFx0ZSA9IGNyZWF0ZUR1bW15RXZlbnQoe1xuXHRcdFx0XHRcdHR5cGU6IGUudHlwZSxcblx0XHRcdFx0XHR0YXJnZXQ6IHRoaXMudGFyZ2V0LFxuXHRcdFx0XHRcdG9mZnNldFg6IGUucGFnZVggfHwgZS5vZmZzZXRYLFxuXHRcdFx0XHRcdG9mZnNldFk6IGUucGFnZVkgfHwgZS5vZmZzZXRZXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLmV2ZW50c1tlLnR5cGVdLmZvckVhY2goaGFuZGxlciA9PiBoYW5kbGVyKGUpKTtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gRGlzcGF0Y2hcblx0ZGlzcGF0Y2hUb3VjaEV2ZW50KGUpIHtcblx0XHQvLyBJZiB0aGlzIHdhcyBhIHRvdWNoIGV2ZW50XG5cdFx0Ly8gRGV0ZXJtaW5lIHRoZSBvZmZzZXQgdG8gdGhlIGNhbnZhcyBlbGVtZW50IHJlbGF0aXZlIHRvIHRoZSBpdGVtIGJlaW5nIGNsaWNrZWRcblx0XHRjb25zdCB0b3VjaCA9IChlLnRvdWNoZXMgfHwgZS5jaGFuZ2VkVG91Y2hlcylbMF07XG5cdFx0aWYgKHRvdWNoKSB7XG5cdFx0XHRlLm9mZnNldFggPSBNYXRoLmFicyh0b3VjaC5wYWdlWCB8fCB0b3VjaC5zY3JlZW5YKTtcblx0XHRcdGUub2Zmc2V0WSA9IE1hdGguYWJzKHRvdWNoLnBhZ2VZIHx8IHRvdWNoLnNjcmVlblkpO1xuXHRcdH1cblxuXHRcdHRoaXMuZGlzcGF0Y2hFdmVudChlKTtcblx0fVxufVxuXG5cbmZ1bmN0aW9uIGhhc2hjaGFuZ2Uoeikge1xuXG5cdGNvbnN0IHpJbmRleCA9ICd6LWluZGV4JztcblxuXHRpZiAod2luZG93LmxvY2F0aW9uLmhhc2ggPT09IGAjJHsgQkFDS0dST1VORF9IQVNIfWApIHtcblx0XHR6ID0gMTAwMDA7XG5cdH1cblxuXHRpZiAoeiAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0Ly8gU2V0IHRoZSB6LUluZGV4XG5cdFx0dGhpcy5zZXRQcm9wZXJ0eSh6SW5kZXgsIHopO1xuXHR9XG5cdGVsc2Uge1xuXHRcdC8vIFJlbW92ZSB0aGUgei1JbmRleFxuXHRcdHRoaXMucmVtb3ZlUHJvcGVydHkoekluZGV4KTtcblx0fVxufVxuIiwiLy8gQ29sbGVjdGlvblxuXG5jb25zdCBVc2VyRXZlbnRzID0gWydjbGljaycsICdtb3VzZWRvd24nLCAnbW91c2V1cCcsICdtb3VzZW92ZXInLCAnbW91c2Vtb3ZlJywgJ21vdXNlb3V0JywgJ3RvdWNobW92ZScsICd0b3VjaHN0YXJ0JywgJ3RvdWNoZW5kJywgJ2ZyYW1lJ107XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbGxlY3Rpb24ge1xuXG5cdGNvbnN0cnVjdG9yKHRhcmdldCkge1xuXHRcdC8vIENyZWF0ZSBhbiBlbXB0eSBjaGlsZHJlblxuXHRcdHRoaXMuY2hpbGRyZW4gPSBbXTtcblxuXHRcdC8vIEV2ZW50c1xuXHRcdHRoaXMuZXZlbnRzID0gW107XG5cblx0XHQvLyBzZXR1cCB0aGUgY2FudmFzIGVsZW1lbnRcblx0XHR0aGlzLmluaXQodGFyZ2V0KTtcblx0fVxuXG5cdC8vIGxpc3RlbiB0byBjYW52YXMgZXZlbnRzXG5cdGluaXQgKHRhcmdldCkge1xuXG5cdFx0Ly8gRGVmaW5lIHRoZSBjYW52YXMgb2JqZWN0IGFzIHRoZSB0YXJnZXQgZm9yIHRoZSBjb2xsZWN0aW9uXG5cdFx0dGhpcy50YXJnZXQgPSB0YXJnZXQ7XG5cblx0XHQvLyBEZWZpbmUgdGhlIENUWFxuXHRcdHRoaXMuY3R4ID0gdGFyZ2V0LmdldENvbnRleHQoJzJkJyk7XG5cblx0XHQvLyBsaXN0ZW4gdG8gdXNlciBpbnRlcmFjdGl2ZSBldmVudHMgYW5kIHRyaWdnZXIgdGhvc2Ugb24gaXRlbXNcblx0XHRVc2VyRXZlbnRzLmZvckVhY2goZXZlbnRuYW1lID0+IHRhcmdldC5hZGRFdmVudExpc3RlbmVyKGV2ZW50bmFtZSwgdGhpcy5fZmluZEFuZERpc3BhdGNoLmJpbmQodGhpcykpKTtcblxuXHR9XG5cblx0cHVzaChpdGVtKSB7XG5cdFx0aXRlbS5kaXJ0eSA9IHRydWU7XG5cblx0XHQvLyBJcyB0aGlzIGl0ZW0gYWxyZWFkeSBpbiB0aGUgY29sbGVjdGlvbj9cblx0XHRpZiAodGhpcy5jaGlsZHJlbi5pbmRleE9mKGl0ZW0pID09PSAtMSkge1xuXHRcdFx0aWYgKGl0ZW0uc2V0dXApIHtcblx0XHRcdFx0aXRlbS5zZXR1cCh0aGlzKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gaXRlbS5hZGRFdmVudExpc3RlbmVyKCdkaXJ0eScsIHRoaXMucHJlcGFyZUNoaWxkLmJpbmQodGhpcywgaXRlbSkpO1xuXHRcdFx0dGhpcy5jaGlsZHJlbi5wdXNoKGl0ZW0pO1xuXHRcdH1cblx0fVxuXG5cdGdldCBsZW5ndGggKCkge1xuXHRcdHJldHVybiB0aGlzLmNoaWxkcmVuLmxlbmd0aDtcblx0fVxuXHRzZXQgbGVuZ3RoICh2KSB7XG5cdFx0cmV0dXJuIHRoaXMuY2hpbGRyZW4ubGVuZ3RoID0gdjtcblx0fVxuXG5cblx0Ly8gVG91Y2hcblx0Ly8gTWFyayBpdGVtcyBhbmQgb2JqZWN0cyBpbiB0aGUgc2FtZSBzcGFjZSB0byBiZSByZWRyYXduXG5cdHByZXBhcmUoKSB7XG5cdFx0dGhpcy5jaGlsZHJlbi5mb3JFYWNoKGl0ZW0gPT4ge1xuXHRcdFx0aWYgKGl0ZW0uZGlydHkgPT09IHRydWUpXG5cdFx0XHRcdHRoaXMucHJlcGFyZUNoaWxkKGl0ZW0pO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gQ2xlYW4gSXRlbVxuXHRwcmVwYXJlQ2hpbGQoaXRlbSkge1xuXG5cdFx0Y29uc3QgY3R4ID0gdGhpcy5jdHg7XG5cblx0XHRpZiAoaXRlbS5kaXJ0eSA9PT0gJ3BlbmRpbmcnKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gTWFyayB0aGlzIGl0ZW0gYXMgZGlydHlcblx0XHRpdGVtLmRpcnR5ID0gJ3BlbmRpbmcnO1xuXG5cdFx0Ly8gUmVtb3ZlIGZyb20gQ2FudmFzXG5cdFx0Y3R4LmNsZWFyUmVjdChpdGVtLngsIGl0ZW0ueSwgaXRlbS53LCBpdGVtLmgpO1xuXG5cdFx0Ly8gSWYgdGhlIGl0ZW1zIG9sZCBwb3NpdGlvbiBpcyBkaWZmZXJlbnRcblx0XHRpZiAoaXRlbS5wYXN0ICYmIGRpc3BsYWNlZChpdGVtLnBhc3QsIGl0ZW0pKSB7XG5cdFx0XHRjdHguY2xlYXJSZWN0KGl0ZW0ucGFzdC54LCBpdGVtLnBhc3QueSwgaXRlbS5wYXN0LncsIGl0ZW0ucGFzdC5oKTtcblx0XHR9XG5cblx0XHQvLyBMb29wIHRob3VnaCBvYmplY3RzIGFuZCByZWRyYXcgdGhvc2UgdGhhdCBleGlzdCB3aXRoaW4gdGhlIHBvc2l0aW9uXG5cdFx0dGhpcy5jaGlsZHJlbi5mb3JFYWNoKHRoaXMuX3ByZXBhcmVTaWJsaW5ncy5iaW5kKHRoaXMsIGl0ZW0pKTtcblx0fVxuXG5cdF9wcmVwYXJlU2libGluZ3MoaXRlbSwgc2libGluZykge1xuXG5cdFx0Ly8gRG9lcyB0aGlzIE9iamVjdCBvdmVybGFwIHdpdGggdGhlIGZvY3VzZWQgb2JqZWN0P1xuXHRcdGlmICghc2libGluZy5kaXJ0eSAmJiBzaWJsaW5nLnZpc2libGUgIT09IGZhbHNlICYmIChpbnRlcnNlY3Qoc2libGluZywgaXRlbSkgfHwgKGl0ZW0ucGFzdCA/IGludGVyc2VjdChzaWJsaW5nLCBpdGVtLnBhc3QpIDogZmFsc2UpKSkge1xuXHRcdFx0Ly8gTmVzdGVkIGNsZWFuXG5cdFx0XHR0aGlzLnByZXBhcmVDaGlsZChzaWJsaW5nKTtcblx0XHR9XG5cdH1cblxuXHRzb3J0KCkge1xuXHRcdC8vIFNvcnQgaXRlbXMgYnkgei1pbmRleFxuXHRcdHRoaXMuY2hpbGRyZW4uc29ydCgoYSwgYikgPT4ge1xuXHRcdFx0YSA9IGEuekluZGV4IHx8IDA7XG5cdFx0XHRiID0gYi56SW5kZXggfHwgMDtcblx0XHRcdHJldHVybiArKGEgPiBiKSB8fCAtKGEgPCBiKTtcblx0XHR9KTtcblx0fVxuXG5cdC8vIFRyaWdnZXIgdGhlIGRyYXcgZnVuY3Rpb25cblx0ZHJhdygpIHtcblxuXHRcdGNvbnN0IGN0eCA9IHRoaXMuY3R4O1xuXG5cdFx0Ly8gRmluZCBpdGVtcyB0aGF0IGhhdmUgY2hhbmdlZFxuXHRcdC8vIFJlbW92ZSBiYWNrZ3JvdW5kXG5cdFx0dGhpcy5jaGlsZHJlbi5mb3JFYWNoKGl0ZW0gPT4ge1xuXG5cdFx0XHRpZiAoaXRlbS5mcmFtZSkge1xuXHRcdFx0XHRpdGVtLmZyYW1lKGN0eCk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChpdGVtLmRpcnR5ICYmIGl0ZW0udmlzaWJsZSAhPT0gZmFsc2UpIHtcblx0XHRcdFx0aXRlbS5kcmF3KGN0eCk7XG5cdFx0XHR9XG5cblx0XHRcdGl0ZW0uZGlydHkgPSBmYWxzZTtcblx0XHR9KTtcblx0fVxuXG5cdGVsZW1lbnRGcm9tUG9pbnQoeCwgeSkge1xuXG5cdFx0bGV0IHRhcmdldDtcblxuXHRcdC8vIEZpbmQgdGhlIGNhbnZhcyBpdGVtIHdoaWNoIHRoaXMgdGFyZ2V0cz9cblx0XHRjb25zdCBvYmogPSB7XG5cdFx0XHR4LFxuXHRcdFx0eSxcblx0XHRcdHc6IDEsXG5cdFx0XHRoOiAxXG5cdFx0fTtcblxuXHRcdHRoaXMuY2hpbGRyZW4uZm9yRWFjaChpdGVtID0+IHtcblxuXHRcdFx0aWYgKGl0ZW0udmlzaWJsZSA9PT0gZmFsc2UgfHwgIWl0ZW0udyB8fCAhaXRlbS5oIHx8IGl0ZW0ucG9pbnRlckV2ZW50cyA9PT0gZmFsc2UpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJcyB0aGlzIGEgdGFyZ2V0P1xuXHRcdFx0aWYgKGludGVyc2VjdChvYmosIGl0ZW0pKSB7XG5cdFx0XHRcdC8vIERlZmluZSB0aGlzIGFzIGEgdGFyZ2V0XG5cdFx0XHRcdHRhcmdldCA9IGl0ZW07XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gdGFyZ2V0O1xuXHR9XG5cblx0Ly8gVGhlIHVzZXIgaGFzIGNsaWNrZWQgYW4gaXRlbSBvbiB0aGUgcGFnZVxuXHRhZGRFdmVudExpc3RlbmVyKGV2ZW50bmFtZSwgaGFuZGxlcikge1xuXG5cdFx0Ly8gQWRkIHRvIHRoZSBldmVudHMgbGlzdFxuXHRcdGlmICghKGV2ZW50bmFtZSBpbiB0aGlzLmV2ZW50cykpIHtcblx0XHRcdHRoaXMuZXZlbnRzW2V2ZW50bmFtZV0gPSBbXTtcblx0XHR9XG5cblx0XHR0aGlzLmV2ZW50c1tldmVudG5hbWVdLnB1c2goaGFuZGxlcik7XG5cdH1cblxuXHQvLyBEaXNwYXRjaFxuXHRkaXNwYXRjaEV2ZW50KGUpIHtcblx0XHRpZiAoZS50eXBlIGluIHRoaXMuZXZlbnRzKVxuXHRcdFx0dGhpcy5ldmVudHNbZS50eXBlXS5mb3JFYWNoKGhhbmRsZXIgPT4gaGFuZGxlcihlKSk7XG5cdH1cblxuXHQvLyBGaW5kIGFuZCBfZGlzcGF0Y2hcblx0X2ZpbmRBbmREaXNwYXRjaChlKSB7XG5cdFx0Ly8gSWYgdGhpcyBpcyBub3QgYSBwb2ludGVyRXZlbnQgbGV0cyBqdXN0IHBhc3MgaXQgdGhyb3VnaC5cblx0XHRpZiAoKHR5cGVvZiBNb3VzZUV2ZW50ICE9PSAndW5kZWZpbmVkJyAmJiBlIGluc3RhbmNlb2YgTW91c2VFdmVudCkgfHxcblx0XHRcdCh0eXBlb2YgVG91Y2hFdmVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZSBpbnN0YW5jZW9mIFRvdWNoRXZlbnQpKSB7XG5cblx0XHRcdC8vIEZpbmQgdGhlIGNhbnZhcyBpdGVtIHdoaWNoIHRoaXMgdGFyZ2V0cz9cblx0XHRcdGNvbnN0IG9iaiA9IHtcblx0XHRcdFx0eDogZS5vZmZzZXRYLFxuXHRcdFx0XHR5OiBlLm9mZnNldFksXG5cdFx0XHRcdHc6IDEsXG5cdFx0XHRcdGg6IDFcblx0XHRcdH07XG5cblx0XHRcdHRoaXMuY2hpbGRyZW4uZm9yRWFjaChpdGVtID0+IHtcblxuXHRcdFx0XHRpZiAoIWl0ZW0udmlzaWJsZSB8fCAhaXRlbS53IHx8ICFpdGVtLmggfHwgIWl0ZW0ucG9pbnRlckV2ZW50cykge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEludGVyc2VjdHM/XG5cdFx0XHRcdGludGVyc2VjdChvYmosIGl0ZW0pICYmIGl0ZW0uZGlzcGF0Y2hFdmVudChlKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxufVxuXG5cbi8vIEludGVyc2VjdFxuLy8gR2l2ZW4gdHdvIG9iamVjdHMgd2l0aCwgeCx5LHcsaCBwcm9wZXJ0aWVzXG4vLyBEbyB0aGVpciByZWN0YW5ndWxhciBkaW1lbnNpb25zIGludGVyc2VjdD9cbi8vIHJldHVybiBCb29sZWFuIHRydWUgZmFsc2UuXG5mdW5jdGlvbiBpbnRlcnNlY3QoYSwgYikge1xuXHRyZXR1cm4gIShhLnggPiAoYi54ICsgYi53KSB8fFxuXHQoYS54ICsgYS53KSA8IGIueCB8fFxuXHRhLnkgPiAoYi55ICsgYi5oKSB8fFxuXHQoYS55ICsgYS5oKSA8IGIueSk7XG59XG5cbmZ1bmN0aW9uIGRpc3BsYWNlZChhLCBiKSB7XG5cdHJldHVybiAoYS54ICE9PSBiLnggfHxcblx0YS55ICE9PSBiLnkgfHxcblx0YS53ICE9PSBiLncgfHxcblx0YS5oICE9PSBiLmgpO1xufVxuIiwiLy8gVGlsZWRPZkxpZmUsIENhbnZhcyBhbm5pbWF0aW9uXG4vLyBDb3B5cmlnaHQgQW5kcmV3IERvZHNvbiwgTWFyY2ggMjAxM1xuXG4vLyBHZXQgQ2FudmFzXG5pbXBvcnQgQ2FudmFzIGZyb20gJy4vY2xhc3Nlcy9jYW52YXMnO1xuaW1wb3J0IENvbGxlY3Rpb24gZnJvbSAnLi9jbGFzc2VzL2NvbGxlY3Rpb24nO1xuaW1wb3J0IEJhY2tncm91bmQgZnJvbSAnLi9jbGFzc2VzL2JhY2tncm91bmQnO1xuXG4vLyBDcmVhdGUgYSBuZXcgdGlsZVxuY2xhc3MgVGlsZSB7XG5cblx0Y29uc3RydWN0b3IoLi4uYXJncykge1xuXG5cdFx0dGhpcy5pID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogdGhpcy5uKTtcblx0XHR0aGlzLmFzY2VuZGluZyA9ICFNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkpO1xuXHRcdHRoaXMuZHggPSAwO1xuXHRcdHRoaXMuZHkgPSAwO1xuXHRcdHRoaXMuZ3JpZCA9IFtdO1xuXHRcdHRoaXMucG9zaXRpb24oLi4uYXJncyk7XG5cdH1cblxuXHRnZXQgbigpIHtcblx0XHRyZXR1cm4gMTAwO1xuXHR9XG5cblx0cG9zaXRpb24oeCwgeSwgdywgaCkge1xuXHRcdHRoaXMueCA9IHg7XG5cdFx0dGhpcy55ID0geTtcblx0XHR0aGlzLncgPSB3O1xuXHRcdHRoaXMuaCA9IGg7XG5cdH1cblx0ZHJhdyhjdHgpIHtcblxuXHRcdGlmICh0aGlzLmR4IHx8IHRoaXMuZHkpIHtcblx0XHRcdGN0eC50cmFuc2xhdGUodGhpcy5keCwgdGhpcy5keSk7XG5cdFx0fVxuXG5cdFx0Y3R4LmZpbGxTdHlsZSA9IHRoaXMuZmlsbFN0eWxlO1xuXHRcdGN0eC5maWxsUmVjdCh0aGlzLngsIHRoaXMueSwgdGhpcy53LCB0aGlzLmgpO1xuXG5cdFx0aWYgKHRoaXMuZHggfHwgdGhpcy5keSkge1xuXHRcdFx0Ly8gcmVzZXRcblx0XHRcdGN0eC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgMCwgMCk7XG5cdFx0fVxuXHR9XG5cdHNldHVwKCkge31cblx0ZnJhbWUoKSB7XG5cblx0XHR0aGlzLmRpcnR5ID0gdHJ1ZTtcblxuXHRcdGxldCBvcGFjaXR5ID0gdGhpcy5pO1xuXG5cdFx0aWYgKHRoaXMuZHggfHwgdGhpcy5keSkge1xuXHRcdFx0dGhpcy5keSAqPSAwLjk7XG5cdFx0XHR0aGlzLmR4ICo9IDAuOTtcblx0XHRcdGlmIChNYXRoLmFicyh0aGlzLmR4KSA8IDAuMSkge1xuXHRcdFx0XHR0aGlzLmR4ID0gMDtcblx0XHRcdH1cblx0XHRcdGlmIChNYXRoLmFicyh0aGlzLmR5KSA8IDAuMSkge1xuXHRcdFx0XHR0aGlzLmR5ID0gMDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAocG9pbnRlcikge1xuXG5cdFx0XHRjb25zdCBbbXgsIG15XSA9IFtwb2ludGVyLm9mZnNldFgsIHBvaW50ZXIub2Zmc2V0WV07XG5cdFx0XHRsZXQgZHggPSBteCAtIHRoaXMueDtcblx0XHRcdGxldCBkeSA9IG15IC0gdGhpcy55O1xuXG5cdFx0XHRpZiAoTWF0aC5hYnMoZHgpIDwgcmFkaXVzICYmXG5cdFx0XHRcdE1hdGguYWJzKGR5KSA8IHJhZGl1cyAmJlxuXHRcdFx0XHQoTWF0aC5wb3coZHgsIDIpICsgTWF0aC5wb3coZHksIDIpIDwgTWF0aC5wb3cocmFkaXVzLCAyKSkpIHtcblxuXG5cdFx0XHRcdGR4ID0gMC4zICogKE1hdGguYWJzKGR4KSAvIGR4KSAqIC0ocmFkaXVzIC0gTWF0aC5hYnMoZHgpKTtcblx0XHRcdFx0ZHkgPSAwLjMgKiAoTWF0aC5hYnMoZHkpIC8gZHkpICogLShyYWRpdXMgLSBNYXRoLmFicyhkeSkpO1xuXG5cdFx0XHRcdC8vIHNvbWV0aW1lcyB3ZSBnZXQgYSBOYU4sIGNhdGNoIGFuZCBzZXQgdGhvc2Vcblx0XHRcdFx0aWYgKCFkeCkge1xuXHRcdFx0XHRcdGR4ID0gMDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIWR5KSB7XG5cdFx0XHRcdFx0ZHkgPSAwO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy5keCArPSAoZHggLSB0aGlzLmR4KSAqIDAuNTtcblx0XHRcdFx0dGhpcy5keSArPSAoZHkgLSB0aGlzLmR5KSAqIDAuNTtcblxuXG5cdFx0XHRcdC8vIElmIHRoaXMgaXMgb24gdGhlIGxlZnQsIGhpZ2hsaWdodFxuXHRcdFx0XHQvLyBlbHNlLCBncmF5IG91dCBpZiBvbiB0aGUgbGVmdFxuXHRcdFx0XHRpZiAobXggPiB0aGlzLngpIHtcblx0XHRcdFx0XHRvcGFjaXR5ID0gKG9wYWNpdHkgLyAyKSArICh0aGlzLm4gLyAyKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAobXggPCB0aGlzLngpIHtcblx0XHRcdFx0XHRvcGFjaXR5ID0gb3BhY2l0eSAvIDI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHR0aGlzLmZpbGxTdHlsZSA9IGByZ2JhKDAsIDAsIDAsICR7b3BhY2l0eSA/IG9wYWNpdHkgLyB0aGlzLm4gOiAwfSlgO1xuXG5cdFx0aWYgKHRoaXMuaSA8PSAwKSB7XG5cdFx0XHR0aGlzLmFzY2VuZGluZyA9IHRydWU7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKHRoaXMuaSA+PSB0aGlzLm4pIHtcblx0XHRcdHRoaXMuYXNjZW5kaW5nID0gZmFsc2U7XG5cdFx0fVxuXG5cdFx0dGhpcy5pICs9IHRoaXMuYXNjZW5kaW5nID8gMSA6IC0xO1xuXHR9XG59XG5cbmNsYXNzIFN0YWdlIHtcblx0Y29uc3RydWN0b3IodGFyZ2V0KSB7XG5cblx0XHRjb25zdCBjYW52YXMgPSBuZXcgQ2FudmFzKHRhcmdldCk7XG5cdFx0Y29uc3QgY29sbGVjdGlvbiA9IG5ldyBDb2xsZWN0aW9uKGNhbnZhcy50YXJnZXQpO1xuXG5cdFx0dGhpcy5jYW52YXMgPSBjYW52YXM7XG5cdFx0dGhpcy5jb2xsZWN0aW9uID0gY29sbGVjdGlvbjtcblxuXHRcdGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBhY3Rpb24uYmluZCh0aGlzKSk7XG5cdFx0Y2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGFjdGlvbi5iaW5kKHRoaXMpKTtcblx0XHRjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgc2V0dXAuYmluZCh0aGlzKSk7XG5cblx0XHRjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignZnJhbWUnLCAoKSA9PiB7XG5cblx0Ly8gQ2xlYXIgY2FudmFzXG5cdFx0XHRjYW52YXMuY2xlYXIoKTtcblxuXHQvLyBEcmF3IGl0ZW1zXG5cdFx0XHRjb2xsZWN0aW9uLmRyYXcoKTtcblx0XHR9KTtcblxuXHRcdHRoaXMudGlsZXMgPSBbXTtcblxuXHRcdHNldHVwLmNhbGwodGhpcyk7XG5cblx0fVxufVxuXG5cbi8vIENhbnZhc1xuY29uc3QgcmFkaXVzID0gODA7XG5sZXQgcG9pbnRlcjtcblxuLy8gQWRkIFN0YWdlIHRvIHRoZSBiYWNrZ3JvdW5kXG5CYWNrZ3JvdW5kLmFkZChTdGFnZSk7XG5cblxuZnVuY3Rpb24gc2V0dXAoKSB7XG5cblx0Y29uc3QgY2FudmFzID0gdGhpcy5jYW52YXM7XG5cdGNvbnN0IHRpbGVzID0gdGhpcy50aWxlcztcblx0Y29uc3QgY29sbGVjdGlvbiA9IHRoaXMuY29sbGVjdGlvbjtcblxuXHRsZXQgaDtcblx0bGV0IHc7XG5cdHcgPSBoID0gNDA7XG5cblx0Y29uc3QgbnggPSBNYXRoLmZsb29yKGNhbnZhcy53aWR0aCAvIHcpO1xuXHRjb25zdCBueSA9IE1hdGguZmxvb3IoY2FudmFzLmhlaWdodCAvIGgpO1xuXG5cdHcgKz0gTWF0aC5mbG9vcigoY2FudmFzLndpZHRoICUgKG54ICogdykpIC8gbngpO1xuXHRoICs9IE1hdGguZmxvb3IoKGNhbnZhcy5oZWlnaHQgJSAobnkgKiBoKSkgLyBueSk7XG5cblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBueDsgaSsrKSB7XG5cdFx0Zm9yIChsZXQgaiA9IDA7IGogPCBueTsgaisrKSB7XG5cblx0XHRcdGxldCB0aWxlID0gdGlsZXNbKChpICogbnkpICsgaildO1xuXG5cdFx0XHQvLyAlMTAwXG5cblx0XHRcdGlmICghdGlsZSkge1xuXHRcdFx0XHR0aWxlID0gbmV3IFRpbGUoKGkgKiB3KSArIDEsIChqICogaCkgKyAxLCB3IC0gMSwgaCAtIDEpO1xuXHRcdFx0XHRjb2xsZWN0aW9uLnB1c2godGlsZSk7XG5cdFx0XHRcdHRpbGVzLnB1c2godGlsZSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0dGlsZS5wb3NpdGlvbigoaSAqIHcpICsgMSwgKGogKiBoKSArIDEsIHcgLSAxLCBoIC0gMSk7XG5cdFx0XHR9XG5cdFx0XHR0aWxlLmdyaWQgPSBbaSwgal07XG5cdFx0fVxuXHR9XG59XG5cbmxldCB0aW1lcjtcbmZ1bmN0aW9uIGFjdGlvbihlKSB7XG5cdHBvaW50ZXIgPSBlO1xuXG5cdGlmICh0aW1lcikge1xuXHRcdGNsZWFyVGltZW91dCh0aW1lcik7XG5cdH1cblx0dGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRwb2ludGVyID0gbnVsbDtcblx0fSwgMWUyKTtcbn1cbiJdfQ=="}