{
  "version": 3,
  "sources": ["../node_modules/tricks/support/requestAnimationFrame.js", "../node_modules/tricks/events/createEvent.js", "../node_modules/tricks/events/createDummyEvent.js", "../node_modules/tricks/object/instanceOf.js", "../node_modules/tricks/dom/isDom.js", "../node_modules/tricks/array/toArray.js", "../node_modules/tricks/dom/each.js", "../node_modules/tricks/events/on.js", "../node_modules/tricks/events/touch.js", "../node_modules/tricks/events/swipe.js", "../src/classes/canvas.js", "../src/classes/collection.js", "../src/classes/shape.js", "../src/classes/text.js", "../node_modules/tricks/object/Queue.js", "../src/classes/Background.js", "../node_modules/tricks/object/extend.js", "../src/classes/colours.js", "../src/colorFlood.js"],
  "sourcesContent": ["// requestAnimationFrame polyfill\nwindow.requestAnimationFrame =\n\twindow.requestAnimationFrame ||\n\twindow.webkitRequestAnimationFrame ||\n\twindow.mozRequestAnimationFrame ||\n\twindow.oRequestAnimationFrame ||\n\twindow.msRequestAnimationFrame ||\n\t(callback => setTimeout(callback, 1000 / 60));\n\nexport default window.requestAnimationFrame.bind(window);\n", "// IE does not support `new Event()`\n// See https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events for details\nconst dict = {bubbles: true, cancelable: true};\n\nlet createEvent = (eventname, options = dict) =>\n\tnew Event(eventname, options);\n\ntry {\n\tcreateEvent('test');\n}\ncatch {\n\tcreateEvent = (eventname, options = dict) => {\n\t\tconst e = document.createEvent('Event');\n\t\te.initEvent(eventname, !!options.bubbles, !!options.cancelable);\n\t\treturn e;\n\t};\n}\n\nexport default createEvent;\n", "export default e => {\n\te.stopPropagation = () => {};\n\te.preventDefault = () => {};\n\treturn e;\n};\n", "export default (test, root) => root && test instanceof root;\n", "import instanceOf from '../object/instanceOf.js';\n\nconst _HTMLElement = (typeof HTMLElement !== 'undefined' && HTMLElement) || (typeof Element !== 'undefined' && Element);\nconst _HTMLDocument = (typeof HTMLDocument !== 'undefined' && HTMLDocument) || (typeof Document !== 'undefined' && Document);\nconst _Window = window.constructor;\n\nexport default test =>\n\tinstanceOf(test, _HTMLElement) ||\n\t\tinstanceOf(test, _HTMLDocument) ||\n\t\tinstanceOf(test, _Window)\n;\n", "/**\n * Converts an iterable value to an Array\n * @param {object} obj - Object to convert into an array\n * @returns {Array} The object as an array\n */\nfunction toArray(obj) {\n\treturn Array.prototype.slice.call(obj);\n}\n\nexport default toArray;\n", "import isDom from './isDom.js';\nimport instanceOf from '../object/instanceOf.js';\nimport toArray from '../array/toArray.js';\n\nexport default function each(matches, callback = () => {}) {\n\n\tif (isDom(matches)) {\n\t\tmatches = [matches];\n\t}\n\telse if (typeof(matches) === 'string') {\n\t\tmatches = document.querySelectorAll(matches);\n\t}\n\n\tif (!instanceOf(matches, Array)) {\n\t\tmatches = toArray(matches);\n\t}\n\n\tif (callback) {\n\t\tmatches.forEach(callback);\n\t}\n\n\treturn matches;\n}\n", "// on.js\n// Listen to events, this is a wrapper for addEventListener\n\nimport each from '../dom/each.js';\nconst SEPERATOR = /[\\s,]+/;\n\n// See https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md#feature-detection\nlet supportsPassive = false;\ntry {\n\tconst opts = Object.defineProperty({}, 'passive', {\n\t\tget() { // eslint-disable-line getter-return\n\t\t\tsupportsPassive = true;\n\t\t}\n\t});\n\twindow.addEventListener('test', null, opts);\n}\ncatch {\n\t// Continue\n}\n\n\nexport default function on(elements, eventnames, callback, options = false) {\n\n\tif (typeof options === 'object' && options.passive && !supportsPassive) {\n\t\t// Override the passive mark\n\t\toptions = false;\n\t}\n\n\teventnames = eventnames.split(SEPERATOR);\n\treturn each(elements, el => eventnames.forEach(eventname => el.addEventListener(eventname, callback, options)));\n}\n", "// Standardizes touch events\n// Calculate the difference from the starting position and the end position.\n// Returns a gesture object given\n\nimport on from './on.js';\nimport each from '../dom/each.js';\n\n// Does this support pointer events?\nconst pointerEnabled = window.navigator.pointerEnabled;\nconst eventMoveTypes = pointerEnabled ? 'MSPointerMove pointerMove' : 'mousemove touchmove';\nconst eventStartTypes = pointerEnabled ? 'MSPointerDown pointerDown' : 'mousedown touchstart';\nconst eventEndTypes = pointerEnabled ? 'MSPointerUp pointerUp' : 'mouseup touchend touchcancel';\n\n// Touch\n// @param callback function - Every touch event fired\n// @param complete function- Once all touch event ends\nexport default function touch(elements, onmove, onstart, onend) {\n\n\t// Store callbacks, and previous pointer position\n\tconst cb = {};\n\tconst mv = {};\n\tconst fin = {};\n\n\ton(document, eventMoveTypes, moveEvent => {\n\n\t\t// Fix Android not firing multiple moves\n\t\t// if (e.type.match(/touch/i)) {\n\t\t//   e.preventDefault();\n\t\t// }\n\n\t\t// Pointer/Mouse down?\n\t\tif (voidEvent(moveEvent)) {\n\t\t\t// The mouse buttons isn't pressed, kill this\n\t\t\treturn;\n\t\t}\n\n\t\t// trigger the call\n\t\tconst i = moveEvent.pointerId || 0;\n\t\tconst handler = cb[i];\n\n\t\tif (handler && typeof(handler) === 'function') {\n\n\t\t\tconst prevEvent = mv[i];\n\n\t\t\t// Extend the Event Object with 'gestures'\n\t\t\tgesture(moveEvent, prevEvent);\n\n\t\t\t// Trigger callback\n\t\t\thandler(moveEvent, prevEvent);\n\t\t}\n\n\t\tmv[i] = moveEvent;\n\t});\n\n\ton(document, eventEndTypes, e => {\n\n\t\tconst i = e.pointerId || 0;\n\t\tcb[i] = null;\n\n\t\tif (e.type === 'touchend' || e.type === 'touchcancel') {\n\t\t\te = mv[i];\n\t\t}\n\n\t\tconst handler = fin[i];\n\t\tif (handler) {\n\t\t\thandler(e);\n\t\t}\n\n\t\tfin[i] = null;\n\t});\n\n\t// loop through and add events\n\teach(elements, element => {\n\n\t\t// bind events\n\t\t// on(element, 'touchend', e => {\n\t\t//  console.log('el:touchend');\n\t\t//  console.log(e);\n\t\t// });\n\n\t\ton(element, 'selectstart', () => false);\n\n\t\ton(element, eventStartTypes, startEvent => {\n\n\t\t\t// default pointer ID\n\t\t\tconst i = startEvent.pointerId || 0;\n\n\t\t\t// Add Gestures to event Object\n\t\t\tgesture(startEvent);\n\n\t\t\tmv[i] = startEvent;\n\t\t\tcb[i] = (moveEvent, prevMoveEvent) => {\n\t\t\t\tonmove.call(element, moveEvent, prevMoveEvent, startEvent);\n\t\t\t};\n\n\t\t\tif (onend) {\n\t\t\t\tfin[i] = endEvent => {\n\n\t\t\t\t\t// Add Gestures to event Object\n\t\t\t\t\tgesture(endEvent, startEvent);\n\n\t\t\t\t\t// fire complete callback\n\t\t\t\t\tonend.call(element, endEvent, startEvent);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// trigger start\n\t\t\tif (onstart) {\n\t\t\t\tonstart.call(element, startEvent);\n\t\t\t}\n\t\t});\n\t});\n}\n\nexport function gesture(currEvent, prevEvent) {\n\n\t// Response Object\n\tcurrEvent.gesture = {};\n\n\tif (currEvent && currEvent.touches && currEvent.touches.length > 0) {\n\t\tcurrEvent.gesture.touches = currEvent.touches;\n\t}\n\telse {\n\t\tcurrEvent.gesture.touches = [currEvent];\n\t}\n\n\tcurrEvent.gesture.screenX = currEvent.gesture.touches[0].screenX;\n\tcurrEvent.gesture.screenY = currEvent.gesture.touches[0].screenY;\n\n\tif (!('screenX' in currEvent)) {\n\t\tcurrEvent.screenX = currEvent.gesture.screenX;\n\t}\n\tif (!('screenY' in currEvent)) {\n\t\tcurrEvent.screenY = currEvent.gesture.screenY;\n\t}\n\n\t// If the second parameter isn't defined then we're unable to define getures\n\t// But if it is then whoop, lets go.\n\tif (prevEvent) {\n\n\t\tcurrEvent.gesture.deltaTime = (currEvent.timeStamp - prevEvent.timeStamp);\n\n\t\tconst dx = currEvent.gesture.deltaX = currEvent.gesture.screenX - prevEvent.gesture.screenX;\n\t\tconst dy = currEvent.gesture.deltaY = currEvent.gesture.screenY - prevEvent.gesture.screenY;\n\n\t\t// Which is the best direction for the gesture?\n\t\tif (Math.abs(dy) > Math.abs(dx)) {\n\t\t\tcurrEvent.gesture.direction = (dy > 0 ? 'up' : 'down');\n\t\t}\n\t\telse {\n\t\t\tcurrEvent.gesture.direction = (dx > 0 ? 'right' : 'left');\n\t\t}\n\n\t\t// Distance\n\t\tcurrEvent.gesture.distance = Math.sqrt((dx * dx) + (dy * dy));\n\n\t\t// Velocity\n\t\tcurrEvent.gesture.velocity = currEvent.gesture.distance / currEvent.gesture.deltaTime;\n\t}\n}\n\nfunction voidEvent(event) {\n\tconst type = event.pointerType || event.type;\n\treturn (type.match(/mouse/i) && (event.which || event.buttons) !== 1);\n}\n", "// swipe\n// Checks for a swipe to the left or to the right\n\nimport touch, {gesture} from './touch.js';\n\nexport default function swipe(elements, callback) {\n\n\treturn touch(elements, function touchMove(e, o, s) {\n\n\t\tgesture(e, s);\n\n\t\te.gesture.type = `drag${e.gesture.direction}`;\n\n\t\tcallback.call(this, e);\n\n\t},\n\tfunction touchStart(e) {\n\t\te.gesture.type = 'start';\n\t\tcallback.call(this, e);\n\t},\n\tfunction touchEnd(e) {\n\n\t\tconst g = e.gesture;\n\n\t\t// How long did this operation take?\n\t\tif (g.deltaTime < 200 && g.distance > 20 && g.velocity > 0.3) {\n\t\t\tg.type = `swipe${g.direction}`;\n\t\t}\n\t\telse if (g.distance < 20) {\n\t\t\tg.type = 'click';\n\t\t}\n\t\telse {\n\t\t\tg.type = 'release';\n\t\t}\n\n\t\tcallback.call(this, e);\n\t});\n\n}\n", "// Setup\n// This constructs the canvas object\n\n// Includes\nimport 'tricks/support/requestAnimationFrame';\nimport createEvent from 'tricks/events/createEvent';\nimport createDummyEvent from 'tricks/events/createDummyEvent';\nimport on from 'tricks/events/on';\nimport swipe from 'tricks/events/swipe';\n\n// Constants\nconst BACKGROUND_HASH = 'background';\nconst UserEvents = ['click', 'mousedown', 'mouseup', 'mouseover', 'mousemove', 'mouseout', 'frame', 'resize', 'keydown'];\nconst TouchEvents = ['touchmove', 'touchstart', 'touchend'];\n\nconst EVENT_SEPARATOR = /[\\s,]+/;\n\nexport default class Canvas {\n\n\t// Construct the Canvas Element\n\t// @param canvas should be an root element container for this imagery.\n\tconstructor(canvas) {\n\n\t\tlet parent;\n\n\t\t// events\n\t\tthis.events = {};\n\n\t\t// browser check\n\t\tif (!('getContext' in document.createElement('canvas'))) {\n\t\t\t// browser doesn't support canvas\n\t\t\treturn;\n\t\t}\n\n\t\tif (!(canvas && canvas instanceof HTMLCanvasElement)) {\n\n\t\t\t// Set the parent\n\t\t\tparent = canvas;\n\n\t\t\t// Create the canvas layer\n\t\t\tcanvas = document.createElement('canvas');\n\t\t\tcanvas.style.backgroundColor = 'white';\n\n\t\t\t// Not a parent\n\t\t\tif (!parent) {\n\t\t\t\t// Append to the body\n\t\t\t\tparent = document.body;\n\t\t\t\tcanvas.style.cssText = 'position:fixed;z-index:-1;top:0;left:0;';\n\t\t\t\tcanvas.setAttribute('tabindex', 0);\n\n\t\t\t\tdocument.documentElement.style.cssText = 'min-height:100%;';\n\t\t\t\tdocument.body.style.cssText = 'min-height:100%;';\n\n\t\t\t\t// Bind window resize events\n\t\t\t\twindow.addEventListener('resize', this.resize.bind(this));\n\t\t\t}\n\n\t\t\t// Append this element\n\t\t\tparent.insertBefore(canvas, parent.firstElementChild);\n\n\t\t\tthis.target = canvas;\n\n\t\t\tthis.resize();\n\t\t}\n\t\telse {\n\t\t\tthis.target = canvas;\n\t\t\tparent = canvas.parentNode;\n\t\t}\n\n\t\tthis.ctx = canvas.getContext('2d');\n\n\t\t// Set initial save point\n\t\tthis.ctx.save();\n\n\t\t// Initiate the time\n\t\tthis._time = 0;\n\t\tthis._fps = 0;\n\n\t\t// Initiate the draw\n\t\tthis.draw();\n\n\t\t// Bind events\n\t\ton(this.target, UserEvents.toString(), this.dispatchEvent.bind(this), {passive: true});\n\n\t\t// Format Touch events\n\t\ton(this.target, TouchEvents.toString(), this.dispatchTouchEvent.bind(this), {passive: true});\n\n\t\t// In IE user-events aren't propagated to elements which have negative z-Index's\n\t\t// Listen to events on the document element and propagate those accordingly\n\t\tif (parent === document.body && canvas.style.getPropertyValue('z-index') === '-1') {\n\t\t\t// Bind events\n\t\t\ton(document, UserEvents.toString(), this.dispatchEvent.bind(this), {passive: true});\n\n\t\t\t// Format Touch events\n\t\t\ton(document, TouchEvents.toString(), this.dispatchTouchEvent.bind(this), {passive: true});\n\t\t}\n\n\t\t// Listen to hashChange events\n\t\t{\n\t\t\t// HASH CHANGE DEPTH\n\t\t\tconst style = this.target.style;\n\t\t\tconst initialZ = style.getPropertyValue('z-index');\n\t\t\t// Listen to changes to the background hash to bring the canvas element to the front\n\t\t\twindow.addEventListener('hashchange', hashchange.bind(style, initialZ));\n\n\t\t\thashchange.call(style, initialZ);\n\t\t}\n\n\t\t// Is there a swipe method handler\n\t\tif (this.swipe) {\n\t\t\t// Bind the swipe event handler to the event\n\t\t\tswipe(this.target, this.swipe.bind(this));\n\t\t}\n\t}\n\n\t// ensure its keeping up.\n\tget width() {\n\t\treturn this.target.width;\n\t}\n\tset width(value) {\n\t\tthis.target.width = value;\n\t}\n\n\tget height() {\n\t\treturn this.target.height;\n\t}\n\tset height(value) {\n\t\tthis.target.height = value;\n\t}\n\tget fps() {\n\t\treturn this._fps;\n\t}\n\tset fps(value) {\n\n\t\tthis._fps = value;\n\n\t\tconst now = (new Date()).getTime();\n\n\t\tif ((now - this._time) > 1000) {\n\t\t\t// console.log('fps: %d', this._fps);\n\t\t\tthis._time = now;\n\t\t\tthis._fps = 0;\n\t\t}\n\t}\n\n\n\tresize() {\n\t\tconst parent = (this.target.parentNode === document.body) ? document.documentElement : this.target.parentNode;\n\t\tconst height = parent.clientHeight;\n\t\tconst width = parent.clientWidth;\n\t\tlet changed = false;\n\n\t\tif (this.width !== width) {\n\t\t\tchanged = true;\n\t\t\tthis.width = width;\n\t\t}\n\t\tif (this.height !== height) {\n\t\t\tchanged = true;\n\t\t\tthis.height = height;\n\t\t}\n\n\t\tif (changed) {\n\t\t\tthis.target.dispatchEvent(createEvent('resize'));\n\t\t}\n\t}\n\n\tclear() {\n\t\tthis.ctx.clearRect(0, 0, this.target.width, this.target.height);\n\t}\n\n\t// Bring the content of the canvas to the front\n\tbringToFront() {\n\n\t\t// Update the window.location with the hash #background\n\t\twindow.location.hash = BACKGROUND_HASH;\n\t}\n\n\t// Trigger the draw function\n\tdraw() {\n\n\t\t// Increment the number of frames\n\t\tthis.fps++;\n\n\t\t// Call the frame function in the context of the frame to draw\n\t\tthis.target.dispatchEvent(createEvent('frame'));\n\n\t\t// Request another frame\n\t\trequestAnimationFrame(this.draw.bind(this));\n\t}\n\n\t// The user has clicked an item on the page\n\taddEventListener(eventnames, handler) {\n\n\t\teventnames.split(EVENT_SEPARATOR).forEach(eventname => {\n\t\t\t// Add to the events list\n\t\t\tif (!(eventname in this.events)) {\n\t\t\t\tthis.events[eventname] = [];\n\t\t\t}\n\n\t\t\tthis.events[eventname].push(handler);\n\t\t});\n\t}\n\n\t// Dispatch\n\tdispatchEvent(e) {\n\n\t\tif (e.type in this.events) {\n\n\t\t\tconst target = e.currentTarget;\n\n\t\t\t// This was triggered using event delegation, aka in the background\n\t\t\tif (target === document) {\n\n\t\t\t\te = createDummyEvent({\n\t\t\t\t\ttype: e.type,\n\t\t\t\t\ttarget: this.target,\n\t\t\t\t\toffsetX: e.pageX || e.offsetX,\n\t\t\t\t\toffsetY: e.pageY || e.offsetY\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.events[e.type].forEach(handler => handler(e));\n\t\t\te.stopPropagation();\n\t\t}\n\t}\n\n\t// Dispatch\n\tdispatchTouchEvent(e) {\n\t\t// If this was a touch event\n\t\t// Determine the offset to the canvas element relative to the item being clicked\n\t\tconst touch = (e.touches || e.changedTouches)[0];\n\t\tif (touch) {\n\t\t\te.offsetX = Math.abs(touch.pageX || touch.screenX);\n\t\t\te.offsetY = Math.abs(touch.pageY || touch.screenY);\n\t\t}\n\n\t\tthis.dispatchEvent(e);\n\t}\n}\n\n\nfunction hashchange(z) {\n\n\tconst zIndex = 'z-index';\n\n\tif (window.location.hash === `#${ BACKGROUND_HASH}`) {\n\t\tz = 10000;\n\t}\n\n\tif (z !== undefined) {\n\t\t// Set the z-Index\n\t\tthis.setProperty(zIndex, z);\n\t}\n\telse {\n\t\t// Remove the z-Index\n\t\tthis.removeProperty(zIndex);\n\t}\n}\n", "// Collection\n\nimport on from 'tricks/events/on';\nconst UserEvents = ['click', 'mousedown', 'mouseup', 'mouseover', 'mousemove', 'mouseout', 'touchmove', 'touchstart', 'touchend', 'frame'];\n\nexport default class Collection {\n\n\tconstructor(target) {\n\t\t// Create an empty children\n\t\tthis.children = [];\n\n\t\t// Events\n\t\tthis.events = [];\n\n\t\t// setup the canvas element\n\t\tthis.init(target);\n\t}\n\n\t// listen to canvas events\n\tinit (target) {\n\n\t\t// Define the canvas object as the target for the collection\n\t\tthis.target = target;\n\n\t\t// Define the CTX\n\t\tthis.ctx = target.getContext('2d');\n\n\t\t// listen to user interactive events and trigger those on items\n\t\ton(target, UserEvents.toString(), this._findAndDispatch.bind(this), {passive: true});\n\n\t}\n\n\tpush(item) {\n\t\titem.dirty = true;\n\n\t\t// Is this item already in the collection?\n\t\tif (this.children.indexOf(item) === -1) {\n\t\t\tif (item.setup) {\n\t\t\t\titem.setup(this);\n\t\t\t}\n\n\t\t\t// item.addEventListener('dirty', this.prepareChild.bind(this, item));\n\t\t\tthis.children.push(item);\n\t\t}\n\t}\n\n\tfindIndex(fn) {\n\t\treturn this.children.findIndex(fn);\n\t}\n\n\tfind(fn) {\n\t\treturn this.children.find(fn);\n\t}\n\n\tget length () {\n\t\treturn this.children.length;\n\t}\n\tset length (v) {\n\t\tthis.children.length = v;\n\t}\n\n\n\t// Touch\n\t// Mark items and objects in the same space to be redrawn\n\tprepare() {\n\t\tthis.children.forEach(item => {\n\t\t\tif (item.dirty === true)\n\t\t\t\tthis.prepareChild(item);\n\t\t});\n\t}\n\n\t// Clean Item\n\tprepareChild(item) {\n\n\t\tconst ctx = this.ctx;\n\n\t\tif (item.dirty === 'pending') {\n\t\t\treturn;\n\t\t}\n\n\t\t// Mark this item as dirty\n\t\titem.dirty = 'pending';\n\n\t\t// Remove from Canvas\n\t\tctx.clearRect(item.x, item.y, item.w, item.h);\n\n\t\t// If the items old position is different\n\t\tif (item.previous && displaced(item.previous, item)) {\n\t\t\tctx.clearRect(item.previous.x, item.previous.y, item.previous.w, item.previous.h);\n\t\t}\n\n\t\t// Loop though objects and redraw those that exist within the position\n\t\tthis.children.forEach(this._prepareSiblings.bind(this, item));\n\t}\n\n\t_prepareSiblings(item, sibling) {\n\n\t\t// Does this Object overlap with the focused object?\n\t\tif (!sibling.dirty && sibling.visible !== false && (intersect(sibling, item) || (item.past ? intersect(sibling, item.past) : false))) {\n\t\t\t// Nested clean\n\t\t\tthis.prepareChild(sibling);\n\t\t}\n\t}\n\n\tsort() {\n\t\t// Sort items by z-index\n\t\tthis.children.sort((a, b) => {\n\t\t\ta = a.zIndex || 0;\n\t\t\tb = b.zIndex || 0;\n\t\t\treturn +(a > b) || -(a < b);\n\t\t});\n\t}\n\n\t// Trigger the draw function\n\tdraw() {\n\n\t\tconst ctx = this.ctx;\n\n\t\t// Find items that have changed\n\t\t// Remove background\n\t\tthis.children.forEach(item => {\n\n\t\t\tif (item.frame) {\n\t\t\t\titem.frame(ctx);\n\t\t\t}\n\n\t\t\tif (item.dirty && item.visible !== false) {\n\t\t\t\titem.draw(ctx);\n\t\t\t}\n\n\t\t\titem.dirty = false;\n\t\t});\n\t}\n\n\telementFromPoint(x, y) {\n\n\t\tlet target;\n\n\t\t// Find the canvas item which this targets?\n\t\tconst obj = {\n\t\t\tx,\n\t\t\ty,\n\t\t\tw: 1,\n\t\t\th: 1\n\t\t};\n\n\t\tthis.children.forEach(item => {\n\n\t\t\tif (item.visible === false || !item.w || !item.h || item.pointerEvents === false) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Is this a target?\n\t\t\tif (intersect(obj, item)) {\n\t\t\t\t// Define this as a target\n\t\t\t\ttarget = item;\n\t\t\t}\n\t\t});\n\n\t\treturn target;\n\t}\n\n\t// The user has clicked an item on the page\n\taddEventListener(eventname, handler) {\n\n\t\t// Add to the events list\n\t\tif (!(eventname in this.events)) {\n\t\t\tthis.events[eventname] = [];\n\t\t}\n\n\t\tthis.events[eventname].push(handler);\n\t}\n\n\t// Dispatch\n\tdispatchEvent(e) {\n\t\tif (e.type in this.events)\n\t\t\tthis.events[e.type].forEach(handler => handler(e));\n\t}\n\n\t// Find and _dispatch\n\t_findAndDispatch(e) {\n\t\t// If this is not a pointerEvent lets just pass it through.\n\t\tif ((typeof MouseEvent !== 'undefined' && e instanceof MouseEvent) ||\n\t\t\t(typeof TouchEvent !== 'undefined' && e instanceof TouchEvent)) {\n\n\t\t\t// Find the canvas item which this targets?\n\t\t\tconst obj = {\n\t\t\t\tx: e.offsetX,\n\t\t\t\ty: e.offsetY,\n\t\t\t\tw: 1,\n\t\t\t\th: 1\n\t\t\t};\n\n\t\t\tthis.children.forEach(item => {\n\n\t\t\t\tif (!item.visible || !item.w || !item.h || !item.pointerEvents) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Intersects?\n\t\t\t\tintersect(obj, item) && item.dispatchEvent(e);\n\t\t\t});\n\t\t}\n\t}\n}\n\n\n// Intersect\n// Given two objects with, x,y,w,h properties\n// Do their rectangular dimensions intersect?\n// return Boolean true false.\nfunction intersect(a, b) {\n\treturn !(a.x > (b.x + b.w) ||\n\t(a.x + a.w) < b.x ||\n\ta.y > (b.y + b.h) ||\n\t(a.y + a.h) < b.y);\n}\n\nfunction displaced(a, b) {\n\treturn (a.x !== b.x ||\n\ta.y !== b.y ||\n\ta.w !== b.w ||\n\ta.h !== b.h);\n}\n", "// Shape\n// CanvasShapes\n// The parent object defining a basic shape, x,y,w,h, for starters.\n// And basic operatings you might like to include on a shape\nimport createEvent from 'tricks/events/createEvent';\n\nexport default class Shape {\n\n\tconstructor (...args) {\n\n\t\t// initieate  events\n\t\tthis.events = [];\n\n\t\t// Set previous\n\t\tthis.previous = {};\n\n\t\tif (args.length) {\n\t\t\t// Store the values\n\t\t\tthis.position(...args);\n\t\t}\n\t}\n\n\t//\tSet property listeners\n\tget x() {\n\t\treturn this._x;\n\t}\n\tset x(x) {\n\t\tthis.positionObj({x});\n\t}\n\n\tget y() {\n\t\treturn this._y;\n\t}\n\tset y(y) {\n\t\tthis.positionObj({y});\n\t}\n\n\tget w() {\n\t\treturn this._w;\n\t}\n\tset w(w) {\n\t\tthis.positionObj({w});\n\t}\n\n\tget h() {\n\t\treturn this._h;\n\t}\n\tset h(h) {\n\t\tthis.positionObj({h});\n\t}\n\n\tget dx() {\n\t\treturn this._dx;\n\t}\n\tset dx(v) {\n\t\tif (this._dx !== v) {\n\t\t\tthis.dirty = true; this._dx = v;\n\t\t}\n\t}\n\n\tget dy() {\n\t\treturn this._dy;\n\t}\n\tset dy(v) {\n\t\tif (this._dy !== v) {\n\t\t\tthis.dirty = true; this._dy = v;\n\t\t}\n\t}\n\n\tget visible() {\n\t\treturn (this._visible === undefined ? true : this._visible);\n\t}\n\tset visible(v) {\n\t\tif (this._visible !== v) {\n\t\t\tthis.dirty = true; this._visible = v;\n\t\t}\n\t}\n\n\tget opacity() {\n\t\treturn (this._opacity === undefined ? 1 : this._opacity);\n\t}\n\tset opacity(v) {\n\t\tif (this._opacity !== v) {\n\t\t\tthis.dirty = true; this._opacity = v;\n\t\t}\n\t}\n\n\tset dirty (v) {\n\t\t// Has this just been made dirty?\n\t\tif (!this._dirty && v) {\n\t\t\t// Mark as dirty\n\t\t\tthis._dirty = v;\n\n\t\t\t// Trigger a canvas clean\n\t\t\tthis.dispatchEvent(createEvent('dirty'));\n\t\t}\n\t\telse if (!v) {\n\t\t\t// reset\n\t\t\tthis._dirty = v;\n\n\t\t\t// Store the previous values\n\t\t\tthis.previous = {\n\t\t\t\tx: this._x,\n\t\t\t\ty: this._y,\n\t\t\t\tw: this._w,\n\t\t\t\th: this._h,\n\t\t\t};\n\t\t}\n\t}\n\tget dirty () {\n\t\treturn this._dirty;\n\t}\n\n\t// Let events bubble up\n\tget pointerEvents () {\n\t\treturn (this._pointerEvents === undefined ? 1 : this._pointerEvents);\n\t}\n\tset pointerEvents (v) {\n\t\tthis._pointerEvents = v;\n\t}\n\n\t// Mark the shape as to be removed from the collection\n\tremove() {\n\t\tthis.dirty = true;\n\t\tthis.visible = false;\n\t}\n\n\tposition(x = 0, y = 0, w = 0, h = 0) {\n\n\t\t// Assign, rectangle shape\n\t\t// Have a backup footprint\n\t\tthis.positionObj({x, y, w, h});\n\t}\n\n\tpositionObj(coords) {\n\t\tfor (const coord in coords) {\n\t\t\tconst value = coords[coord];\n\t\t\tconst current = this[`_${coord}`];\n\t\t\tif (current !== value) {\n\t\t\t\tthis.dirty = true;\n\t\t\t\tthis[`_${coord}`] = value;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Placeholder function for drawing to canvas\n\tframe() {}\n\tdraw() {}\n\tsetup() {}\n\n\t// Events\n\t// Assign Events to be fired when the user clicks this object\n\t// Awesome\n\taddEventListener(eventName, callback) {\n\t\tif (!(eventName in this.events)) {\n\t\t\tthis.events[eventName] = [];\n\t\t}\n\t\tthis.events[eventName].push(callback);\n\t}\n\n\tdispatchEvent(e) {\n\t\tif (!(e.type in this.events)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.events[e.type].forEach(fn => fn(e));\n\t}\n\n\t// Assign getters and setters to default properties\n\t_watchProperty(propName) {\n\t\tObject.defineProperty(this, propName, {\n\t\t\tget: this._getter.bind(this, propName),\n\t\t\tset: this._setter.bind(this, propName)\n\t\t});\n\t}\n\n\t_getter(propName) {\n\t\treturn this[`_${ propName}`];\n\t}\n\n\t_setter(propName, v) {\n\t\tif (this[`_${ propName}`] !== v) {\n\t\t\tthis.dirty = true;\n\t\t\tthis[`_${ propName}`] = v;\n\t\t}\n\t}\n}\n", "// text\n// TextObject, defines a shape object which contains text.\n\nimport Shape from './shape';\n\nexport default class Text extends Shape {\n\n\t// Initiate a new shape object.\n\tconstructor (text) {\n\t\t// initiate inheritance\n\t\tsuper();\n\n\t\t// Watch the following properties for changes\n\t\t['text', 'shadowBlur', 'shadowColor', 'fillStyle', 'strokeStyle', 'textAlign', 'textBaseline', 'lineWidth'].forEach(this._watchProperty.bind(this));\n\n\t\t// Define text\n\t\tthis.text = text || '';\n\n\t\tthis.shadowColor = 'black';\n\t\tthis.fillStyle = 'black';\n\t\tthis.strokeStyle = 'white';\n\t\tthis.textAlign = 'left';\n\t\tthis.textBaseline = 'top';\n\t\tthis.lineWidth = 0;\n\t\tthis.align = 'left top';\n\t\tthis.fontSize = 30;\n\t}\n\n\t// Define the text and the alignment of the object\n\tcalc (canvas) {\n\n\t\t// Define text\n\t\t[this.textAlign, this.textBaseline] = this.align.split(' ');\n\n\t\tconst ctx = canvas.ctx;\n\t\tlet fontSize = this.fontSize;\n\n\t\t// Split text by line breaks\n\t\tthis.lines = this.text.toString().split('\\n');\n\n\t\t// Which is the longest line?\n\t\tlet _width = 0;\n\t\tlet default_text = this.lines[0];\n\n\t\tthis.lines.forEach(line => {\n\t\t\tconst _w = ctx.measureText(line).width;\n\t\t\tif (_w > _width) {\n\t\t\t\t_width = _w;\n\t\t\t\tdefault_text = line;\n\t\t\t}\n\t\t});\n\n\t\t// Find the width and height of the item\n\t\t// Using the canvas context\n\t\tctx.save();\n\n\t\tctx.shadowColor = 'black';\n\t\tctx.fillStyle = 'black';\n\t\tctx.strokeStyle = 'rgba(255,255,255,0.5)';\n\t\tctx.font = `bold ${ fontSize }px Arial`;\n\n\t\twhile (ctx.measureText(default_text).width > canvas.width) {\n\t\t\tfontSize *= 0.9;\n\t\t\tfontSize = Math.round(fontSize);\n\t\t\tctx.font = `bold ${ fontSize }px Arial`;\n\t\t}\n\n\t\tthis.shadowBlur = ctx.shadowBlur = Math.round(fontSize / 10);\n\t\tthis.fontSize = fontSize;\n\t\tthis.font = ctx.font;\n\n\t\tthis.w = ctx.measureText(default_text).width + (this.shadowBlur * 2);\n\t\tthis.h = (fontSize + (this.shadowBlur * 2)) * this.lines.length;\n\n\t\tctx.restore();\n\n\t\t// Store style attributes\n\t\t// Store the new attributes of the text item\n\t\tthis.lineWidth = Math.floor(fontSize / 60);\n\n\n\t\t// HEIGHT and WIDTH\n\t\tswitch (this.textAlign) {\n\t\t\tcase 'center':\n\t\t\tcase 'middle':\n\t\t\t\tthis.textAlign = 'center';\n\t\t\t\tthis.x = (canvas.width / 2) - (this.w / 2);\n\t\t\t\tbreak;\n\t\t\tcase 'left':\n\t\t\t\tthis.x = 0;\n\t\t\t\tbreak;\n\t\t\tcase 'right':\n\t\t\t\tthis.x = canvas.width - this.w;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tswitch (this.textBaseline) {\n\t\t\tcase 'center':\n\t\t\tcase 'middle':\n\t\t\t\tthis.textBaseline = 'middle';\n\t\t\t\tthis.y = (canvas.height / 2) - (this.h / 2);\n\t\t\t\tbreak;\n\t\t\tcase 'top':\n\t\t\t\tthis.y = 0;\n\t\t\t\tbreak;\n\t\t\tcase 'bottom':\n\t\t\t\tthis.y = canvas.height - this.h;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.textAlign = 'left';\n\t\tthis.textBaseline = 'top';\n\n\t\tctx.restore();\n\t}\n\n\t// Draw\n\tdraw (ctx) {\n\n\t\tctx.save();\n\n\t\tctx.globalAlpha = this.opacity;\n\n\t\tctx.shadowColor = this.shadowColor;\n\t\tif (this.shadowBlur) {\n\t\t\tctx.shadowBlur = this.shadowBlur;\n\t\t}\n\t\tctx.fillStyle = this.fillStyle;\n\t\tctx.strokeStyle = this.strokeStyle;\n\t\tctx.font = this.font;\n\n\t\tctx.textAlign = this.textAlign;\n\t\tctx.textBaseline = this.textBaseline;\n\t\tctx.lineWidth = this.lineWidth;\n\n\t\tif (this.lineWidth) {\n\t\t\tctx.lineWidth = this.lineWidth;\n\t\t}\n\n\t\tthis.lines = this.text.toString().split('\\n');\n\n\t\tconst len = this.lines.length;\n\n\t\tthis.lines.forEach((item, index) => {\n\t\t\tconst y = this.y + (this.h ? (index * (this.h / len)) : 0);\n\n\t\t\tctx.fillText(item, this.x, y);\n\t\t\tif (this.strokeStyle) {\n\t\t\t\tctx.strokeText(item, this.x, y);\n\t\t\t}\n\t\t});\n\n\t\tctx.restore();\n\t}\n}\n", "// Create a queuing function\n// Queues items in an Array like function until a handler has been defined\n// Then each item will be processed against the handler.\n// Useful for creating Global Asynchronous Queues, as can be retro fitted to existing arrays.\n\nexport default class Queue {\n\n\tconstructor(arr, handler) {\n\t\tthis.items = (Array.isArray(arr) ? arr : []);\n\t\tthis.handler = handler;\n\t}\n\n\t// Mimic the Array.push function\n\tpush(...args) {\n\n\t\t// Append items to the internal array.\n\t\targs.forEach(item => this.items.push(item));\n\n\t\t// Trigger the custom handler\n\t\tif (this._handler) {\n\t\t\targs.forEach(item => this._handler(item));\n\t\t}\n\t}\n\n\t// Mimic the length\n\tget length() {\n\t\treturn this.items.length;\n\t}\n\tset length(value) {\n\t\tthis.items.length = value;\n\t}\n\n\t// Set the item handler\n\tget handler() {\n\t\treturn this._handler;\n\t}\n\n\tset handler(callback) {\n\n\t\tthis._handler = callback;\n\n\t\tif (this._handler) {\n\t\t\tthis.items.forEach(item => this._handler(item));\n\t\t}\n\t}\n}\n", "// Background\n// Exposes the basic properties/methods of a controllable background\n\nimport Queue from 'tricks/object/Queue';\n\n// Extract the window.background items\nconst queue = window.background = new Queue(window.background);\n\nfunction queueHandler(callback) {\n\t// Each item in the queue should be a function\n\tcallback(Background);\n}\n\nexport default class Background {\n\n\tstatic add(stage) {\n\t\t// Store the\n\t\tBackground.stages.push(stage);\n\n\t\t// Trigger ready if it has not already been set\n\t\tif (Background.stages.length === 1) {\n\t\t\t// Initiate the queue\n\t\t\tqueue.handler = queueHandler;\n\t\t}\n\t}\n\n\t// Create a new instance of a stage\n\tstatic init(target) {\n\t\t// Get the default stage which has been registered with this class\n\t\tconst stage = Background.stages[0];\n\n\t\t// Return instance\n\t\tif (stage) {\n\t\t\treturn new stage(target);\n\t\t}\n\t}\n}\n\nBackground.stages = [];\n", "import instanceOf from './instanceOf.js';\n\n/**\n * Extend Object works like Object.assign(...) but recurses into the nested properties\n *\n * @param {object} base - an object to extend\n * @param {...object} args - a series of objects to extend\n * @returns {object} extended object\n */\nfunction extend(base, ...args) {\n\targs.forEach(o => {\n\t\tif (Array.isArray(base) && Array.isArray(o)) {\n\t\t\tArray.prototype.push.apply(base, o);\n\t\t}\n\t\telse if (instanceOf(base, Object) && instanceOf(o, Object) && base !== o) {\n\t\t\tfor (const x in o) {\n\t\t\t\t// Prevent prototype pollution\n\t\t\t\tif (x === '__proto__' || x === 'constructor') {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tbase[x] = extend(base[x], o[x]);\n\t\t\t}\n\t\t}\n\t\telse if (Array.isArray(o)) {\n\t\t\t// Clone it\n\t\t\tbase = o.slice(0);\n\t\t}\n\t\telse {\n\t\t\tbase = o;\n\t\t}\n\t});\n\treturn base;\n}\n\nexport default extend;\n", "export const colours = {\n    red: '#ff595e',\n    green: '#8ac926',\n    blue: '#1982c4',\n    yellow: '#ffca3a',\n    purple: '#6a4c93',\n    grey: '#999999',\n};\n\nexport const palette = [colours.red, colours.green, colours.blue, colours.yellow, colours.purple, colours.grey];", "// ColorFlood, Canvas animation\n// Copyright Andrew Dodson, March 2013.\n// Refactored in 2015\n\n// Get Canvas\nimport Canvas from './classes/canvas.js';\nimport Collection from './classes/collection.js';\nimport Text from './classes/text.js';\nimport Background from './classes/Background.js';\nimport extend from 'tricks/object/extend.js';\nimport {palette} from './classes/colours.js';\n\n// Create a new tile\n// Arguments handled by parent\nclass Tile {\n\n\tconstructor(x, y, w, h) {\n\n\t\t// Parent Object\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.w = w;\n\t\tthis.h = h;\n\n\t\t// Capture the grid position\n\t\tthis.grid = new Uint8Array(2);\n\n\t\tlet index = Math.floor(Math.random() * palette.length);\n\t\tif (index === palette.length) {\n\t\t\tindex--;\n\t\t}\n\n\t\tthis.colorIndex = index;\n\t\tthis.fillStyle = palette[this.colorIndex];\n\t\tthis.flooded = false; // is this tile caught\n\t}\n\n\t// Each function passed into the collection must have a draw function\n\tdraw(ctx) {\n\t\tctx.fillStyle = this.fillStyle;\n\t\tctx.fillRect(this.x, this.y, this.w, this.h);\n\t}\n}\n\n\n\nclass Stage {\n\n\tconstructor(target) {\n\n\t\t// Initiate the canvas in the base\n\t\tthis.canvas = new Canvas(target);\n\n\t\t// Collection\n\t\t// Define the canvas start element\n\t\tthis.collection = new Collection(this.canvas.target);\n\n\t\t// Tiles\n\t\tthis.tiles = [];\n\n\t\t// Add listeners to the canvas Element\n\t\tthis.canvas.addEventListener('frame', () => {\n\n\t\t\t// On every frame\n\t\t\t// Prepare dirty areas\n\t\t\tthis.collection.prepare();\n\n\t\t\t// Draw marked items\n\t\t\tthis.collection.draw();\n\t\t});\n\n\t\t// Initiate\n\t\tinit.call(this);\n\t}\n\n\tsetup(options) {\n\n\t\t// Set the options\n\t\tthis.config(options);\n\n\t\t// Setup\n\t\tsetup.call(this);\n\t}\n\n\tconfig(options) {\n\n\t\t// Merge the current options\n\t\textend(this.options, options);\n\n\t\t// Show Controls\n\t\tshowControls.call(this);\n\t}\n}\n\n\n// Add Stage to the background\nBackground.add(Stage);\n\n\nfunction init() {\n\n\t// Show text\n\tthis.options = {\n\t\tcontrols: true\n\t};\n\n\t// Add a text Object\n\t// We only have one text Object on the screen at a time, lets reuse it.\n\tconst title = new Text();\n\ttitle.text = 'Flood It';\n\ttitle.fontSize = 150;\n\ttitle.align = 'center center';\n\ttitle.calc(this.canvas);\n\tthis.title = title;\n\n\tconst credits = new Text();\n\tcredits.text = 'Ended';\n\tcredits.zIndex = 1;\n\tcredits.fontSize = 150;\n\tcredits.align = 'center center';\n\tcredits.visible = false;\n\tcredits.addEventListener('mousedown', setup.bind(this));\n\tcredits.addEventListener('touchstart', setup.bind(this));\n\tthis.credits = credits;\n\n\t// Help\n\tconst info = new Text();\n\tinfo.text = 'Start in the top left corner\\nFlood tiles by color\\nIn as few moves as possible';\n\tinfo.zIndex = 1;\n\tinfo.align = 'center center';\n\tinfo.fontSize = 40;\n\tinfo.calc(this.canvas);\n\tthis.info = info;\n\n\n\tconst score = new Text();\n\tscore.zIndex = 1;\n\tscore.align = 'right bottom';\n\tscore.pointerEvents = false;\n\tscore.fontSize = 40;\n\tthis.score = score;\n\n\t// Is this playing as a background image?\n\t// We want to display a button to enable playing in full screen.\n\tconst playBtn = new Text();\n\tplayBtn.text = '\u25BA';\n\tplayBtn.zIndex = 1;\n\tplayBtn.align = 'left top';\n\tplayBtn.fontSize = 40;\n\tplayBtn.calc(this.canvas);\n\tplayBtn.addEventListener('click', setup.bind(this));\n\tthis.playBtn = playBtn;\n\n\n\t// Rebuild the board on resize\n\tthis.canvas.addEventListener('resize', setup.bind(this));\n\n\t// User has clicked an item on the canvas\n\t// We'll use event delegation to tell us what the user has clicked.\n\tthis.canvas.addEventListener('click', userClick.bind(this));\n\n}\n\nfunction userClick(e) {\n\n\t// Get the item at the click location\n\tconst target = this.collection.elementFromPoint(e.offsetX, e.offsetY);\n\n\t// Tile Clicked\n\tif (target && target instanceof Tile) {\n\t\tplay.call(this, target);\n\t}\n\telse {\n\t\treturn;\n\t}\n\n\t// Has the game state changed?\n\tif (this.flooded >= this.tiles.length && this.clicks < this.max_tries) {\n\t\tthis.credits.text = `Kudos! ${this.clicks + 1} moves`;\n\t\tthis.credits.calc(this.canvas);\n\t\tthis.ended = true;\n\t}\n\telse if (++this.clicks >= this.max_tries) {\n\t\tthis.credits.text = 'Game over!';\n\t\tthis.credits.calc(this.canvas);\n\n\t\tthis.ended = true;\n\t}\n\telse {\n\t\tthis.ended = false;\n\t}\n\n\t// Calculate clicks\n\tthis.score.text = `${this.clicks}/${this.max_tries}`;\n\tthis.score.calc(this.canvas);\n\n\tshowControls.call(this);\n}\n\nfunction setup() {\n\t// Remove everything\n\tthis.collection.length = 0;\n\tthis.tiles.length = 0;\n\n\tthis.clicks = 0;\n\tthis.selectedColor = null;\n\tthis.flooded = 1;\n\tthis.ended = false;\n\n\t// Define type size\n\t// set tile default Width and height\n\tlet w = 50;\n\tlet h = 50;\n\n\t// set number of tiles horizontally and vertically\n\tthis.nx = Math.floor(this.canvas.width / w);\n\tthis.ny = Math.floor(this.canvas.height / h);\n\n\tthis.max_tries = this.nx + this.ny;\n\n\t// Do the tiles not perfectly fit the space?\n\t// split the difference between the tiles, adding to the widths and heights\n\tw += Math.floor((this.canvas.width % (this.nx * w)) / this.nx);\n\th += Math.floor((this.canvas.height % (this.ny * h)) / this.ny);\n\n\t// Create tiles\n\tfor (let y = 0; y < this.ny; y++) {\n\t\tfor (let x = 0; x < this.nx; x++) {\n\n\t\t\tconst tile = new Tile(x * w, y * h, w - 1, h - 1);\n\t\t\tthis.tiles.push(tile);\n\t\t\tthis.collection.push(tile);\n\t\t\ttile.grid = [x, y];\n\t\t}\n\t}\n\n\t// Write message\n\tthis.info.y = this.title.y + this.title.h;\n\n\t// Add text items\n\tthis.collection.push(this.title);\n\tthis.collection.push(this.info);\n\tthis.collection.push(this.credits);\n\tthis.collection.push(this.playBtn);\n\tthis.collection.push(this.score);\n\n\t// Starting state\n\t// Select the first tile, (top left corner)\n\t// Mark as flooded\n\tthis.tiles[0].flooded = true;\n\n\t// Flood its neighbouring tiles on start\n\tplay.call(this, this.tiles[0]);\n\n\t// Sort the collection by z-index this ensures everything is drawn in the right order\n\tthis.collection.sort();\n\n\t// Show Controls\n\tshowControls.call(this);\n}\n\n\nfunction play(tileSelected) {\n\n\tif (!tileSelected) {\n\t\treturn;\n\t}\n\n\tthis.selectedColor = tileSelected.colorIndex;\n\n\t// Trigger Flooding\n\tthis.tiles.forEach(tile => {\n\t\tif (tile.flooded) {\n\t\t\tflood.call(this, tile);\n\t\t}\n\t});\n}\n\n// Flood this tile with the new colour and its neighbours with the same colour\nfunction flood(tile) {\n\n\tconst [x, y] = tile.grid;\n\n\ttile.colorIndex = this.selectedColor;\n\ttile.fillStyle = palette[this.selectedColor];\n\n\t// Mark this as needing to be redrawn\n\ttile.dirty = true;\n\n\t// find all tiles next to this one.\n\tconst edgeTiles = [\n\t\t(Math.max(y - 1, 0) * this.nx) + x,\n\t\t(y * this.nx) + Math.min(x + 1, this.nx - 1),\n\t\t((Math.min(y + 1, this.ny - 1)) * this.nx) + x,\n\t\t(y * this.nx) + Math.max(x - 1, 0)\n\t];\n\n\tedgeTiles.forEach(edge => {\n\t\tconst tile = this.tiles[edge];\n\t\tif (edge > 0 && tile) {\n\t\t\tif (tile.colorIndex === this.selectedColor && !tile.flooded) {\n\t\t\t\ttile.flooded = true;\n\t\t\t\tflood.call(this, tile);\n\t\t\t\tthis.flooded++;\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction showControls() {\n\t// Show Controls and information?\n\tconst showControls = this.options.controls;\n\n\tthis.title.visible = this.clicks === 0 && !this.ended && showControls;\n\tthis.info.visible = this.clicks === 0 && !this.ended && showControls;\n\tthis.score.visible = this.clicks > 0 && showControls;\n\tthis.credits.visible = this.ended && showControls;\n\tthis.playBtn.visible = showControls;\n}\n"],
  "mappings": "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",
  "names": ["callback", "requestAnimationFrame_default", "dict", "createEvent", "eventname", "options", "e", "createEvent_default", "createDummyEvent_default", "instanceOf_default", "test", "root", "_HTMLElement", "_HTMLDocument", "_Window", "isDom_default", "test", "instanceOf_default", "toArray", "obj", "toArray_default", "each", "matches", "callback", "isDom_default", "instanceOf_default", "toArray_default", "SEPERATOR", "supportsPassive", "opts", "on", "elements", "eventnames", "callback", "options", "each", "el", "eventname", "pointerEnabled", "eventMoveTypes", "eventStartTypes", "eventEndTypes", "touch", "elements", "onmove", "onstart", "onend", "cb", "mv", "fin", "on", "moveEvent", "voidEvent", "i", "handler", "prevEvent", "gesture", "e", "each", "element", "startEvent", "prevMoveEvent", "endEvent", "currEvent", "dx", "dy", "event", "swipe", "elements", "callback", "touch", "e", "o", "s", "gesture", "g", "BACKGROUND_HASH", "UserEvents", "TouchEvents", "EVENT_SEPARATOR", "Canvas", "canvas", "parent", "on", "style", "initialZ", "hashchange", "swipe", "value", "now", "height", "width", "changed", "createEvent_default", "eventnames", "handler", "eventname", "e", "createDummyEvent_default", "touch", "z", "zIndex", "UserEvents", "Collection", "target", "on", "item", "fn", "v", "ctx", "displaced", "sibling", "intersect", "a", "b", "x", "y", "obj", "eventname", "handler", "e", "Shape", "args", "x", "y", "w", "h", "v", "createEvent_default", "coords", "coord", "value", "eventName", "callback", "e", "fn", "propName", "Text", "Shape", "text", "canvas", "ctx", "fontSize", "_width", "default_text", "line", "_w", "len", "item", "index", "y", "Queue", "arr", "handler", "args", "item", "value", "callback", "queue", "Queue", "queueHandler", "callback", "Background", "_Background", "stage", "target", "extend", "base", "args", "o", "instanceOf_default", "x", "extend_default", "colours", "palette", "Tile", "x", "y", "w", "h", "index", "palette", "ctx", "Stage", "target", "Canvas", "Collection", "init", "options", "setup", "extend_default", "showControls", "Background", "title", "Text", "credits", "info", "score", "playBtn", "userClick", "play", "tile", "tileSelected", "flood", "edge"]
}
