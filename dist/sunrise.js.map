{"version":3,"sources":["dist/node_modules/browser-pack/_prelude.js","dist/node_modules/tricks/array/toArray.js","dist/node_modules/tricks/dom/each.js","dist/node_modules/tricks/dom/isDom.js","dist/node_modules/tricks/events/createDummyEvent.js","dist/node_modules/tricks/events/createEvent.js","dist/node_modules/tricks/events/on.js","dist/node_modules/tricks/events/swipe.js","dist/node_modules/tricks/events/touch.js","dist/node_modules/tricks/object/instanceOf.js","dist/node_modules/tricks/support/requestAnimationFrame.js","dist/src/classes/canvas.js","dist/src/sunrise.js"],"names":[],"mappings":"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","file":"sunrise.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","module.exports = obj => Array.prototype.slice.call(obj);\n","const isDom = require('./isDom.js');\nconst instanceOf = require('../object/instanceOf.js');\nconst toArray = require('../array/toArray.js');\n\nmodule.exports = (matches, callback = () => {}) => {\n\n\tif (isDom(matches)) {\n\t\tmatches = [matches];\n\t}\n\telse if (typeof(matches) === 'string') {\n\t\tmatches = document.querySelectorAll(matches);\n\t}\n\n\tif (!instanceOf(matches, Array)) {\n\t\tmatches = toArray(matches);\n\t}\n\n\tif (callback) {\n\t\tmatches.forEach(callback);\n\t}\n\n\treturn matches;\n};\n","const instanceOf = require('../object/instanceOf.js');\n\nconst _HTMLElement = typeof HTMLElement !== 'undefined' ? HTMLElement : Element;\nconst _HTMLDocument = typeof HTMLDocument !== 'undefined' ? HTMLDocument : Document;\nconst _Window = window.constructor;\n\nmodule.exports = test =>\n\tinstanceOf(test, _HTMLElement) ||\n\t\tinstanceOf(test, _HTMLDocument) ||\n\t\tinstanceOf(test, _Window)\n;\n","module.exports = e => {\n\te.stopPropagation = () => {};\n\te.preventDefault = () => {};\n\treturn e;\n};\n","// IE does not support `new Event()`\n// See https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events for details\nconst dict = {bubbles: true, cancelable: true};\n\nlet createEvent = (eventname, options = dict) =>\n\tnew Event(eventname, options);\n\ntry {\n\tcreateEvent('test');\n}\ncatch (e) {\n\tcreateEvent = (eventname, options = dict) => {\n\t\tconst e = document.createEvent('Event');\n\t\te.initEvent(eventname, !!options.bubbles, !!options.cancelable);\n\t\treturn e;\n\t};\n}\n\nmodule.exports = createEvent;\n","// on.js\n// Listen to events, this is a wrapper for addEventListener\n\nconst each = require('../dom/each.js');\nconst SEPERATOR = /[\\s,]+/;\n\n// See https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md#feature-detection\nlet supportsPassive = false;\ntry {\n\tconst opts = Object.defineProperty({}, 'passive', {\n\t\tget() {\n\t\t\tsupportsPassive = true;\n\t\t}\n\t});\n\twindow.addEventListener('test', null, opts);\n}\ncatch (e) {\n\t// Continue\n}\n\n\nmodule.exports = (elements, eventnames, callback, options = false) => {\n\n\tif (typeof options === 'object' && options.passive && !supportsPassive) {\n\t\t// Override the passive mark\n\t\toptions = false;\n\t}\n\n\teventnames = eventnames.split(SEPERATOR);\n\treturn each(elements, el => eventnames.forEach(eventname => el.addEventListener(eventname, callback, options)));\n};\n","// swipe\n// Checks for a swipe to the left or to the right\n\nconst touch = require('./touch.js');\nconst {gesture} = touch;\n\nmodule.exports = (elements, callback) =>\n\n\ttouch(elements, function(e, o, s) {\n\n\t\tgesture(e, s);\n\n\t\te.gesture.type = `drag${e.gesture.direction}`;\n\n\t\tcallback.call(this, e);\n\n\t},\n\tfunction (e) {\n\t\tgesture(e);\n\t\te.gesture.type = 'start';\n\t\tcallback.call(this, e);\n\t},\n\tfunction(e) {\n\n\t\tconst g = e.gesture;\n\n\t\t// How long did this operation take?\n\t\tif (g.deltaTime < 200 && g.distance > 20 && g.velocity > 0.3) {\n\t\t\tg.type = `swipe${g.direction}`;\n\t\t}\n\t\telse if (g.distance < 20) {\n\t\t\tg.type = 'click';\n\t\t}\n\t\telse {\n\t\t\tg.type = 'release';\n\t\t}\n\n\t\tcallback.call(this, e);\n\t})\n;\n","// Standardizes touch events\n// Calculate the difference from the starting position and the end position.\n// Returns a gesture object given\n\nconst on = require('./on.js');\nconst each = require('../dom/each.js');\n\n// Does this support pointer events?\nconst pointerEnabled = window.navigator.pointerEnabled;\nconst eventMoveTypes = pointerEnabled ? 'MSPointerMove pointerMove' : 'mousemove touchmove';\nconst eventStartTypes = pointerEnabled ? 'MSPointerDown pointerDown' : 'mousedown touchstart';\nconst eventEndTypes = pointerEnabled ? 'MSPointerUp pointerUp' : 'mouseup touchend touchcancel';\n\n// Touch\n// @param callback function - Every touch event fired\n// @param complete function- Once all touch event ends\nmodule.exports = (elements, onmove, onstart, onend) => {\n\n\t// Store callbacks, and previous pointer position\n\tconst cb = {};\n\tconst mv = {};\n\tconst fin = {};\n\n\ton(document, eventMoveTypes, moveEvent => {\n\n\t\t// Fix Android not firing multiple moves\n\t\t// if (e.type.match(/touch/i)) {\n\t\t// \te.preventDefault();\n\t\t// }\n\n\t\t// Pointer/Mouse down?\n\t\tif (voidEvent(moveEvent)) {\n\t\t\t// The mouse buttons isn't pressed, kill this\n\t\t\treturn;\n\t\t}\n\n\t\t// trigger the call\n\t\tconst i = moveEvent.pointerId || 0;\n\t\tconst handler = cb[i];\n\n\t\tif (handler && typeof(handler) === 'function') {\n\n\t\t\tconst prevEvent = mv[i];\n\n\t\t\t// Extend the Event Object with 'gestures'\n\t\t\tgesture(moveEvent, prevEvent);\n\n\t\t\t// Trigger callback\n\t\t\thandler(moveEvent, prevEvent);\n\t\t}\n\n\t\tmv[i] = moveEvent;\n\t});\n\n\ton(document, eventEndTypes, e => {\n\n\t\tconst i = e.pointerId || 0;\n\t\tcb[i] = null;\n\n\t\tif (e.type === 'touchend' || e.type === 'touchcancel') {\n\t\t\te = mv[i];\n\t\t}\n\n\t\tconst handler = fin[i];\n\t\tif (handler) {\n\t\t\thandler(e);\n\t\t}\n\n\t\tfin[i] = null;\n\t});\n\n\t// loop through and add events\n\teach(elements, element => {\n\n\t\t// bind events\n\t\t// on(element, 'touchend', e => {\n\t\t// \tconsole.log('el:touchend');\n\t\t// \tconsole.log(e);\n\t\t// });\n\n\t\ton(element, 'selectstart', () => false);\n\n\t\ton(element, eventStartTypes, startEvent => {\n\n\t\t\t// Set prevent default to stop any mouse events from also being called\n\t\t\tif ((typeof TouchEvent !== 'undefined') && startEvent instanceof TouchEvent) {\n\t\t\t\t// Prevent the triggering of the mouse events\n\t\t\t\tstartEvent.preventDefault();\n\t\t\t}\n\n\t\t\t// default pointer ID\n\t\t\tconst i = startEvent.pointerId || 0;\n\n\t\t\t// Add Gestures to event Object\n\t\t\tgesture(startEvent);\n\n\t\t\tmv[i] = startEvent;\n\t\t\tcb[i] = (moveEvent, prevMoveEvent) => {\n\t\t\t\tonmove.call(element, moveEvent, prevMoveEvent, startEvent);\n\t\t\t};\n\n\t\t\tif (onend) {\n\t\t\t\tfin[i] = endEvent => {\n\n\t\t\t\t\t// Add Gestures to event Object\n\t\t\t\t\tgesture(endEvent, startEvent);\n\n\t\t\t\t\t// fire complete callback\n\t\t\t\t\tonend.call(element, endEvent, startEvent);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// trigger start\n\t\t\tif (onstart) {\n\t\t\t\tonstart.call(element, startEvent);\n\t\t\t}\n\t\t});\n\t});\n};\n\nfunction gesture(currEvent, prevEvent) {\n\n\t// Response Object\n\tcurrEvent.gesture = {};\n\n\tif (currEvent && currEvent.touches && currEvent.touches.length > 0) {\n\t\tcurrEvent.gesture.touches = currEvent.touches;\n\t}\n\telse {\n\t\tcurrEvent.gesture.touches = [currEvent];\n\t}\n\n\tcurrEvent.gesture.screenX = currEvent.gesture.touches[0].screenX;\n\tcurrEvent.gesture.screenY = currEvent.gesture.touches[0].screenY;\n\n\tif (!('screenX' in currEvent)) {\n\t\tcurrEvent.screenX = currEvent.gesture.screenX;\n\t}\n\tif (!('screenY' in currEvent)) {\n\t\tcurrEvent.screenY = currEvent.gesture.screenY;\n\t}\n\n\t// If the second parameter isn't defined then we're unable to define getures\n\t// But if it is then whoop, lets go.\n\tif (prevEvent) {\n\n\t\tcurrEvent.gesture.deltaTime = (currEvent.timeStamp - prevEvent.timeStamp);\n\n\t\tconst dx = currEvent.gesture.deltaX = currEvent.gesture.screenX - prevEvent.gesture.screenX;\n\t\tconst dy = currEvent.gesture.deltaY = currEvent.gesture.screenY - prevEvent.gesture.screenY;\n\n\t\t// Which is the best direction for the gesture?\n\t\tif (Math.abs(dy) > Math.abs(dx)) {\n\t\t\tcurrEvent.gesture.direction = (dy > 0 ? 'up' : 'down');\n\t\t}\n\t\telse {\n\t\t\tcurrEvent.gesture.direction = (dx > 0 ? 'right' : 'left');\n\t\t}\n\n\t\t// Distance\n\t\tcurrEvent.gesture.distance = Math.sqrt((dx * dx) + (dy * dy));\n\n\t\t// Velocity\n\t\tcurrEvent.gesture.velocity = currEvent.gesture.distance / currEvent.gesture.deltaTime;\n\t}\n}\n\nmodule.exports.gesture = gesture;\n\nfunction voidEvent(event) {\n\tconst type = event.pointerType || event.type;\n\treturn (type.match(/mouse/i) && (event.which || event.buttons) !== 1);\n}\n","module.exports = (test, root) => root && test instanceof root;\n","// requestAnimationFrame polyfill\nwindow.requestAnimationFrame =\n\twindow.requestAnimationFrame ||\n\twindow.webkitRequestAnimationFrame ||\n\twindow.mozRequestAnimationFrame ||\n\twindow.oRequestAnimationFrame ||\n\twindow.msRequestAnimationFrame ||\n\t(callback => setTimeout(callback, 1000 / 60));\n\nmodule.exports = window.requestAnimationFrame.bind(window);\n","// Setup\n// This constructs the canvas object\n\n// Includes\nimport 'tricks/support/requestAnimationFrame';\nimport createEvent from 'tricks/events/createEvent';\nimport createDummyEvent from 'tricks/events/createDummyEvent';\nimport on from 'tricks/events/on';\nimport swipe from 'tricks/events/swipe';\n\n// Constants\nconst BACKGROUND_HASH = 'background';\nconst UserEvents = ['click', 'mousedown', 'mouseup', 'mouseover', 'mousemove', 'mouseout', 'mousewheel', 'frame', 'resize', 'keydown'];\nconst TouchEvents = ['touchmove', 'touchstart', 'touchend'];\n\nconst EVENT_SEPARATOR = /[\\s\\,]+/;\n\nexport default class Canvas {\n\n\t// Construct the Canvas Element\n\t// @param canvas should be an root element container for this imagery.\n\tconstructor(canvas) {\n\n\t\tlet parent;\n\n\t\t// events\n\t\tthis.events = {};\n\n\t\t// browser check\n\t\tif (!('getContext' in document.createElement('canvas'))) {\n\t\t\t// browser doesn't support canvas\n\t\t\treturn;\n\t\t}\n\n\t\tif (!(canvas && canvas instanceof HTMLCanvasElement)) {\n\n\t\t\t// Set the parent\n\t\t\tparent = canvas;\n\n\t\t\t// Create the canvas layer\n\t\t\tcanvas = document.createElement('canvas');\n\t\t\tcanvas.style.backgroundColor = 'white';\n\n\t\t\t// Not a parent\n\t\t\tif (!parent) {\n\t\t\t\t// Append to the body\n\t\t\t\tparent = document.body;\n\t\t\t\tcanvas.style.cssText = 'position:fixed;z-index:-1;top:0;left:0;';\n\t\t\t\tcanvas.setAttribute('tabindex', 0);\n\n\t\t\t\tdocument.documentElement.style.cssText = 'min-height:100%;';\n\t\t\t\tdocument.body.style.cssText = 'min-height:100%;';\n\n\t\t\t\t// Bind window resize events\n\t\t\t\twindow.addEventListener('resize', this.resize.bind(this));\n\t\t\t}\n\n\t\t\t// Append this element\n\t\t\tparent.insertBefore(canvas, parent.firstElementChild);\n\n\t\t\tthis.target = canvas;\n\n\t\t\tthis.resize();\n\t\t}\n\t\telse {\n\t\t\tthis.target = canvas;\n\t\t\tparent = canvas.parentNode;\n\t\t}\n\n\t\tthis.ctx = canvas.getContext('2d');\n\n\t\t// Set initial save point\n\t\tthis.ctx.save();\n\n\t\t// Initiate the time\n\t\tthis._time = 0;\n\t\tthis._fps = 0;\n\n\t\t// Initiate the draw\n\t\tthis.draw();\n\n\t\t// Bind events\n\t\ton(this.target, UserEvents.toString(), this.dispatchEvent.bind(this), {passive: true});\n\n\t\t// Format Touch events\n\t\ton(this.target, TouchEvents.toString(), this.dispatchTouchEvent.bind(this), {passive: true});\n\n\t\t// In IE user-events aren't propagated to elements which have negative z-Index's\n\t\t// Listen to events on the document element and propagate those accordingly\n\t\tif (parent === document.body && canvas.style.getPropertyValue('z-index') === '-1') {\n\t\t\t// Bind events\n\t\t\ton(document, UserEvents.toString(), this.dispatchEvent.bind(this), {passive: true});\n\n\t\t\t// Format Touch events\n\t\t\ton(document, TouchEvents.toString(), this.dispatchTouchEvent.bind(this), {passive: true});\n\t\t}\n\n\t\t// Listen to hashChange events\n\t\t{\n\t\t\t// HASH CHANGE DEPTH\n\t\t\tconst style = this.target.style;\n\t\t\tconst initialZ = style.getPropertyValue('z-index');\n\t\t\t// Listen to changes to the background hash to bring the canvas element to the front\n\t\t\twindow.addEventListener('hashchange', hashchange.bind(style, initialZ));\n\n\t\t\thashchange.call(style, initialZ);\n\t\t}\n\n\t\t// Is there a swipe method handler\n\t\tif (this.swipe) {\n\t\t\t// Bind the swipe event handler to the event\n\t\t\tswipe(this.target, this.swipe.bind(this));\n\t\t}\n\t}\n\n\t// ensure its keeping up.\n\tget width() {\n\t\treturn this.target.width;\n\t}\n\tset width(value) {\n\t\tthis.target.width = value;\n\t\treturn value;\n\t}\n\n\tget height() {\n\t\treturn this.target.height;\n\t}\n\tset height(value) {\n\t\tthis.target.height = value;\n\t\treturn value;\n\t}\n\tget fps() {\n\t\treturn this._fps;\n\t}\n\tset fps(value) {\n\n\t\tthis._fps = value;\n\n\t\tconst now = (new Date()).getTime();\n\n\t\tif ((now - this._time) > 1000) {\n\t\t\t// console.log('fps: %d', this._fps);\n\t\t\tthis._time = now;\n\t\t\tthis._fps = 0;\n\t\t}\n\t}\n\n\n\tresize() {\n\t\tconst parent = (this.target.parentNode === document.body) ? document.documentElement : this.target.parentNode;\n\t\tconst height = parent.clientHeight;\n\t\tconst width = parent.clientWidth;\n\t\tlet changed = false;\n\n\t\tif (this.width !== width) {\n\t\t\tchanged = true;\n\t\t\tthis.width = width;\n\t\t}\n\t\tif (this.height !== height) {\n\t\t\tchanged = true;\n\t\t\tthis.height = height;\n\t\t}\n\n\t\tif (changed) {\n\t\t\tthis.target.dispatchEvent(createEvent('resize'));\n\t\t}\n\t}\n\n\tclear() {\n\t\tthis.ctx.clearRect(0, 0, this.target.width, this.target.height);\n\t}\n\n\t// Bring the content of the canvas to the front\n\tbringToFront() {\n\n\t\t// Update the window.location with the hash #background\n\t\twindow.location.hash = BACKGROUND_HASH;\n\t}\n\n\t// Trigger the draw function\n\tdraw() {\n\n\t\t// Increment the number of frames\n\t\tthis.fps++;\n\n\t\t// Call the frame function in the context of the frame to draw\n\t\tthis.target.dispatchEvent(createEvent('frame'));\n\n\t\t// Request another frame\n\t\trequestAnimationFrame(this.draw.bind(this));\n\t}\n\n\t// The user has clicked an item on the page\n\taddEventListener(eventnames, handler) {\n\n\t\teventnames.split(EVENT_SEPARATOR).forEach(eventname => {\n\t\t\t// Add to the events list\n\t\t\tif (!(eventname in this.events)) {\n\t\t\t\tthis.events[eventname] = [];\n\t\t\t}\n\n\t\t\tthis.events[eventname].push(handler);\n\t\t});\n\t}\n\n\t// Dispatch\n\tdispatchEvent(e) {\n\n\t\tif (e.type in this.events) {\n\n\t\t\tconst target = e.currentTarget;\n\n\t\t\t// This was triggered using event delegation, aka in the background\n\t\t\tif (target === document) {\n\n\t\t\t\te = createDummyEvent({\n\t\t\t\t\ttype: e.type,\n\t\t\t\t\ttarget: this.target,\n\t\t\t\t\toffsetX: e.pageX || e.offsetX,\n\t\t\t\t\toffsetY: e.pageY || e.offsetY\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.events[e.type].forEach(handler => handler(e));\n\t\t\te.stopPropagation();\n\t\t}\n\t}\n\n\t// Dispatch\n\tdispatchTouchEvent(e) {\n\t\t// If this was a touch event\n\t\t// Determine the offset to the canvas element relative to the item being clicked\n\t\tconst touch = (e.touches || e.changedTouches)[0];\n\t\tif (touch) {\n\t\t\te.offsetX = Math.abs(touch.pageX || touch.screenX);\n\t\t\te.offsetY = Math.abs(touch.pageY || touch.screenY);\n\t\t}\n\n\t\tthis.dispatchEvent(e);\n\t}\n}\n\n\nfunction hashchange(z) {\n\n\tconst zIndex = 'z-index';\n\n\tif (window.location.hash === `#${ BACKGROUND_HASH}`) {\n\t\tz = 10000;\n\t}\n\n\tif (z !== undefined) {\n\t\t// Set the z-Index\n\t\tthis.setProperty(zIndex, z);\n\t}\n\telse {\n\t\t// Remove the z-Index\n\t\tthis.removeProperty(zIndex);\n\t}\n}\n","\nimport Canvas from './classes/canvas';\n\nconst canvas = new Canvas();\ncanvas.addEventListener('mouseover', () => hover = true);\ncanvas.addEventListener('mouseout', () => hover = false);\n\nconst slices = 32;\nconst pi = (Math.PI / 180);\nconst deg = (360 / slices);\nconst pallate = ['rgb(255, 140, 0)', 'rgb(255,0,0)', 'rgb(255,255,0)'];\n\nlet spin = 0;\nlet radius;\nlet hover;\nlet opacity = 0;\n\ncanvas.addEventListener('frame', () => {\n\n\tconst ctx = canvas.ctx;\n\tconst [cx, cy] = [canvas.width / 2, canvas.height / 2];\n\n\t// ensure its keeping up.\n\tradius = Math.max(canvas.width, canvas.height) / 2;\n\n\t// Do we need this?\n\tif (hover || opacity > 0) {\n\n\t\tspin++;\n\n\t\tif (hover && opacity < 1) {\n\t\t\topacity += 0.1;\n\t\t}\n\t\tif (!hover && opacity > 0) {\n\t\t\topacity -= 0.1;\n\t\t}\n\n\t\tcanvas.target.style.opacity = Math.round(opacity * 10) / 10;\n\n\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\n\t\t// draw an arc\n\t\tfor (let i = 0; i < slices; i++) {\n\t\t\tctx.beginPath();\n\t\t\tctx.fillStyle = pallate[i % pallate.length];\n\n\t\t\t// *270 changed to *360\n\t\t\tctx.arc(radius, radius, radius * 1.5, pi * ((i * deg) + spin), pi * (((i + 1) * deg) + spin), false);\n\t\t\tctx.lineTo(cx, cy);\n\t\t\tctx.fill();\n\t\t\tctx.closePath();\n\t\t}\n\t}\n});\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvdHJpY2tzL2FycmF5L3RvQXJyYXkuanMiLCJub2RlX21vZHVsZXMvdHJpY2tzL2RvbS9lYWNoLmpzIiwibm9kZV9tb2R1bGVzL3RyaWNrcy9kb20vaXNEb20uanMiLCJub2RlX21vZHVsZXMvdHJpY2tzL2V2ZW50cy9jcmVhdGVEdW1teUV2ZW50LmpzIiwibm9kZV9tb2R1bGVzL3RyaWNrcy9ldmVudHMvY3JlYXRlRXZlbnQuanMiLCJub2RlX21vZHVsZXMvdHJpY2tzL2V2ZW50cy9vbi5qcyIsIm5vZGVfbW9kdWxlcy90cmlja3MvZXZlbnRzL3N3aXBlLmpzIiwibm9kZV9tb2R1bGVzL3RyaWNrcy9ldmVudHMvdG91Y2guanMiLCJub2RlX21vZHVsZXMvdHJpY2tzL29iamVjdC9pbnN0YW5jZU9mLmpzIiwibm9kZV9tb2R1bGVzL3RyaWNrcy9zdXBwb3J0L3JlcXVlc3RBbmltYXRpb25GcmFtZS5qcyIsInNyYy9jbGFzc2VzL2NhbnZhcy5qcyIsInNyYy9zdW5yaXNlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxPQUFPLE9BQVAsR0FBaUI7QUFBQSxTQUFPLE1BQU0sU0FBTixDQUFnQixLQUFoQixDQUFzQixJQUF0QixDQUEyQixHQUEzQixDQUFQO0FBQUEsQ0FBakI7Ozs7O0FDQUEsSUFBTSxRQUFRLFFBQVEsWUFBUixDQUFkO0FBQ0EsSUFBTSxhQUFhLFFBQVEseUJBQVIsQ0FBbkI7QUFDQSxJQUFNLFVBQVUsUUFBUSxxQkFBUixDQUFoQjs7QUFFQSxPQUFPLE9BQVAsR0FBaUIsVUFBQyxPQUFELEVBQWtDO0FBQUEsS0FBeEIsUUFBd0IsdUVBQWIsWUFBTSxDQUFFLENBQUs7OztBQUVsRCxLQUFJLE1BQU0sT0FBTixDQUFKLEVBQW9CO0FBQ25CLFlBQVUsQ0FBQyxPQUFELENBQVY7QUFDQSxFQUZELE1BR0ssSUFBSSxPQUFPLE9B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QUFpQixDQUFqQixFQUFvQixPQUFPLEtBQTNCLEVBQWtDLE9BQU8sTUFBekM7O0FBRUE7QUFDQSxPQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksTUFBcEIsRUFBNEIsR0FBNUIsRUFBaUM7QUFDaEMsT0FBSSxTQUFKO0FBQ0EsT0FBSSxTQUFKLEdBQWdCLFFBQVEsSUFBSSxRQUFRLE1BQXBCLENBQWhCOztBQUVBO0FBQ0EsT0FBSSxHQUFKLENBQVEsTUFBUixFQUFnQixNQUFoQixFQUF3QixTQUFTLEdBQWpDLEVBQXNDLE1BQU8sSUFBSSxHQUFMLEdBQVksSUFBbEIsQ0FBdEMsRUFBK0QsTUFBTyxDQUFDLElBQUksQ0FBTCxJQUFVLEdBQVgsR0FBa0IsSUFBeEIsQ0FBL0QsRUFBOEYsS0FBOUY7QUFDQSxPQUFJLE1BQUosQ0FBVyxFQUFYLEVBQWUsRUFBZjtBQUNBLE9BQUksSUFBSjtBQUNBLE9BQUksU0FBSjtBQUNBO0FBQ0Q7QUFDRCxDQXBDRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJtb2R1bGUuZXhwb3J0cyA9IG9iaiA9PiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChvYmopO1xuIiwiY29uc3QgaXNEb20gPSByZXF1aXJlKCcuL2lzRG9tLmpzJyk7XG5jb25zdCBpbnN0YW5jZU9mID0gcmVxdWlyZSgnLi4vb2JqZWN0L2luc3RhbmNlT2YuanMnKTtcbmNvbnN0IHRvQXJyYXkgPSByZXF1aXJlKCcuLi9hcnJheS90b0FycmF5LmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKG1hdGNoZXMsIGNhbGxiYWNrID0gKCkgPT4ge30pID0+IHtcblxuXHRpZiAoaXNEb20obWF0Y2hlcykpIHtcblx0XHRtYXRjaGVzID0gW21hdGNoZXNdO1xuXHR9XG5cdGVsc2UgaWYgKHR5cGVvZihtYXRjaGVzKSA9PT0gJ3N0cmluZycpIHtcblx0XHRtYXRjaGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChtYXRjaGVzKTtcblx0fVxuXG5cdGlmICghaW5zdGFuY2VPZihtYXRjaGVzLCBBcnJheSkpIHtcblx0XHRtYXRjaGVzID0gdG9BcnJheShtYXRjaGVzKTtcblx0fVxuXG5cdGlmIChjYWxsYmFjaykge1xuXHRcdG1hdGNoZXMuZm9yRWFjaChjYWxsYmFjayk7XG5cdH1cblxuXHRyZXR1cm4gbWF0Y2hlcztcbn07XG4iLCJjb25zdCBpbnN0YW5jZU9mID0gcmVxdWlyZSgnLi4vb2JqZWN0L2luc3RhbmNlT2YuanMnKTtcblxuY29uc3QgX0hUTUxFbGVtZW50ID0gdHlwZW9mIEhUTUxFbGVtZW50ICE9PSAndW5kZWZpbmVkJyA/IEhUTUxFbGVtZW50IDogRWxlbWVudDtcbmNvbnN0IF9IVE1MRG9jdW1lbnQgPSB0eXBlb2YgSFRNTERvY3VtZW50ICE9PSAndW5kZWZpbmVkJyA/IEhUTUxEb2N1bWVudCA6IERvY3VtZW50O1xuY29uc3QgX1dpbmRvdyA9IHdpbmRvdy5jb25zdHJ1Y3RvcjtcblxubW9kdWxlLmV4cG9ydHMgPSB0ZXN0ID0+XG5cdGluc3RhbmNlT2YodGVzdCwgX0hUTUxFbGVtZW50KSB8fFxuXHRcdGluc3RhbmNlT2YodGVzdCwgX0hUTUxEb2N1bWVudCkgfHxcblx0XHRpbnN0YW5jZU9mKHRlc3QsIF9XaW5kb3cpXG47XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGUgPT4ge1xuXHRlLnN0b3BQcm9wYWdhdGlvbiA9ICgpID0+IHt9O1xuXHRlLnByZXZlbnREZWZhdWx0ID0gKCkgPT4ge307XG5cdHJldHVybiBlO1xufTtcbiIsIi8vIElFIGRvZXMgbm90IHN1cHBvcnQgYG5ldyBFdmVudCgpYFxuLy8gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0d1aWRlL0V2ZW50cy9DcmVhdGluZ19hbmRfdHJpZ2dlcmluZ19ldmVudHMgZm9yIGRldGFpbHNcbmNvbnN0IGRpY3QgPSB7YnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogdHJ1ZX07XG5cbmxldCBjcmVhdGVFdmVudCA9IChldmVudG5hbWUsIG9wdGlvbnMgPSBkaWN0KSA9PlxuXHRuZXcgRXZlbnQoZXZlbnRuYW1lLCBvcHRpb25zKTtcblxudHJ5IHtcblx0Y3JlYXRlRXZlbnQoJ3Rlc3QnKTtcbn1cbmNhdGNoIChlKSB7XG5cdGNyZWF0ZUV2ZW50ID0gKGV2ZW50bmFtZSwgb3B0aW9ucyA9IGRpY3QpID0+IHtcblx0XHRjb25zdCBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG5cdFx0ZS5pbml0RXZlbnQoZXZlbnRuYW1lLCAhIW9wdGlvbnMuYnViYmxlcywgISFvcHRpb25zLmNhbmNlbGFibGUpO1xuXHRcdHJldHVybiBlO1xuXHR9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZUV2ZW50O1xuIiwiLy8gb24uanNcbi8vIExpc3RlbiB0byBldmVudHMsIHRoaXMgaXMgYSB3cmFwcGVyIGZvciBhZGRFdmVudExpc3RlbmVyXG5cbmNvbnN0IGVhY2ggPSByZXF1aXJlKCcuLi9kb20vZWFjaC5qcycpO1xuY29uc3QgU0VQRVJBVE9SID0gL1tcXHMsXSsvO1xuXG4vLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL1dJQ0cvRXZlbnRMaXN0ZW5lck9wdGlvbnMvYmxvYi9naC1wYWdlcy9leHBsYWluZXIubWQjZmVhdHVyZS1kZXRlY3Rpb25cbmxldCBzdXBwb3J0c1Bhc3NpdmUgPSBmYWxzZTtcbnRyeSB7XG5cdGNvbnN0IG9wdHMgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdwYXNzaXZlJywge1xuXHRcdGdldCgpIHtcblx0XHRcdHN1cHBvcnRzUGFzc2l2ZSA9IHRydWU7XG5cdFx0fVxuXHR9KTtcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBudWxsLCBvcHRzKTtcbn1cbmNhdGNoIChlKSB7XG5cdC8vIENvbnRpbnVlXG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSAoZWxlbWVudHMsIGV2ZW50bmFtZXMsIGNhbGxiYWNrLCBvcHRpb25zID0gZmFsc2UpID0+IHtcblxuXHRpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnICYmIG9wdGlvbnMucGFzc2l2ZSAmJiAhc3VwcG9ydHNQYXNzaXZlKSB7XG5cdFx0Ly8gT3ZlcnJpZGUgdGhlIHBhc3NpdmUgbWFya1xuXHRcdG9wdGlvbnMgPSBmYWxzZTtcblx0fVxuXG5cdGV2ZW50bmFtZXMgPSBldmVudG5hbWVzLnNwbGl0KFNFUEVSQVRPUik7XG5cdHJldHVybiBlYWNoKGVsZW1lbnRzLCBlbCA9PiBldmVudG5hbWVzLmZvckVhY2goZXZlbnRuYW1lID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRuYW1lLCBjYWxsYmFjaywgb3B0aW9ucykpKTtcbn07XG4iLCIvLyBzd2lwZVxuLy8gQ2hlY2tzIGZvciBhIHN3aXBlIHRvIHRoZSBsZWZ0IG9yIHRvIHRoZSByaWdodFxuXG5jb25zdCB0b3VjaCA9IHJlcXVpcmUoJy4vdG91Y2guanMnKTtcbmNvbnN0IHtnZXN0dXJlfSA9IHRvdWNoO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChlbGVtZW50cywgY2FsbGJhY2spID0+XG5cblx0dG91Y2goZWxlbWVudHMsIGZ1bmN0aW9uKGUsIG8sIHMpIHtcblxuXHRcdGdlc3R1cmUoZSwgcyk7XG5cblx0XHRlLmdlc3R1cmUudHlwZSA9IGBkcmFnJHtlLmdlc3R1cmUuZGlyZWN0aW9ufWA7XG5cblx0XHRjYWxsYmFjay5jYWxsKHRoaXMsIGUpO1xuXG5cdH0sXG5cdGZ1bmN0aW9uIChlKSB7XG5cdFx0Z2VzdHVyZShlKTtcblx0XHRlLmdlc3R1cmUudHlwZSA9ICdzdGFydCc7XG5cdFx0Y2FsbGJhY2suY2FsbCh0aGlzLCBlKTtcblx0fSxcblx0ZnVuY3Rpb24oZSkge1xuXG5cdFx0Y29uc3QgZyA9IGUuZ2VzdHVyZTtcblxuXHRcdC8vIEhvdyBsb25nIGRpZCB0aGlzIG9wZXJhdGlvbiB0YWtlP1xuXHRcdGlmIChnLmRlbHRhVGltZSA8IDIwMCAmJiBnLmRpc3RhbmNlID4gMjAgJiYgZy52ZWxvY2l0eSA+IDAuMykge1xuXHRcdFx0Zy50eXBlID0gYHN3aXBlJHtnLmRpcmVjdGlvbn1gO1xuXHRcdH1cblx0XHRlbHNlIGlmIChnLmRpc3RhbmNlIDwgMjApIHtcblx0XHRcdGcudHlwZSA9ICdjbGljayc7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0Zy50eXBlID0gJ3JlbGVhc2UnO1xuXHRcdH1cblxuXHRcdGNhbGxiYWNrLmNhbGwodGhpcywgZSk7XG5cdH0pXG47XG4iLCIvLyBTdGFuZGFyZGl6ZXMgdG91Y2ggZXZlbnRzXG4vLyBDYWxjdWxhdGUgdGhlIGRpZmZlcmVuY2UgZnJvbSB0aGUgc3RhcnRpbmcgcG9zaXRpb24gYW5kIHRoZSBlbmQgcG9zaXRpb24uXG4vLyBSZXR1cm5zIGEgZ2VzdHVyZSBvYmplY3QgZ2l2ZW5cblxuY29uc3Qgb24gPSByZXF1aXJlKCcuL29uLmpzJyk7XG5jb25zdCBlYWNoID0gcmVxdWlyZSgnLi4vZG9tL2VhY2guanMnKTtcblxuLy8gRG9lcyB0aGlzIHN1cHBvcnQgcG9pbnRlciBldmVudHM/XG5jb25zdCBwb2ludGVyRW5hYmxlZCA9IHdpbmRvdy5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQ7XG5jb25zdCBldmVudE1vdmVUeXBlcyA9IHBvaW50ZXJFbmFibGVkID8gJ01TUG9pbnRlck1vdmUgcG9pbnRlck1vdmUnIDogJ21vdXNlbW92ZSB0b3VjaG1vdmUnO1xuY29uc3QgZXZlbnRTdGFydFR5cGVzID0gcG9pbnRlckVuYWJsZWQgPyAnTVNQb2ludGVyRG93biBwb2ludGVyRG93bicgOiAnbW91c2Vkb3duIHRvdWNoc3RhcnQnO1xuY29uc3QgZXZlbnRFbmRUeXBlcyA9IHBvaW50ZXJFbmFibGVkID8gJ01TUG9pbnRlclVwIHBvaW50ZXJVcCcgOiAnbW91c2V1cCB0b3VjaGVuZCB0b3VjaGNhbmNlbCc7XG5cbi8vIFRvdWNoXG4vLyBAcGFyYW0gY2FsbGJhY2sgZnVuY3Rpb24gLSBFdmVyeSB0b3VjaCBldmVudCBmaXJlZFxuLy8gQHBhcmFtIGNvbXBsZXRlIGZ1bmN0aW9uLSBPbmNlIGFsbCB0b3VjaCBldmVudCBlbmRzXG5tb2R1bGUuZXhwb3J0cyA9IChlbGVtZW50cywgb25tb3ZlLCBvbnN0YXJ0LCBvbmVuZCkgPT4ge1xuXG5cdC8vIFN0b3JlIGNhbGxiYWNrcywgYW5kIHByZXZpb3VzIHBvaW50ZXIgcG9zaXRpb25cblx0Y29uc3QgY2IgPSB7fTtcblx0Y29uc3QgbXYgPSB7fTtcblx0Y29uc3QgZmluID0ge307XG5cblx0b24oZG9jdW1lbnQsIGV2ZW50TW92ZVR5cGVzLCBtb3ZlRXZlbnQgPT4ge1xuXG5cdFx0Ly8gRml4IEFuZHJvaWQgbm90IGZpcmluZyBtdWx0aXBsZSBtb3Zlc1xuXHRcdC8vIGlmIChlLnR5cGUubWF0Y2goL3RvdWNoL2kpKSB7XG5cdFx0Ly8gXHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0Ly8gfVxuXG5cdFx0Ly8gUG9pbnRlci9Nb3VzZSBkb3duP1xuXHRcdGlmICh2b2lkRXZlbnQobW92ZUV2ZW50KSkge1xuXHRcdFx0Ly8gVGhlIG1vdXNlIGJ1dHRvbnMgaXNuJ3QgcHJlc3NlZCwga2lsbCB0aGlzXG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gdHJpZ2dlciB0aGUgY2FsbFxuXHRcdGNvbnN0IGkgPSBtb3ZlRXZlbnQucG9pbnRlcklkIHx8IDA7XG5cdFx0Y29uc3QgaGFuZGxlciA9IGNiW2ldO1xuXG5cdFx0aWYgKGhhbmRsZXIgJiYgdHlwZW9mKGhhbmRsZXIpID09PSAnZnVuY3Rpb24nKSB7XG5cblx0XHRcdGNvbnN0IHByZXZFdmVudCA9IG12W2ldO1xuXG5cdFx0XHQvLyBFeHRlbmQgdGhlIEV2ZW50IE9iamVjdCB3aXRoICdnZXN0dXJlcydcblx0XHRcdGdlc3R1cmUobW92ZUV2ZW50LCBwcmV2RXZlbnQpO1xuXG5cdFx0XHQvLyBUcmlnZ2VyIGNhbGxiYWNrXG5cdFx0XHRoYW5kbGVyKG1vdmVFdmVudCwgcHJldkV2ZW50KTtcblx0XHR9XG5cblx0XHRtdltpXSA9IG1vdmVFdmVudDtcblx0fSk7XG5cblx0b24oZG9jdW1lbnQsIGV2ZW50RW5kVHlwZXMsIGUgPT4ge1xuXG5cdFx0Y29uc3QgaSA9IGUucG9pbnRlcklkIHx8IDA7XG5cdFx0Y2JbaV0gPSBudWxsO1xuXG5cdFx0aWYgKGUudHlwZSA9PT0gJ3RvdWNoZW5kJyB8fCBlLnR5cGUgPT09ICd0b3VjaGNhbmNlbCcpIHtcblx0XHRcdGUgPSBtdltpXTtcblx0XHR9XG5cblx0XHRjb25zdCBoYW5kbGVyID0gZmluW2ldO1xuXHRcdGlmIChoYW5kbGVyKSB7XG5cdFx0XHRoYW5kbGVyKGUpO1xuXHRcdH1cblxuXHRcdGZpbltpXSA9IG51bGw7XG5cdH0pO1xuXG5cdC8vIGxvb3AgdGhyb3VnaCBhbmQgYWRkIGV2ZW50c1xuXHRlYWNoKGVsZW1lbnRzLCBlbGVtZW50ID0+IHtcblxuXHRcdC8vIGJpbmQgZXZlbnRzXG5cdFx0Ly8gb24oZWxlbWVudCwgJ3RvdWNoZW5kJywgZSA9PiB7XG5cdFx0Ly8gXHRjb25zb2xlLmxvZygnZWw6dG91Y2hlbmQnKTtcblx0XHQvLyBcdGNvbnNvbGUubG9nKGUpO1xuXHRcdC8vIH0pO1xuXG5cdFx0b24oZWxlbWVudCwgJ3NlbGVjdHN0YXJ0JywgKCkgPT4gZmFsc2UpO1xuXG5cdFx0b24oZWxlbWVudCwgZXZlbnRTdGFydFR5cGVzLCBzdGFydEV2ZW50ID0+IHtcblxuXHRcdFx0Ly8gU2V0IHByZXZlbnQgZGVmYXVsdCB0byBzdG9wIGFueSBtb3VzZSBldmVudHMgZnJvbSBhbHNvIGJlaW5nIGNhbGxlZFxuXHRcdFx0aWYgKCh0eXBlb2YgVG91Y2hFdmVudCAhPT0gJ3VuZGVmaW5lZCcpICYmIHN0YXJ0RXZlbnQgaW5zdGFuY2VvZiBUb3VjaEV2ZW50KSB7XG5cdFx0XHRcdC8vIFByZXZlbnQgdGhlIHRyaWdnZXJpbmcgb2YgdGhlIG1vdXNlIGV2ZW50c1xuXHRcdFx0XHRzdGFydEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGRlZmF1bHQgcG9pbnRlciBJRFxuXHRcdFx0Y29uc3QgaSA9IHN0YXJ0RXZlbnQucG9pbnRlcklkIHx8IDA7XG5cblx0XHRcdC8vIEFkZCBHZXN0dXJlcyB0byBldmVudCBPYmplY3Rcblx0XHRcdGdlc3R1cmUoc3RhcnRFdmVudCk7XG5cblx0XHRcdG12W2ldID0gc3RhcnRFdmVudDtcblx0XHRcdGNiW2ldID0gKG1vdmVFdmVudCwgcHJldk1vdmVFdmVudCkgPT4ge1xuXHRcdFx0XHRvbm1vdmUuY2FsbChlbGVtZW50LCBtb3ZlRXZlbnQsIHByZXZNb3ZlRXZlbnQsIHN0YXJ0RXZlbnQpO1xuXHRcdFx0fTtcblxuXHRcdFx0aWYgKG9uZW5kKSB7XG5cdFx0XHRcdGZpbltpXSA9IGVuZEV2ZW50ID0+IHtcblxuXHRcdFx0XHRcdC8vIEFkZCBHZXN0dXJlcyB0byBldmVudCBPYmplY3Rcblx0XHRcdFx0XHRnZXN0dXJlKGVuZEV2ZW50LCBzdGFydEV2ZW50KTtcblxuXHRcdFx0XHRcdC8vIGZpcmUgY29tcGxldGUgY2FsbGJhY2tcblx0XHRcdFx0XHRvbmVuZC5jYWxsKGVsZW1lbnQsIGVuZEV2ZW50LCBzdGFydEV2ZW50KTtcblx0XHRcdFx0fTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gdHJpZ2dlciBzdGFydFxuXHRcdFx0aWYgKG9uc3RhcnQpIHtcblx0XHRcdFx0b25zdGFydC5jYWxsKGVsZW1lbnQsIHN0YXJ0RXZlbnQpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcbn07XG5cbmZ1bmN0aW9uIGdlc3R1cmUoY3VyckV2ZW50LCBwcmV2RXZlbnQpIHtcblxuXHQvLyBSZXNwb25zZSBPYmplY3Rcblx0Y3VyckV2ZW50Lmdlc3R1cmUgPSB7fTtcblxuXHRpZiAoY3VyckV2ZW50ICYmIGN1cnJFdmVudC50b3VjaGVzICYmIGN1cnJFdmVudC50b3VjaGVzLmxlbmd0aCA+IDApIHtcblx0XHRjdXJyRXZlbnQuZ2VzdHVyZS50b3VjaGVzID0gY3VyckV2ZW50LnRvdWNoZXM7XG5cdH1cblx0ZWxzZSB7XG5cdFx0Y3VyckV2ZW50Lmdlc3R1cmUudG91Y2hlcyA9IFtjdXJyRXZlbnRdO1xuXHR9XG5cblx0Y3VyckV2ZW50Lmdlc3R1cmUuc2NyZWVuWCA9IGN1cnJFdmVudC5nZXN0dXJlLnRvdWNoZXNbMF0uc2NyZWVuWDtcblx0Y3VyckV2ZW50Lmdlc3R1cmUuc2NyZWVuWSA9IGN1cnJFdmVudC5nZXN0dXJlLnRvdWNoZXNbMF0uc2NyZWVuWTtcblxuXHRpZiAoISgnc2NyZWVuWCcgaW4gY3VyckV2ZW50KSkge1xuXHRcdGN1cnJFdmVudC5zY3JlZW5YID0gY3VyckV2ZW50Lmdlc3R1cmUuc2NyZWVuWDtcblx0fVxuXHRpZiAoISgnc2NyZWVuWScgaW4gY3VyckV2ZW50KSkge1xuXHRcdGN1cnJFdmVudC5zY3JlZW5ZID0gY3VyckV2ZW50Lmdlc3R1cmUuc2NyZWVuWTtcblx0fVxuXG5cdC8vIElmIHRoZSBzZWNvbmQgcGFyYW1ldGVyIGlzbid0IGRlZmluZWQgdGhlbiB3ZSdyZSB1bmFibGUgdG8gZGVmaW5lIGdldHVyZXNcblx0Ly8gQnV0IGlmIGl0IGlzIHRoZW4gd2hvb3AsIGxldHMgZ28uXG5cdGlmIChwcmV2RXZlbnQpIHtcblxuXHRcdGN1cnJFdmVudC5nZXN0dXJlLmRlbHRhVGltZSA9IChjdXJyRXZlbnQudGltZVN0YW1wIC0gcHJldkV2ZW50LnRpbWVTdGFtcCk7XG5cblx0XHRjb25zdCBkeCA9IGN1cnJFdmVudC5nZXN0dXJlLmRlbHRhWCA9IGN1cnJFdmVudC5nZXN0dXJlLnNjcmVlblggLSBwcmV2RXZlbnQuZ2VzdHVyZS5zY3JlZW5YO1xuXHRcdGNvbnN0IGR5ID0gY3VyckV2ZW50Lmdlc3R1cmUuZGVsdGFZID0gY3VyckV2ZW50Lmdlc3R1cmUuc2NyZWVuWSAtIHByZXZFdmVudC5nZXN0dXJlLnNjcmVlblk7XG5cblx0XHQvLyBXaGljaCBpcyB0aGUgYmVzdCBkaXJlY3Rpb24gZm9yIHRoZSBnZXN0dXJlP1xuXHRcdGlmIChNYXRoLmFicyhkeSkgPiBNYXRoLmFicyhkeCkpIHtcblx0XHRcdGN1cnJFdmVudC5nZXN0dXJlLmRpcmVjdGlvbiA9IChkeSA+IDAgPyAndXAnIDogJ2Rvd24nKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRjdXJyRXZlbnQuZ2VzdHVyZS5kaXJlY3Rpb24gPSAoZHggPiAwID8gJ3JpZ2h0JyA6ICdsZWZ0Jyk7XG5cdFx0fVxuXG5cdFx0Ly8gRGlzdGFuY2Vcblx0XHRjdXJyRXZlbnQuZ2VzdHVyZS5kaXN0YW5jZSA9IE1hdGguc3FydCgoZHggKiBkeCkgKyAoZHkgKiBkeSkpO1xuXG5cdFx0Ly8gVmVsb2NpdHlcblx0XHRjdXJyRXZlbnQuZ2VzdHVyZS52ZWxvY2l0eSA9IGN1cnJFdmVudC5nZXN0dXJlLmRpc3RhbmNlIC8gY3VyckV2ZW50Lmdlc3R1cmUuZGVsdGFUaW1lO1xuXHR9XG59XG5cbm1vZHVsZS5leHBvcnRzLmdlc3R1cmUgPSBnZXN0dXJlO1xuXG5mdW5jdGlvbiB2b2lkRXZlbnQoZXZlbnQpIHtcblx0Y29uc3QgdHlwZSA9IGV2ZW50LnBvaW50ZXJUeXBlIHx8IGV2ZW50LnR5cGU7XG5cdHJldHVybiAodHlwZS5tYXRjaCgvbW91c2UvaSkgJiYgKGV2ZW50LndoaWNoIHx8IGV2ZW50LmJ1dHRvbnMpICE9PSAxKTtcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gKHRlc3QsIHJvb3QpID0+IHJvb3QgJiYgdGVzdCBpbnN0YW5jZW9mIHJvb3Q7XG4iLCIvLyByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgcG9seWZpbGxcbndpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPVxuXHR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG5cdHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcblx0d2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuXHR3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuXHR3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcblx0KGNhbGxiYWNrID0+IHNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMDAgLyA2MCkpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYmluZCh3aW5kb3cpO1xuIiwiLy8gU2V0dXBcbi8vIFRoaXMgY29uc3RydWN0cyB0aGUgY2FudmFzIG9iamVjdFxuXG4vLyBJbmNsdWRlc1xuaW1wb3J0ICd0cmlja3Mvc3VwcG9ydC9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUnO1xuaW1wb3J0IGNyZWF0ZUV2ZW50IGZyb20gJ3RyaWNrcy9ldmVudHMvY3JlYXRlRXZlbnQnO1xuaW1wb3J0IGNyZWF0ZUR1bW15RXZlbnQgZnJvbSAndHJpY2tzL2V2ZW50cy9jcmVhdGVEdW1teUV2ZW50JztcbmltcG9ydCBvbiBmcm9tICd0cmlja3MvZXZlbnRzL29uJztcbmltcG9ydCBzd2lwZSBmcm9tICd0cmlja3MvZXZlbnRzL3N3aXBlJztcblxuLy8gQ29uc3RhbnRzXG5jb25zdCBCQUNLR1JPVU5EX0hBU0ggPSAnYmFja2dyb3VuZCc7XG5jb25zdCBVc2VyRXZlbnRzID0gWydjbGljaycsICdtb3VzZWRvd24nLCAnbW91c2V1cCcsICdtb3VzZW92ZXInLCAnbW91c2Vtb3ZlJywgJ21vdXNlb3V0JywgJ21vdXNld2hlZWwnLCAnZnJhbWUnLCAncmVzaXplJywgJ2tleWRvd24nXTtcbmNvbnN0IFRvdWNoRXZlbnRzID0gWyd0b3VjaG1vdmUnLCAndG91Y2hzdGFydCcsICd0b3VjaGVuZCddO1xuXG5jb25zdCBFVkVOVF9TRVBBUkFUT1IgPSAvW1xcc1xcLF0rLztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FudmFzIHtcblxuXHQvLyBDb25zdHJ1Y3QgdGhlIENhbnZhcyBFbGVtZW50XG5cdC8vIEBwYXJhbSBjYW52YXMgc2hvdWxkIGJlIGFuIHJvb3QgZWxlbWVudCBjb250YWluZXIgZm9yIHRoaXMgaW1hZ2VyeS5cblx0Y29uc3RydWN0b3IoY2FudmFzKSB7XG5cblx0XHRsZXQgcGFyZW50O1xuXG5cdFx0Ly8gZXZlbnRzXG5cdFx0dGhpcy5ldmVudHMgPSB7fTtcblxuXHRcdC8vIGJyb3dzZXIgY2hlY2tcblx0XHRpZiAoISgnZ2V0Q29udGV4dCcgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJykpKSB7XG5cdFx0XHQvLyBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBjYW52YXNcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIShjYW52YXMgJiYgY2FudmFzIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpKSB7XG5cblx0XHRcdC8vIFNldCB0aGUgcGFyZW50XG5cdFx0XHRwYXJlbnQgPSBjYW52YXM7XG5cblx0XHRcdC8vIENyZWF0ZSB0aGUgY2FudmFzIGxheWVyXG5cdFx0XHRjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcblx0XHRcdGNhbnZhcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnd2hpdGUnO1xuXG5cdFx0XHQvLyBOb3QgYSBwYXJlbnRcblx0XHRcdGlmICghcGFyZW50KSB7XG5cdFx0XHRcdC8vIEFwcGVuZCB0byB0aGUgYm9keVxuXHRcdFx0XHRwYXJlbnQgPSBkb2N1bWVudC5ib2R5O1xuXHRcdFx0XHRjYW52YXMuc3R5bGUuY3NzVGV4dCA9ICdwb3NpdGlvbjpmaXhlZDt6LWluZGV4Oi0xO3RvcDowO2xlZnQ6MDsnO1xuXHRcdFx0XHRjYW52YXMuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIDApO1xuXG5cdFx0XHRcdGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5jc3NUZXh0ID0gJ21pbi1oZWlnaHQ6MTAwJTsnO1xuXHRcdFx0XHRkb2N1bWVudC5ib2R5LnN0eWxlLmNzc1RleHQgPSAnbWluLWhlaWdodDoxMDAlOyc7XG5cblx0XHRcdFx0Ly8gQmluZCB3aW5kb3cgcmVzaXplIGV2ZW50c1xuXHRcdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5yZXNpemUuYmluZCh0aGlzKSk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFwcGVuZCB0aGlzIGVsZW1lbnRcblx0XHRcdHBhcmVudC5pbnNlcnRCZWZvcmUoY2FudmFzLCBwYXJlbnQuZmlyc3RFbGVtZW50Q2hpbGQpO1xuXG5cdFx0XHR0aGlzLnRhcmdldCA9IGNhbnZhcztcblxuXHRcdFx0dGhpcy5yZXNpemUoKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHR0aGlzLnRhcmdldCA9IGNhbnZhcztcblx0XHRcdHBhcmVudCA9IGNhbnZhcy5wYXJlbnROb2RlO1xuXHRcdH1cblxuXHRcdHRoaXMuY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cblx0XHQvLyBTZXQgaW5pdGlhbCBzYXZlIHBvaW50XG5cdFx0dGhpcy5jdHguc2F2ZSgpO1xuXG5cdFx0Ly8gSW5pdGlhdGUgdGhlIHRpbWVcblx0XHR0aGlzLl90aW1lID0gMDtcblx0XHR0aGlzLl9mcHMgPSAwO1xuXG5cdFx0Ly8gSW5pdGlhdGUgdGhlIGRyYXdcblx0XHR0aGlzLmRyYXcoKTtcblxuXHRcdC8vIEJpbmQgZXZlbnRzXG5cdFx0b24odGhpcy50YXJnZXQsIFVzZXJFdmVudHMudG9TdHJpbmcoKSwgdGhpcy5kaXNwYXRjaEV2ZW50LmJpbmQodGhpcyksIHtwYXNzaXZlOiB0cnVlfSk7XG5cblx0XHQvLyBGb3JtYXQgVG91Y2ggZXZlbnRzXG5cdFx0b24odGhpcy50YXJnZXQsIFRvdWNoRXZlbnRzLnRvU3RyaW5nKCksIHRoaXMuZGlzcGF0Y2hUb3VjaEV2ZW50LmJpbmQodGhpcyksIHtwYXNzaXZlOiB0cnVlfSk7XG5cblx0XHQvLyBJbiBJRSB1c2VyLWV2ZW50cyBhcmVuJ3QgcHJvcGFnYXRlZCB0byBlbGVtZW50cyB3aGljaCBoYXZlIG5lZ2F0aXZlIHotSW5kZXgnc1xuXHRcdC8vIExpc3RlbiB0byBldmVudHMgb24gdGhlIGRvY3VtZW50IGVsZW1lbnQgYW5kIHByb3BhZ2F0ZSB0aG9zZSBhY2NvcmRpbmdseVxuXHRcdGlmIChwYXJlbnQgPT09IGRvY3VtZW50LmJvZHkgJiYgY2FudmFzLnN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3otaW5kZXgnKSA9PT0gJy0xJykge1xuXHRcdFx0Ly8gQmluZCBldmVudHNcblx0XHRcdG9uKGRvY3VtZW50LCBVc2VyRXZlbnRzLnRvU3RyaW5nKCksIHRoaXMuZGlzcGF0Y2hFdmVudC5iaW5kKHRoaXMpLCB7cGFzc2l2ZTogdHJ1ZX0pO1xuXG5cdFx0XHQvLyBGb3JtYXQgVG91Y2ggZXZlbnRzXG5cdFx0XHRvbihkb2N1bWVudCwgVG91Y2hFdmVudHMudG9TdHJpbmcoKSwgdGhpcy5kaXNwYXRjaFRvdWNoRXZlbnQuYmluZCh0aGlzKSwge3Bhc3NpdmU6IHRydWV9KTtcblx0XHR9XG5cblx0XHQvLyBMaXN0ZW4gdG8gaGFzaENoYW5nZSBldmVudHNcblx0XHR7XG5cdFx0XHQvLyBIQVNIIENIQU5HRSBERVBUSFxuXHRcdFx0Y29uc3Qgc3R5bGUgPSB0aGlzLnRhcmdldC5zdHlsZTtcblx0XHRcdGNvbnN0IGluaXRpYWxaID0gc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnei1pbmRleCcpO1xuXHRcdFx0Ly8gTGlzdGVuIHRvIGNoYW5nZXMgdG8gdGhlIGJhY2tncm91bmQgaGFzaCB0byBicmluZyB0aGUgY2FudmFzIGVsZW1lbnQgdG8gdGhlIGZyb250XG5cdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIGhhc2hjaGFuZ2UuYmluZChzdHlsZSwgaW5pdGlhbFopKTtcblxuXHRcdFx0aGFzaGNoYW5nZS5jYWxsKHN0eWxlLCBpbml0aWFsWik7XG5cdFx0fVxuXG5cdFx0Ly8gSXMgdGhlcmUgYSBzd2lwZSBtZXRob2QgaGFuZGxlclxuXHRcdGlmICh0aGlzLnN3aXBlKSB7XG5cdFx0XHQvLyBCaW5kIHRoZSBzd2lwZSBldmVudCBoYW5kbGVyIHRvIHRoZSBldmVudFxuXHRcdFx0c3dpcGUodGhpcy50YXJnZXQsIHRoaXMuc3dpcGUuYmluZCh0aGlzKSk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gZW5zdXJlIGl0cyBrZWVwaW5nIHVwLlxuXHRnZXQgd2lkdGgoKSB7XG5cdFx0cmV0dXJuIHRoaXMudGFyZ2V0LndpZHRoO1xuXHR9XG5cdHNldCB3aWR0aCh2YWx1ZSkge1xuXHRcdHRoaXMudGFyZ2V0LndpZHRoID0gdmFsdWU7XG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9XG5cblx0Z2V0IGhlaWdodCgpIHtcblx0XHRyZXR1cm4gdGhpcy50YXJnZXQuaGVpZ2h0O1xuXHR9XG5cdHNldCBoZWlnaHQodmFsdWUpIHtcblx0XHR0aGlzLnRhcmdldC5oZWlnaHQgPSB2YWx1ZTtcblx0XHRyZXR1cm4gdmFsdWU7XG5cdH1cblx0Z2V0IGZwcygpIHtcblx0XHRyZXR1cm4gdGhpcy5fZnBzO1xuXHR9XG5cdHNldCBmcHModmFsdWUpIHtcblxuXHRcdHRoaXMuX2ZwcyA9IHZhbHVlO1xuXG5cdFx0Y29uc3Qgbm93ID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcblxuXHRcdGlmICgobm93IC0gdGhpcy5fdGltZSkgPiAxMDAwKSB7XG5cdFx0XHQvLyBjb25zb2xlLmxvZygnZnBzOiAlZCcsIHRoaXMuX2Zwcyk7XG5cdFx0XHR0aGlzLl90aW1lID0gbm93O1xuXHRcdFx0dGhpcy5fZnBzID0gMDtcblx0XHR9XG5cdH1cblxuXG5cdHJlc2l6ZSgpIHtcblx0XHRjb25zdCBwYXJlbnQgPSAodGhpcy50YXJnZXQucGFyZW50Tm9kZSA9PT0gZG9jdW1lbnQuYm9keSkgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgOiB0aGlzLnRhcmdldC5wYXJlbnROb2RlO1xuXHRcdGNvbnN0IGhlaWdodCA9IHBhcmVudC5jbGllbnRIZWlnaHQ7XG5cdFx0Y29uc3Qgd2lkdGggPSBwYXJlbnQuY2xpZW50V2lkdGg7XG5cdFx0bGV0IGNoYW5nZWQgPSBmYWxzZTtcblxuXHRcdGlmICh0aGlzLndpZHRoICE9PSB3aWR0aCkge1xuXHRcdFx0Y2hhbmdlZCA9IHRydWU7XG5cdFx0XHR0aGlzLndpZHRoID0gd2lkdGg7XG5cdFx0fVxuXHRcdGlmICh0aGlzLmhlaWdodCAhPT0gaGVpZ2h0KSB7XG5cdFx0XHRjaGFuZ2VkID0gdHJ1ZTtcblx0XHRcdHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXHRcdH1cblxuXHRcdGlmIChjaGFuZ2VkKSB7XG5cdFx0XHR0aGlzLnRhcmdldC5kaXNwYXRjaEV2ZW50KGNyZWF0ZUV2ZW50KCdyZXNpemUnKSk7XG5cdFx0fVxuXHR9XG5cblx0Y2xlYXIoKSB7XG5cdFx0dGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMudGFyZ2V0LndpZHRoLCB0aGlzLnRhcmdldC5oZWlnaHQpO1xuXHR9XG5cblx0Ly8gQnJpbmcgdGhlIGNvbnRlbnQgb2YgdGhlIGNhbnZhcyB0byB0aGUgZnJvbnRcblx0YnJpbmdUb0Zyb250KCkge1xuXG5cdFx0Ly8gVXBkYXRlIHRoZSB3aW5kb3cubG9jYXRpb24gd2l0aCB0aGUgaGFzaCAjYmFja2dyb3VuZFxuXHRcdHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gQkFDS0dST1VORF9IQVNIO1xuXHR9XG5cblx0Ly8gVHJpZ2dlciB0aGUgZHJhdyBmdW5jdGlvblxuXHRkcmF3KCkge1xuXG5cdFx0Ly8gSW5jcmVtZW50IHRoZSBudW1iZXIgb2YgZnJhbWVzXG5cdFx0dGhpcy5mcHMrKztcblxuXHRcdC8vIENhbGwgdGhlIGZyYW1lIGZ1bmN0aW9uIGluIHRoZSBjb250ZXh0IG9mIHRoZSBmcmFtZSB0byBkcmF3XG5cdFx0dGhpcy50YXJnZXQuZGlzcGF0Y2hFdmVudChjcmVhdGVFdmVudCgnZnJhbWUnKSk7XG5cblx0XHQvLyBSZXF1ZXN0IGFub3RoZXIgZnJhbWVcblx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5kcmF3LmJpbmQodGhpcykpO1xuXHR9XG5cblx0Ly8gVGhlIHVzZXIgaGFzIGNsaWNrZWQgYW4gaXRlbSBvbiB0aGUgcGFnZVxuXHRhZGRFdmVudExpc3RlbmVyKGV2ZW50bmFtZXMsIGhhbmRsZXIpIHtcblxuXHRcdGV2ZW50bmFtZXMuc3BsaXQoRVZFTlRfU0VQQVJBVE9SKS5mb3JFYWNoKGV2ZW50bmFtZSA9PiB7XG5cdFx0XHQvLyBBZGQgdG8gdGhlIGV2ZW50cyBsaXN0XG5cdFx0XHRpZiAoIShldmVudG5hbWUgaW4gdGhpcy5ldmVudHMpKSB7XG5cdFx0XHRcdHRoaXMuZXZlbnRzW2V2ZW50bmFtZV0gPSBbXTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5ldmVudHNbZXZlbnRuYW1lXS5wdXNoKGhhbmRsZXIpO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gRGlzcGF0Y2hcblx0ZGlzcGF0Y2hFdmVudChlKSB7XG5cblx0XHRpZiAoZS50eXBlIGluIHRoaXMuZXZlbnRzKSB7XG5cblx0XHRcdGNvbnN0IHRhcmdldCA9IGUuY3VycmVudFRhcmdldDtcblxuXHRcdFx0Ly8gVGhpcyB3YXMgdHJpZ2dlcmVkIHVzaW5nIGV2ZW50IGRlbGVnYXRpb24sIGFrYSBpbiB0aGUgYmFja2dyb3VuZFxuXHRcdFx0aWYgKHRhcmdldCA9PT0gZG9jdW1lbnQpIHtcblxuXHRcdFx0XHRlID0gY3JlYXRlRHVtbXlFdmVudCh7XG5cdFx0XHRcdFx0dHlwZTogZS50eXBlLFxuXHRcdFx0XHRcdHRhcmdldDogdGhpcy50YXJnZXQsXG5cdFx0XHRcdFx0b2Zmc2V0WDogZS5wYWdlWCB8fCBlLm9mZnNldFgsXG5cdFx0XHRcdFx0b2Zmc2V0WTogZS5wYWdlWSB8fCBlLm9mZnNldFlcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuZXZlbnRzW2UudHlwZV0uZm9yRWFjaChoYW5kbGVyID0+IGhhbmRsZXIoZSkpO1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR9XG5cdH1cblxuXHQvLyBEaXNwYXRjaFxuXHRkaXNwYXRjaFRvdWNoRXZlbnQoZSkge1xuXHRcdC8vIElmIHRoaXMgd2FzIGEgdG91Y2ggZXZlbnRcblx0XHQvLyBEZXRlcm1pbmUgdGhlIG9mZnNldCB0byB0aGUgY2FudmFzIGVsZW1lbnQgcmVsYXRpdmUgdG8gdGhlIGl0ZW0gYmVpbmcgY2xpY2tlZFxuXHRcdGNvbnN0IHRvdWNoID0gKGUudG91Y2hlcyB8fCBlLmNoYW5nZWRUb3VjaGVzKVswXTtcblx0XHRpZiAodG91Y2gpIHtcblx0XHRcdGUub2Zmc2V0WCA9IE1hdGguYWJzKHRvdWNoLnBhZ2VYIHx8IHRvdWNoLnNjcmVlblgpO1xuXHRcdFx0ZS5vZmZzZXRZID0gTWF0aC5hYnModG91Y2gucGFnZVkgfHwgdG91Y2guc2NyZWVuWSk7XG5cdFx0fVxuXG5cdFx0dGhpcy5kaXNwYXRjaEV2ZW50KGUpO1xuXHR9XG59XG5cblxuZnVuY3Rpb24gaGFzaGNoYW5nZSh6KSB7XG5cblx0Y29uc3QgekluZGV4ID0gJ3otaW5kZXgnO1xuXG5cdGlmICh3aW5kb3cubG9jYXRpb24uaGFzaCA9PT0gYCMkeyBCQUNLR1JPVU5EX0hBU0h9YCkge1xuXHRcdHogPSAxMDAwMDtcblx0fVxuXG5cdGlmICh6ICE9PSB1bmRlZmluZWQpIHtcblx0XHQvLyBTZXQgdGhlIHotSW5kZXhcblx0XHR0aGlzLnNldFByb3BlcnR5KHpJbmRleCwgeik7XG5cdH1cblx0ZWxzZSB7XG5cdFx0Ly8gUmVtb3ZlIHRoZSB6LUluZGV4XG5cdFx0dGhpcy5yZW1vdmVQcm9wZXJ0eSh6SW5kZXgpO1xuXHR9XG59XG4iLCJcbmltcG9ydCBDYW52YXMgZnJvbSAnLi9jbGFzc2VzL2NhbnZhcyc7XG5cbmNvbnN0IGNhbnZhcyA9IG5ldyBDYW52YXMoKTtcbmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCAoKSA9PiBob3ZlciA9IHRydWUpO1xuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgKCkgPT4gaG92ZXIgPSBmYWxzZSk7XG5cbmNvbnN0IHNsaWNlcyA9IDMyO1xuY29uc3QgcGkgPSAoTWF0aC5QSSAvIDE4MCk7XG5jb25zdCBkZWcgPSAoMzYwIC8gc2xpY2VzKTtcbmNvbnN0IHBhbGxhdGUgPSBbJ3JnYigyNTUsIDE0MCwgMCknLCAncmdiKDI1NSwwLDApJywgJ3JnYigyNTUsMjU1LDApJ107XG5cbmxldCBzcGluID0gMDtcbmxldCByYWRpdXM7XG5sZXQgaG92ZXI7XG5sZXQgb3BhY2l0eSA9IDA7XG5cbmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdmcmFtZScsICgpID0+IHtcblxuXHRjb25zdCBjdHggPSBjYW52YXMuY3R4O1xuXHRjb25zdCBbY3gsIGN5XSA9IFtjYW52YXMud2lkdGggLyAyLCBjYW52YXMuaGVpZ2h0IC8gMl07XG5cblx0Ly8gZW5zdXJlIGl0cyBrZWVwaW5nIHVwLlxuXHRyYWRpdXMgPSBNYXRoLm1heChjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpIC8gMjtcblxuXHQvLyBEbyB3ZSBuZWVkIHRoaXM/XG5cdGlmIChob3ZlciB8fCBvcGFjaXR5ID4gMCkge1xuXG5cdFx0c3BpbisrO1xuXG5cdFx0aWYgKGhvdmVyICYmIG9wYWNpdHkgPCAxKSB7XG5cdFx0XHRvcGFjaXR5ICs9IDAuMTtcblx0XHR9XG5cdFx0aWYgKCFob3ZlciAmJiBvcGFjaXR5ID4gMCkge1xuXHRcdFx0b3BhY2l0eSAtPSAwLjE7XG5cdFx0fVxuXG5cdFx0Y2FudmFzLnRhcmdldC5zdHlsZS5vcGFjaXR5ID0gTWF0aC5yb3VuZChvcGFjaXR5ICogMTApIC8gMTA7XG5cblx0XHRjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cblx0XHQvLyBkcmF3IGFuIGFyY1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgc2xpY2VzOyBpKyspIHtcblx0XHRcdGN0eC5iZWdpblBhdGgoKTtcblx0XHRcdGN0eC5maWxsU3R5bGUgPSBwYWxsYXRlW2kgJSBwYWxsYXRlLmxlbmd0aF07XG5cblx0XHRcdC8vICoyNzAgY2hhbmdlZCB0byAqMzYwXG5cdFx0XHRjdHguYXJjKHJhZGl1cywgcmFkaXVzLCByYWRpdXMgKiAxLjUsIHBpICogKChpICogZGVnKSArIHNwaW4pLCBwaSAqICgoKGkgKyAxKSAqIGRlZykgKyBzcGluKSwgZmFsc2UpO1xuXHRcdFx0Y3R4LmxpbmVUbyhjeCwgY3kpO1xuXHRcdFx0Y3R4LmZpbGwoKTtcblx0XHRcdGN0eC5jbG9zZVBhdGgoKTtcblx0XHR9XG5cdH1cbn0pO1xuIl19"}